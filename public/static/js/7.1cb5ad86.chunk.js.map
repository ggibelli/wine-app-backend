{"version":3,"sources":["components/BackButton.tsx","containers/StyledBox.tsx","containers/InfiniteScrollFetch.tsx","utils/useIntersectionHook.tsx","components/FilterAds/Order.tsx","containers/CloseNegotiationButton.tsx","../node_modules/@material-ui/core/esm/DialogTitle/DialogTitle.js","containers/CreateReview.tsx","components/ReviewModal/index.tsx","components/FilterAds/index.tsx","utils/multiFilter.ts","components/Cards/CardNegotiation.tsx","pages/Negotiations.tsx"],"names":["BackButton","aria-label","color","size","startIcon","onClick","navigate","StyledBox","props","sellColor","notActive","buyColor","boxShadow","p","m","mt","px","pt","width","typeAd","TypeAd","Sell","borderColor","bgcolor","borderRadius","children","useStyles","makeStyles","createStyles","root","display","flexDirection","alignItems","InfiniteScroll","classes","message","useLocation","pathname","split","rootMargin","threshold","React","entry","setEntry","node","setNode","observer","current","disconnect","window","IntersectionObserver","currentObserver","observe","useIntersect","ref","isOk","setIsOk","intersectionRatio","fetchMore","setIsLoading","isVisible","className","id","isLoading","CircularProgress","style","height","Order","fullWidth","htmlFor","native","value","order","onChange","event","setOrder","target","inputProps","name","QueryOrderBy","CreatedAtDesc","CreatedAtAsc","isAds","PriceDesc","PriceAsc","CloseNegotiationButton","isBuy","useUpdateNegotiationMutation","onCompleted","closedNegotiation","updateNegotiation","errors","length","errorMessages","map","error","text","notification","type","toString","onError","closeNegotiation","loading","handleCloseNegotiation","a","variables","negotiation","_id","isConcluded","buyButton","sellButton","disabled","DialogTitle","_props$disableTypogra","disableTypography","other","_objectWithoutProperties","_extends","clsx","Typography","component","variant","withStyles","margin","padding","flex","CreateReview","review","closeModal","useCreateReviewMutation","createdReview","createReview","Button","labels","0.5","1","1.5","2","2.5","3","3.5","4","4.5","5","CreateReviewModal","idUser","idNegotiation","open","setOpen","setValue","hover","setHover","setReview","useStylesHook","classesTextField","useStylesForms","classesStars","useStyleRating","handleClose","Buy","Dialog","onClose","aria-labelledby","DialogContent","precision","newValue","onChangeActive","newHover","Box","ml","TextField","multiline","rows","helperText","InputLabelProps","InputProps","inputSell","underline","underlineSell","label","placeholder","DialogActions","forUser","rating","content","PurpleCheckbox","deepPurple","checked","Checkbox","Filter","searchedWineCache","searchedWine","isShowAll","setIsShowAll","showFilter","setShowFilter","priceTo","price","abv","harvest","litersTo","liters","filterAds","setFilterAds","list","filtredAds","array","filters","filterKeys","Object","keys","filter","item","every","key","multiFilter","setFilteredList","Collapse","in","Divider","FormControlLabel","control","CardNegotiation","me","myInfo","theme","useTheme","useMediaQuery","breakpoints","up","showCloseNeg","setShowCloseNeg","isReviewed","findIndex","createdBy","Link","RouterLink","to","textDecoration","ad","__typename","wineName","align","firstName","forUserAd","dateCreated","Grid","Negotiations","useNegotiationsLazyQuery","console","log","lazyNegotiations","result","negotiations","setNegotiations","offset","limit","orderBy","data","pageCount","negotiationsData","n","catch","e","Backdrop","data-testid","backdrop","Container","maxWidth","CssBaseline","refetch"],"mappings":"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","file":"static/js/7.1cb5ad86.chunk.js","sourcesContent":["import Button from '@material-ui/core/Button';\nimport * as React from 'react';\n// import { searchedWine } from '../cache';\nimport { navigate } from '@reach/router';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\n// import { TypeAd } from '../generated/graphql';\n\nexport const BackButton: React.FC = () => {\n  // // const searchedWineCache = searchedWine();\n  // // const { pathname } = useLocation();\n  // // if (searchedWineCache?.typeAd === TypeAd.Buy && pathname !== '/buy') {\n  // //   return (\n  // //     <Button\n  // //       component={Link}\n  // //       to='/buy'\n  // //       //variant='contained'\n  // //       color='primary'\n  // //       size='large'\n  // //       startIcon={<ArrowBackIosIcon />}\n  // //     >\n  // //       Compra\n  // //     </Button>\n  // //   );\n  // // } else if (\n  // //   searchedWineCache?.typeAd === TypeAd.Sell &&\n  // //   pathname !== '/sell'\n  // // ) {\n  //   return (\n  //     <Button\n  //       component={Link}\n  //       to='/sell'\n  //       //variant='contained'\n  //       color='primary'\n  //       size='large'\n  //       startIcon={<ArrowBackIosIcon />}\n  //     >\n  //       Vendi\n  //     </Button>\n  //   );\n  // } else\n  return (\n    <Button\n      aria-label='previous-page'\n      color='primary'\n      size='large'\n      startIcon={<ArrowBackIosIcon />}\n      onClick={() => navigate(-1)}\n    >\n      Torna indietro\n    </Button>\n  );\n};\n","import * as React from 'react';\nimport Box from '@material-ui/core/Box';\nimport { TypeAd } from '../generated/graphql';\n\ninterface BoxProps {\n  width: number;\n  typeAd: TypeAd;\n  children: React.ReactNode;\n  notActive?: boolean;\n}\n\nexport const StyledBox: React.FC<BoxProps> = (props) => {\n  const sellColor = props.notActive ? '#b2b2b2' : 'white';\n  const buyColor = props.notActive ? '#8a425a' : 'primary.main';\n\n  return (\n    <Box\n      boxShadow={3}\n      p={2}\n      m={2}\n      mt={2}\n      px={2}\n      pt={2}\n      width={props.width}\n      color={props.typeAd === TypeAd.Sell ? 'primary.main' : 'white'}\n      borderColor={props.typeAd === TypeAd.Sell ? 'white' : 'primary.main'}\n      bgcolor={props.typeAd === TypeAd.Sell ? sellColor : buyColor}\n      borderRadius={16}\n    >\n      {props.children}\n    </Box>\n  );\n};\n","import { useLocation } from '@reach/router';\nimport * as React from 'react';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useIntersect } from '../utils/useIntersectionHook';\nimport { makeStyles, createStyles } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\ninterface InfiniteScrollProps {\n  children: React.ReactNode;\n  fetchMore: () => void;\n  isVisible: boolean;\n  isLoading: boolean;\n  setIsLoading?: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n  })\n);\n\nexport const InfiniteScroll: React.FC<InfiniteScrollProps> = (props) => {\n  const classes = useStyles();\n  const { pathname } = useLocation();\n  const message = pathname.split('/')[1] === 'messaggi';\n  const [ref, entry] = useIntersect({ threshold: 0 });\n  const [isOk, setIsOk] = React.useState<boolean>(true);\n  React.useEffect(() => {\n    if (entry && entry?.intersectionRatio >= 0.5 && isOk) {\n      void props.fetchMore();\n      props.setIsLoading && props.setIsLoading(true);\n      setIsOk(false);\n    } else if (entry?.intersectionRatio === 0 && !isOk) {\n      setIsOk(true);\n      props.setIsLoading && props.setIsLoading(false);\n    }\n  }, [entry?.intersectionRatio]);\n  if (message) {\n    return (\n      <>\n        {props.isVisible ? (\n          <div className={classes.root} id='page-bottom-boundary' ref={ref}>\n            {' '}\n            <ExpandMoreIcon />\n          </div>\n        ) : null}\n        {props.children}\n      </>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      {props.children}\n      {props.isVisible ? (\n        props.isLoading ? (\n          <CircularProgress />\n        ) : (\n          <div id='page-bottom-boundary' ref={ref} style={{ height: 30 }}>\n            {' '}\n            <ExpandMoreIcon />\n          </div>\n        )\n      ) : null}\n    </div>\n  );\n};\n","import * as React from 'react';\n\nexport const useIntersect = ({\n  root = null,\n  rootMargin = '0px',\n  threshold = 0,\n}): [\n  React.Dispatch<React.SetStateAction<HTMLDivElement | null>>,\n  IntersectionObserverEntry | null\n] => {\n  const [entry, setEntry] = React.useState<IntersectionObserverEntry | null>(\n    null\n  );\n  const [node, setNode] = React.useState<HTMLDivElement | null>(null);\n\n  const observer = React.useRef<IntersectionObserver | null>(null);\n  React.useEffect(() => {\n    if (observer.current) {\n      observer.current.disconnect();\n    }\n    observer.current = new window.IntersectionObserver(\n      ([entry]) => setEntry(entry),\n      { root, rootMargin, threshold }\n    );\n\n    const { current: currentObserver } = observer;\n\n    if (node) {\n      currentObserver.observe(node);\n    }\n    return () => currentObserver.disconnect();\n  }, [node, root, rootMargin, threshold]);\n  return [setNode, entry];\n};\n","/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport * as React from 'react';\nimport Select from '@material-ui/core/Select';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { QueryOrderBy } from '../../generated/graphql';\n\ninterface OrderProps {\n  setOrder: React.Dispatch<React.SetStateAction<QueryOrderBy>>;\n  order: QueryOrderBy;\n  isAds?: boolean;\n}\n\nexport const Order: React.FC<OrderProps> = (props) => {\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    props.setOrder(event.target.value as QueryOrderBy);\n  };\n  return (\n    <FormControl fullWidth>\n      <InputLabel style={{ color: 'black' }} htmlFor='order'>\n        Ordine risultati\n      </InputLabel>\n      <Select\n        native\n        value={props.order}\n        onChange={handleChange}\n        inputProps={{\n          name: 'order',\n          id: 'order',\n        }}\n      >\n        <option aria-label='None' value='' />\n        <option value={QueryOrderBy.CreatedAtDesc}>Dal piu recente</option>\n        <option value={QueryOrderBy.CreatedAtAsc}>Dal meno recente</option>\n        {props.isAds ? (\n          <>\n            <option value={QueryOrderBy.PriceDesc}>Dal piu caro</option>\n            <option value={QueryOrderBy.PriceAsc}>Dal meno caro</option>\n          </>\n        ) : null}\n      </Select>\n    </FormControl>\n  );\n};\n","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { notification } from '../cache';\nimport { useUpdateNegotiationMutation } from '../generated/graphql';\nimport { useStyles } from '../utils/styleHook';\n\nexport const CloseNegotiationButton: React.FC<{\n  id: string;\n  isBuy?: boolean;\n}> = ({ id, isBuy }) => {\n  const classes = useStyles();\n  const [closeNegotiation, { loading }] = useUpdateNegotiationMutation({\n    onCompleted: (closedNegotiation) => {\n      if (closedNegotiation.updateNegotiation?.errors?.length) {\n        const errorMessages = closedNegotiation.updateNegotiation?.errors.map(\n          (error) => error?.text\n        );\n        notification({\n          type: 'error',\n          message: `${errorMessages.toString()}`,\n        });\n      } else {\n        notification({\n          message: 'trattativa chiusa con successo',\n          type: 'success',\n        });\n      }\n    },\n\n    onError: (error) => notification({ type: 'error', message: error.message }),\n  });\n\n  const handleCloseNegotiation = async () => {\n    await closeNegotiation({\n      variables: { negotiation: { _id: id, isConcluded: true } },\n    });\n  };\n\n  return (\n    <Button\n      aria-label='close-negotiation'\n      className={isBuy ? classes.buyButton : classes.sellButton}\n      disabled={loading}\n      onClick={handleCloseNegotiation}\n    >\n      Dichiara chiusa la trattativa\n    </Button>\n  );\n};\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    margin: 0,\n    padding: '16px 24px',\n    flex: '0 0 auto'\n  }\n};\nvar DialogTitle = /*#__PURE__*/React.forwardRef(function DialogTitle(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"disableTypography\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), disableTypography ? children : /*#__PURE__*/React.createElement(Typography, {\n    component: \"h2\",\n    variant: \"h6\"\n  }, children));\n});\nprocess.env.NODE_ENV !== \"production\" ? DialogTitle.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the children won't be wrapped by a typography component.\n   * For instance, this can be useful to render an h4 instead of the default h2.\n   */\n  disableTypography: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogTitle'\n})(DialogTitle);","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { notification } from '../cache';\nimport { useCreateReviewMutation, ReviewInput } from '../generated/graphql';\n\nexport const CreateReview: React.FC<{\n  review: ReviewInput;\n  disabled: boolean;\n  closeModal?: () => void;\n}> = ({ review, disabled, closeModal }) => {\n  const [createReview, { loading }] = useCreateReviewMutation({\n    onCompleted: (createdReview) => {\n      if (createdReview.createReview?.errors?.length) {\n        const errorMessages = createdReview.createReview?.errors.map(\n          (error) => error?.text\n        );\n        notification({\n          type: 'error',\n          message: `${errorMessages.toString()}`,\n        });\n      } else {\n        notification({\n          type: 'success',\n          message: 'Recensione creata con successo',\n        });\n      }\n    },\n\n    onError: (error) => notification({ type: 'error', message: error.message }),\n  });\n\n  const handleCreateReview = () => {\n    closeModal && closeModal();\n    void createReview({\n      variables: {\n        review,\n      },\n    });\n  };\n\n  return (\n    <Button\n      disabled={disabled || loading}\n      aria-label='review'\n      onClick={handleCreateReview}\n      color='primary'\n    >\n      Recensisci\n    </Button>\n  );\n};\n","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { TypeAd } from '../../generated/graphql';\nimport {\n  StyledRating,\n  useStyles as useStylesHook,\n  useStylesForms,\n  useStyleRating,\n} from '../../utils/styleHook';\nimport Box from '@material-ui/core/Box';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { CreateReview } from '../../containers/CreateReview';\nconst labels: { [index: string]: string } = {\n  0.5: 'Useless',\n  1: 'Useless+',\n  1.5: 'Poor',\n  2: 'Poor+',\n  2.5: 'Ok',\n  3: 'Ok+',\n  3.5: 'Good',\n  4: 'Good+',\n  4.5: 'Excellent',\n  5: 'Excellent+',\n};\n\nexport const CreateReviewModal: React.FC<{\n  idNegotiation: string;\n  idUser: string;\n  type: TypeAd;\n}> = ({ idUser, idNegotiation, type }) => {\n  const [open, setOpen] = React.useState<boolean>(false);\n  const [value, setValue] = React.useState<number | null>(2);\n  const [hover, setHover] = React.useState<number>(-1);\n  const [review, setReview] = React.useState<string>('');\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setReview(event.target.value);\n  };\n  const classes = useStylesHook();\n  const classesTextField = useStylesForms();\n  const classesStars = useStyleRating();\n  const handleModal = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <Button\n        aria-label='review'\n        className={type === TypeAd.Buy ? classes.buyButton : classes.sellButton}\n        onClick={handleModal}\n      >\n        Lascia una recensione\n      </Button>\n      <div style={{ display: 'none' }}>\n        <Dialog\n          open={open}\n          onClose={handleClose}\n          aria-labelledby='form-dialog-title'\n        >\n          <DialogTitle id='form-dialog-title'>\n            Recensisci la trattativa\n          </DialogTitle>\n\n          <DialogContent>\n            <div className={classesStars.root}>\n              <StyledRating\n                name='hover-feedback'\n                value={value}\n                precision={0.5}\n                onChange={(event, newValue) => {\n                  setValue(newValue);\n                }}\n                onChangeActive={(event, newHover) => {\n                  setHover(newHover);\n                }}\n              />\n              {value !== null && (\n                <Box ml={2}>{labels[hover !== -1 ? hover : value]}</Box>\n              )}\n            </div>\n            <TextField\n              color='primary'\n              multiline\n              rows={4}\n              value={review}\n              error={review.length > 0 && review.length <= 5}\n              helperText='Lunghezza minima 5 caratteri'\n              onChange={handleChange}\n              InputLabelProps={{\n                style: { color: '#6d1331' },\n              }}\n              InputProps={{\n                className: classesTextField.inputSell,\n                classes: {\n                  underline: classesTextField.underlineSell,\n                },\n              }}\n              id='outlined-multiline-flexible'\n              label='Recensione'\n              placeholder='Ottima persona con cui....'\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button\n              aria-label='close-modal'\n              onClick={handleClose}\n              color='primary'\n            >\n              Cancel\n            </Button>\n            <CreateReview\n              disabled={review.length <= 5}\n              review={{\n                forUser: idUser,\n                rating: value as number,\n                negotiation: idNegotiation,\n                content: review,\n                type: type,\n              }}\n              closeModal={handleClose}\n            />\n          </DialogActions>\n        </Dialog>\n      </div>\n    </>\n  );\n};\n","import * as React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Collapse from '@material-ui/core/Collapse';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport Divider from '@material-ui/core/Divider';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox, { CheckboxProps } from '@material-ui/core/Checkbox';\nimport { withStyles } from '@material-ui/core/styles';\nimport { deepPurple } from '@material-ui/core/colors';\nimport { searchedWine } from '../../cache';\nimport { IFilters, multiFilter } from '../../utils/multiFilter';\n\nexport const PurpleCheckbox = withStyles({\n  root: {\n    color: deepPurple[400],\n    '&$checked': {\n      color: deepPurple[600],\n    },\n  },\n  checked: {},\n})((props: CheckboxProps) => <Checkbox color='default' {...props} />);\n\ninterface FilterProps {\n  list: Array<any>;\n  filteredList?: Array<any>;\n  setFilteredList: React.Dispatch<\n    React.SetStateAction<Array<any> | undefined | null>\n  >;\n  children?: React.ReactNode;\n}\n\nexport const Filter: React.FC<FilterProps> = (props) => {\n  const searchedWineCache = searchedWine();\n  const [isShowAll, setIsShowAll] = React.useState<boolean>(false);\n  const [showFilter, setShowFilter] = React.useState<boolean>(false);\n  const [filterAds, setFilterAds] = React.useState<IFilters>({\n    priceTo: (priceTo: number) =>\n      priceTo <= (searchedWineCache?.price as number),\n    abv: (abv: number) =>\n      abv >= (searchedWineCache?.abv as number) - 0.5 ||\n      abv <= (searchedWineCache?.abv as number) + 0.5,\n    harvest: (harvest: number) =>\n      harvest === (searchedWineCache?.harvest as number) ||\n      harvest - 1 === (searchedWineCache?.harvest as number),\n    litersTo: (litersTo: number) =>\n      litersTo >= (searchedWineCache?.liters as number),\n  });\n  React.useEffect(() => {\n    if (props.list.length > 0) {\n      const filtredAds = multiFilter(props.list, filterAds);\n      props.setFilteredList(filtredAds);\n    }\n  }, [filterAds, props.list]);\n  const handleShowAll = () => {\n    if (!isShowAll) {\n      setFilterAds({\n        priceTo: () => true,\n        harvest: () => true,\n        abv: () => true,\n        litersTo: () => true,\n      });\n    } else {\n      setFilterAds({\n        priceTo: (priceTo: number) =>\n          priceTo <= (searchedWineCache?.price as number),\n        abv: (abv: number) =>\n          abv >= (searchedWineCache?.abv as number) - 0.5 ||\n          abv <= (searchedWineCache?.abv as number) + 0.5,\n        harvest: (harvest: number) =>\n          harvest === (searchedWineCache?.harvest as number) ||\n          harvest - 1 === (searchedWineCache?.harvest as number),\n        litersTo: (litersTo: number) =>\n          litersTo >= (searchedWineCache?.liters as number),\n      });\n    }\n    setIsShowAll(!isShowAll);\n  };\n  return (\n    <>\n      <Button\n        onClick={() => setShowFilter(!showFilter)}\n        aria-label='filter'\n        color='primary'\n        size='large'\n        startIcon={<FilterListIcon />}\n      >\n        Filtri\n      </Button>\n      <Collapse in={showFilter}>\n        {props.children}\n        <Divider />\n        <FormControlLabel\n          control={\n            <PurpleCheckbox\n              checked={isShowAll}\n              onChange={handleShowAll}\n              name='showAll'\n            />\n          }\n          label='Mostra tutti gli annunci per questo vino'\n        />\n      </Collapse>\n    </>\n  );\n};\n","export interface IFilters {\n  [key: string]: (value: any) => boolean;\n}\n\ninterface IArray {\n  [key: string]: any;\n}\n\n// function taken from https://gist.github.com/jherax/f11d669ba286f21b7a2dcff69621eb72\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function multiFilter(\n  array: Array<IArray>,\n  filters: IFilters\n): Array<IArray> {\n  const filterKeys = Object.keys(filters);\n  return array.filter((item) => {\n    // validates all filter criteria\n    return filterKeys.every((key) => {\n      // ignores non-function predicates\n      if (typeof filters[key] !== 'function') return true;\n      return filters[key](item[key]);\n    });\n  });\n}\n","import * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport { Link as RouterLink } from '@reach/router';\nimport { NegotiationDetailsFragment } from '../../generated/graphql';\nimport { TypeAd } from '../../generated/graphql';\nimport Button from '@material-ui/core/Button';\nimport { useTheme, useMediaQuery } from '@material-ui/core';\nimport { StyledBox } from '../../containers/StyledBox';\nimport { CloseNegotiationButton } from '../../containers/CloseNegotiationButton';\nimport { useStyles } from '../../utils/styleHook';\nimport { Grid } from '@material-ui/core';\nimport { CreateReviewModal } from '../ReviewModal';\nimport { myInfo } from '../../cache';\n\nexport const CardNegotiation: React.FC<{\n  negotiation: NegotiationDetailsFragment;\n}> = ({ negotiation }) => {\n  const me = myInfo();\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n  const width = matches ? 400 : 250;\n  const [showCloseNeg, setShowCloseNeg] = React.useState<boolean>(true);\n  const isBuy = negotiation.type === TypeAd.Buy ? true : false;\n  const handleClick = () => {\n    setShowCloseNeg(false);\n  };\n  const isReviewed =\n    negotiation.review?.findIndex(\n      (review) => review?.createdBy._id === me?._id\n    ) !== -1;\n  return (\n    <StyledBox width={width} typeAd={negotiation.type}>\n      <Link\n        component={RouterLink}\n        to={`/trattative/${negotiation._id}`}\n        style={{ textDecoration: 'none' }}\n      >\n        <Typography\n          component='h5'\n          variant='h6'\n          color={isBuy ? 'textSecondary' : 'primary'}\n        >\n          {isBuy ? 'Compro' : 'Vendo'}{' '}\n          {negotiation.ad.__typename === 'AdWine' && negotiation.ad.wineName}{' '}\n          {/* {ad.wine.denominazioneZona} */}\n        </Typography>\n        <Typography\n          align='left'\n          variant='body1'\n          color={isBuy ? 'textSecondary' : 'primary'}\n        >\n          Aperta da: cantina {negotiation.createdBy.firstName}\n          <br />\n          Per cantina: {negotiation.forUserAd.firstName}\n          <br />\n          {negotiation.isConcluded ? 'Trattativa conclusa' : null}\n        </Typography>\n        <br />\n        <Typography\n          align='right'\n          variant='caption'\n          color={isBuy ? 'textSecondary' : 'primary'}\n        >\n          Trattativa aperta il {negotiation.dateCreated}\n        </Typography>\n      </Link>\n      <Grid>\n        {negotiation.isConcluded || !showCloseNeg ? (\n          !isReviewed ? (\n            <CreateReviewModal\n              idNegotiation={negotiation._id}\n              type={negotiation.type}\n              idUser={\n                negotiation.createdBy._id === me?._id\n                  ? negotiation.forUserAd._id\n                  : negotiation.createdBy._id\n              }\n            />\n          ) : null\n        ) : (\n          <div onClick={handleClick}>\n            {' '}\n            <CloseNegotiationButton isBuy={isBuy} id={negotiation._id} />\n          </div>\n        )}\n      </Grid>\n\n      <Button\n        className={isBuy ? classes.buyButton : classes.sellButton}\n        color='primary'\n        component={RouterLink}\n        to={`/messaggi/${negotiation._id}`}\n      >\n        Apri la chat\n      </Button>\n    </StyledBox>\n  );\n};\n","import * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Container from '@material-ui/core/Container';\nimport { RouteComponentProps } from '@reach/router';\nimport {\n  NegotiationDetailsFragment,\n  NegotiationsQuery,\n  QueryOrderBy,\n  useNegotiationsLazyQuery,\n} from '../generated/graphql';\nimport { CardNegotiation } from '../components/Cards/CardNegotiation';\nimport { BackButton } from '../components/BackButton';\nimport { Order } from '../components/FilterAds/Order';\nimport { InfiniteScroll } from '../containers/InfiniteScrollFetch';\nimport { DeepExtractType } from 'ts-deep-extract-types';\nimport { notification } from '../cache';\nimport { PurpleCheckbox } from '../components/FilterAds';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Divider from '@material-ui/core/Divider';\nimport { Backdrop, CircularProgress } from '@material-ui/core';\nimport { useStyles } from '../utils/styleHook';\n\nconst Negotiations: React.FC<RouteComponentProps> = () => {\n  const [lazyNegotiations, result] = useNegotiationsLazyQuery({\n    onError: (error) => console.log(error),\n  });\n  const [negotiations, setNegotiations] = React.useState<\n    DeepExtractType<NegotiationsQuery, ['negotiations']>['negotiations']\n  >([]);\n  const [order, setOrder] = React.useState<QueryOrderBy>(\n    QueryOrderBy.CreatedAtDesc\n  );\n  const [isShowAll, setIsShowAll] = React.useState<boolean>(false);\n  const classes = useStyles();\n  const handleShowAll = () => {\n    if (isShowAll && result.refetch) {\n      void result.refetch({\n        offset: 0,\n        limit: 4,\n        orderBy: order,\n        isConcluded: false,\n      });\n      setIsShowAll(false);\n    }\n    if (result.fetchMore && !isShowAll) {\n      try {\n        void result.fetchMore({\n          variables: { limit: negotiations?.length, isConcluded: true },\n        });\n        setIsShowAll(true);\n      } catch (e) {\n        notification({\n          type: 'error',\n          message: 'Errore durante il caricamento delle trattative',\n        });\n      }\n    }\n  };\n\n  React.useEffect(() => {\n    void lazyNegotiations({\n      variables: {\n        offset: 0,\n        limit: 4,\n        orderBy: order,\n        isConcluded: false,\n      },\n    });\n  }, []);\n  const isVisible =\n    negotiations?.length !== result.data?.negotiations?.pageCount;\n  React.useEffect(() => {\n    if (result.data?.negotiations?.negotiations?.length) {\n      const negotiationsData = result.data?.negotiations.negotiations;\n      if (!isShowAll) {\n        setNegotiations(negotiationsData?.filter((n) => !n?.isConcluded));\n      } else {\n        setNegotiations(negotiationsData);\n      }\n    }\n  }, [result.data]);\n  React.useEffect(() => {\n    if (result.fetchMore) {\n      result\n        .fetchMore({\n          variables: {\n            orderBy: order,\n            limit: negotiations?.length,\n            isConcluded: isShowAll,\n          },\n        })\n        .catch((e) => console.log(e));\n    }\n  }, [order]);\n  if (result.loading) {\n    return (\n      <>\n        <Backdrop\n          data-testid='loading'\n          className={classes.backdrop}\n          open={result.loading}\n        >\n          <CircularProgress color='inherit' />\n        </Backdrop>\n      </>\n    );\n  }\n  if (negotiations?.length === 0) {\n    return <div>Non hai ancora aperto trattative</div>;\n  }\n  if (\n    negotiations?.length &&\n    result.data?.negotiations?.negotiations?.length !== 0\n  ) {\n    const handleFetchMore = () => {\n      if (result.fetchMore) {\n        try {\n          void result.fetchMore({\n            variables: {\n              offset: result.data?.negotiations?.negotiations?.length,\n              orderBy: order,\n              isConcluded: isShowAll,\n            },\n          });\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    };\n\n    return (\n      <Container component='main' maxWidth='xs'>\n        <CssBaseline />\n        <BackButton />\n\n        <br />\n        <Typography color='primary' component='h3' variant='h5'>\n          Le tue trattative attive\n        </Typography>\n        <br />\n        <Order setOrder={setOrder} order={order} />\n        <Divider />\n        <FormControlLabel\n          control={\n            <PurpleCheckbox\n              checked={isShowAll}\n              onChange={handleShowAll}\n              name='showAll'\n            />\n          }\n          label='Mostra anche le trattative chiuse'\n        />\n        <InfiniteScroll\n          fetchMore={handleFetchMore}\n          isVisible={isVisible}\n          isLoading={result.loading}\n        >\n          {negotiations.map((negotiation) => (\n            <CardNegotiation\n              key={negotiation?._id}\n              negotiation={negotiation as NegotiationDetailsFragment}\n            />\n          ))}\n        </InfiniteScroll>\n      </Container>\n    );\n  }\n  if (result.data?.negotiations?.negotiations?.length === 0) {\n    return <div>Non ci sono negoziazioni attive</div>;\n  }\n  return <div>Grave errore</div>;\n};\n\nexport default Negotiations;\n"],"sourceRoot":""}