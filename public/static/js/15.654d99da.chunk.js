(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[15],{453:function(e,n,i){"use strict";i.d(n,"a",(function(){return d}));var o=i(4),r=i(439),t=(i(0),i(41)),l=i(454),a=i.n(l),d=function(){return Object(o.jsx)(r.a,{"aria-label":"previous-page",color:"primary",size:"large",startIcon:Object(o.jsx)(a.a,{}),onClick:function(){return Object(t.c)(-1)},children:"Torna indietro"})}},454:function(e,n,i){"use strict";var o=i(46),r=i(47);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=r(i(0)),l=(0,o(i(48)).default)(t.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");n.default=l},506:function(e,n,i){"use strict";i.r(n);var o=i(4),r=i(26),t=(i(0),i(41)),l=i(70),a=i(114),d=i(28),s=i(381),u=i(383),c=function(e){var n=Object(l.d)({name:e.name,type:e.type}),i=Object(r.a)(n,2),t=i[0],a=i[1],c=a.error,p=a.touched;return Object(o.jsx)(s.a,Object(d.a)(Object(d.a)({},t),{},{fullWidth:!0,type:e.type,inputProps:{"aria-label":e.name,min:e.min,max:e.max,step:e.step},InputLabelProps:{style:{color:e.labelTextColor}},className:e.class,InputProps:{endAdornment:Object(o.jsx)(u.a,{position:"end",children:e.adornment}),className:e.inputTextColor,classes:{underline:e.underlineColor}},error:void 0!==c&&p,"data-testid":e.name,placeholder:e.placeholder,label:e.label,helperText:c}))},p=i(157),m=i(507),b=i(131),j=Object(b.a)({option:{color:"#000"},groupLabel:{color:"#707070"}}),v=function(e){var n=e.items,i=e.label,t=e.name,a=e.setFieldValue,u=e.defaultWine,c=e.labelTextColor,p=e.underlineColor,b=Object(l.d)({name:t}),v=Object(r.a)(b,2),x=(v[0],v[1]),f=x.error,O=x.touched,y=j(),h=n.map((function(e){return{regione:e.regione[0],denominazioneVino:e.denominazioneVino}}));return Object(o.jsx)(m.a,{"data-testid":"combobox-wines",options:h.sort((function(e,n){return-n.regione.localeCompare(e.regione)})),groupBy:function(e){return e.regione},getOptionSelected:function(e,n){return e.denominazioneVino===n.denominazioneVino},defaultValue:u?{regione:"",denominazioneVino:u}:null,classes:{option:y.option,groupLabel:y.groupLabel,inputRoot:p},getOptionLabel:function(e){return e.denominazioneVino},fullWidth:!0,onChange:function(e,n){a(t,null===n||void 0===n?void 0:n.denominazioneVino)},renderInput:function(e){return Object(o.jsx)(l.a,Object(d.a)(Object(d.a)({component:s.a},e),{},{label:i,error:O&&void 0!==f,helperText:f,inputProps:Object(d.a)(Object(d.a)({},e.inputProps),{},{autoComplete:"new-password"}),InputLabelProps:{style:{color:c}}}))}})},x=i(439),f=i(90),O=i(15),y=i(132),h=i(154),g={wineName:"",harvest:2015,abv:13.5,price:1,liters:100},C=function(e){var n,i,r=e.onSubmit,t=e.adType,d=e.wines,s=Object(y.d)(),u=(null===(n=d.data)||void 0===n?void 0:n.wines)?null===(i=d.data)||void 0===i?void 0:i.wines.map((function(e){return{denominazioneVino:e.denominazioneVino,regione:e.regione}})):null,m=(new Date).getFullYear();return d.loading?Object(o.jsx)(h.a,{}):d.error?Object(o.jsxs)("div",{children:["Error...",d.error.message]}):Object(o.jsx)(l.c,{initialValues:g,validationSchema:a.c({wineName:a.e().required("Required"),harvest:a.b().positive("L'anno deve essere positivo").moreThan(1900,"L'anno deve essere maggiore di 1900").lessThan(m,"L'anno non pu\xf2 essere maggiore di ".concat(m)).required("Required"),abv:a.b().positive("La gradazione alcolica deve essere positiva").lessThan(22,"La gradazione alcolica non pu\xf2 essere maggiore di 22").required("Required"),price:a.b().positive("Il prezzo al litro deve essere positivo").lessThan(100,"Questo prezzo \xe8 al litro").required("Required"),liters:a.b().positive("La quantit\xe0 deve essere positiva").required("Required")}),onSubmit:r,children:function(e){var n=e.isValid,i=e.dirty,r=e.setFieldValue;return Object(o.jsxs)(l.b,{className:t===O.k.Buy?s.form:s.formSell,children:[Object(o.jsx)(f.a,{component:"h3",variant:"h5",color:t===O.k.Buy?"textSecondary":"primary",children:"Dati prodotto"}),Object(o.jsx)("br",{}),Object(o.jsx)(v,{name:"wineName",label:"Vino",items:u,setFieldValue:r,labelTextColor:t===O.k.Buy?"#fff":"#6d1331",underlineColor:t===O.k.Buy?s.underline:s.underlineSell}),Object(o.jsx)(p.a,{name:"harvest",type:"number",label:"Vendemmia",min:"1900",max:"".concat(m),step:"1",underlineColor:t===O.k.Buy?s.underline:s.underlineSell,placeholder:"Vendemmia anno",labelTextColor:t===O.k.Buy?"#fff":"#6d1331",inputTextColor:t===O.k.Buy?s.input:s.inputSell}),Object(o.jsx)(c,{name:"abv",type:"number",label:"Gradazione alcolica",min:"0",max:"22",step:"0.5",placeholder:"Esempio 13.5 vol",adornment:"%",underlineColor:t===O.k.Buy?s.underline:s.underlineSell,labelTextColor:t===O.k.Buy?"#fff":"#6d1331",inputTextColor:t===O.k.Buy?s.input:s.inputSell}),Object(o.jsx)(c,{name:"price",type:"number",label:"Prezzo massimo al litro",min:"0",max:"100",step:"0.1",placeholder:"Esempio 3.5 euro",adornment:"\u20ac",underlineColor:t===O.k.Buy?s.underline:s.underlineSell,labelTextColor:t===O.k.Buy?"#fff":"#6d1331",inputTextColor:t===O.k.Buy?s.input:s.inputSell}),Object(o.jsx)(c,{name:"liters",type:"number",label:"Litri richiesti",min:"0",max:"999999",step:"1",placeholder:"Esempio 1000 litri",adornment:"l",underlineColor:t===O.k.Buy?s.underline:s.underlineSell,labelTextColor:t===O.k.Buy?"#fff":"#6d1331",inputTextColor:t===O.k.Buy?s.input:s.inputSell}),Object(o.jsx)(x.a,{className:t===O.k.Buy?s.submit:s.submitSell,type:"submit",disabled:!i||!n,children:"Submit"})]})}})},k=i(23),B=i(234),S=i(231),T=i(230),z=i(386),w=function(e){var n=Object(l.d)({name:e.name}),i=Object(r.a)(n,2),t=i[0],a=i[1],s=a.error,u=a.touched;return Object(o.jsxs)(T.a,{fullWidth:!0,error:void 0!==s&&u,children:[Object(o.jsx)(B.a,{style:{color:e.labelColor},htmlFor:"select-label-".concat(e.name),children:e.label}),Object(o.jsx)(z.a,Object(d.a)(Object(d.a)({native:!0,className:e.underlineColor,classes:{root:e.underlineColor,icon:e.textColor},inputProps:{id:"select-label-".concat(e.name),name:t.name}},t),{},{children:e.options.map((function(e){return Object(o.jsx)("option",{value:e,children:e},e)}))})),Object(o.jsx)(S.a,{children:s})]})},V=i(474),q=i(440),L=i(477),F=i(475),N=i(476),P=i(472),A=function(e){var n=e.setFieldValue;return!0===Object(l.e)().values.isSameAddress?null:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(q.a,{item:!0,xs:12,children:Object(o.jsx)(F.a,{setFieldValue:n,name:"address.regione",label:"Regione",items:P.a})}),Object(o.jsx)(q.a,{item:!0,xs:12,children:Object(o.jsx)(N.a,{setFieldValue:n,name:"address.provincia",label:"Provincia"})}),Object(o.jsx)(q.a,{item:!0,xs:12,children:Object(o.jsx)(L.a,{setFieldValue:n,name:"address.comune",label:"Comune"})})]})},R={comune:"",provincia:"",regione:""},E=function(e){var n,i,r=e.onSubmit,t=e.adType,d=e.wines,s=(null===(n=d.data)||void 0===n?void 0:n.wines)?null===(i=d.data)||void 0===i?void 0:i.wines.map((function(e){return{denominazioneVino:e.denominazioneVino,regione:e.regione}})):null,u=Object(y.d)(),m=(new Date).getFullYear(),b=Object(k.e)(),j={wineName:null===b||void 0===b?void 0:b.wineName,harvest:null===b||void 0===b?void 0:b.harvest,abv:null===b||void 0===b?void 0:b.abv,price:null===b||void 0===b?void 0:b.price,liters:null===b||void 0===b?void 0:b.liters,sottoZona:"",menzione:"",metodoProduttivo:"",content:"",needsFollowUp:!1,isSameAddress:!1,address:R};return d.loading?Object(o.jsx)(h.a,{}):d.error?Object(o.jsxs)("div",{children:["Error...",d.error.message]}):Object(o.jsx)(l.c,{initialValues:j,validationSchema:a.c({wineName:a.e().required("Required"),harvest:a.b().positive("L'anno deve essere positivo").moreThan(1900,"L'anno deve essere maggiore di 1900").lessThan(m,"L'anno non pu\xf2 essere maggiore di ".concat(m)).required("Required"),abv:a.b().positive("La gradazione alcolica deve essere positiva").lessThan(22,"La gradazione alcolica non pu\xf2 essere maggiore di 22").required("Required"),price:a.b().positive("Il prezzo al litro deve essere positivo").lessThan(100,"Questo prezzo \xe8 al litro").required("Required"),liters:a.b().positive("La quantit\xe0 deve essere positiva").required("Required"),sottoZona:a.e(),menzione:a.e(),metodoProduttivo:a.e(),content:a.e().required("Required"),needsFollowUp:a.a().required("Required"),isSameAddress:a.a().required("Required"),address:a.c().shape({comune:a.e(),provincia:a.e(),regione:a.e()})}),onSubmit:r,children:function(e){var n=e.isValid,i=e.dirty,r=e.setFieldValue;return Object(o.jsxs)(l.b,{className:t===O.k.Buy?u.form:u.formSell,children:[Object(o.jsx)(f.a,{component:"h3",variant:"h5",color:t===O.k.Buy?"textSecondary":"primary",children:"Dati prodotto"}),Object(o.jsx)(v,{name:"wineName",label:"Vino",defaultWine:j.wineName,items:s,setFieldValue:r,labelTextColor:t===O.k.Buy?"#fff":"#6d1331",underlineColor:t===O.k.Buy?u.underline:u.underlineSell}),Object(o.jsx)(p.a,{name:"harvest",type:"number",label:"Vendemmia",min:"1900",max:"".concat(m),step:"1",underlineColor:t===O.k.Buy?u.underline:u.underlineSell,placeholder:"Vendemmia anno",labelTextColor:t===O.k.Buy?"#fff":"#6d1331",inputTextColor:t===O.k.Buy?u.input:u.inputSell}),Object(o.jsx)(c,{name:"abv",type:"number",label:"Gradazione alcolica",min:"0",max:"22",step:"0.5",placeholder:"Esempio 13.5 vol",adornment:"%",underlineColor:t===O.k.Buy?u.underline:u.underlineSell,labelTextColor:t===O.k.Buy?"#fff":"#6d1331",inputTextColor:t===O.k.Buy?u.input:u.inputSell}),Object(o.jsx)(c,{name:"price",type:"number",label:"Prezzo richiesto al litro",min:"0",max:"100",step:"0.1",placeholder:"Esempio 3.5 euro",adornment:"\u20ac",underlineColor:t===O.k.Buy?u.underline:u.underlineSell,labelTextColor:t===O.k.Buy?"#fff":"#6d1331",inputTextColor:t===O.k.Buy?u.input:u.inputSell}),Object(o.jsx)(c,{name:"liters",type:"number",label:"Litri richiesti",min:"0",max:"999999",step:"1",placeholder:"Esempio 1000 litri",adornment:"l",underlineColor:t===O.k.Buy?u.underline:u.underlineSell,labelTextColor:t===O.k.Buy?"#fff":"#6d1331",inputTextColor:t===O.k.Buy?u.input:u.inputSell}),Object(o.jsx)(w,{name:"menzione",label:"Menzione del vino",options:Object.values(O.c),underlineColor:t===O.k.Buy?u.underline:u.underlineSell,labelColor:t===O.k.Buy?"#fff":"#6d1331",textColor:t===O.k.Buy?u.input:u.inputSell}),Object(o.jsx)(w,{name:"metodoProduttivo",label:"Metodo produttivo del vino",options:Object.values(O.f),underlineColor:t===O.k.Buy?u.underline:u.underlineSell,labelColor:t===O.k.Buy?"#fff":"#6d1331",textColor:t===O.k.Buy?u.input:u.inputSell}),Object(o.jsx)(p.a,{name:"sottoZona",type:"text",label:"Sotto zona del vino",placeholder:"Sotto zona del vino",underlineColor:t===O.k.Buy?u.underline:u.underlineSell,labelTextColor:t===O.k.Buy?"#fff":"#6d1331",inputTextColor:t===O.k.Buy?u.input:u.inputSell}),Object(o.jsx)(p.a,{name:"content",type:"text",multiline:!0,label:"Descrizione",placeholder:"Vino veramente buono",underlineColor:t===O.k.Buy?u.underline:u.underlineSell,labelTextColor:t===O.k.Buy?"#fff":"#6d1331",inputTextColor:t===O.k.Buy?u.input:u.inputSell}),Object(o.jsx)(V.a,{name:"needsFollowUp",label:"Aggiornami se nuovi annunci pertinenti",labelColor:t===O.k.Buy?"#fff":"#6d1331"}),Object(o.jsx)(V.a,{name:"isSameAddress",label:"Indirizzo uguale a quello usato in registrazione",labelColor:t===O.k.Buy?"#fff":"#6d1331"}),Object(o.jsx)(A,{setFieldValue:r}),Object(o.jsx)(x.a,{className:t===O.k.Buy?u.submit:u.submitSell,type:"submit",disabled:!i||!n,children:"Submit"})]})}})},I=i(438),W=i(437),D=i(97),M=i(453);n.default=function(){var e,n,i=Object(k.c)(),l=Object(y.c)(),a="/buy"===Object(t.d)().pathname?O.k.Buy:O.k.Sell,d=Object(O.M)(),s=Object(k.e)(),u=Object(O.q)({onError:function(e){return Object(k.d)({type:"error",message:"".concat(e.message)})},onCompleted:function(e){var n,i=e.createAd;if(null===i||void 0===i||null===(n=i.errors)||void 0===n?void 0:n.length){var o=i.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(k.d)({type:"error",message:"".concat(o.toString())})}else Object(k.d)({type:"success",message:"ad created"})},update:function(e,n){var i,o;Object(D.a)(e,null===(i=n.data)||void 0===i||null===(o=i.createAd)||void 0===o?void 0:o.response)}}),c=Object(r.a)(u,1)[0],p=a===O.k.Buy?"comprare":"vendere",m=a===O.k.Buy?"acquirente":"venditore";return Object(o.jsxs)(W.a,{component:"main",maxWidth:"xs",children:[Object(o.jsx)(I.a,{}),Object(o.jsx)(M.a,{}),Object(o.jsxs)("div",{className:l.paper,children:[Object(o.jsxs)(f.a,{component:"h1",variant:"h4",color:"primary",children:["Che cosa vuoi ",p,"?"]}),Object(o.jsxs)(f.a,{component:"p",color:"primary",children:["Inserisci i dati del prodotto che desideri ",p,", noi cercheremo per te il giusto ",m,"."]}),(null===s||void 0===s?void 0:s.isPost)?Object(o.jsx)(E,{wines:d,onSubmit:function(o){o.isSameAddress&&(null===i||void 0===i?void 0:i.address)?e={regione:i.address.regione,provincia:i.address.provincia,comune:i.address.comune}:n=o.address;var r={wineName:o.wineName,typeAd:null===s||void 0===s?void 0:s.typeAd,typeProduct:null===s||void 0===s?void 0:s.typeProduct,content:o.content,harvest:o.harvest,abv:o.abv,priceFrom:o.price,priceTo:o.price,litersFrom:o.liters,litersTo:o.liters,needsFollowUp:o.needsFollowUp,address:o.isSameAddress?e:n};c({variables:{input:r}}),Object(k.e)(void 0),Object(t.c)("/")},adType:a}):Object(o.jsx)(C,{wines:d,onSubmit:function(e){Object(k.e)({wineName:e.wineName,typeAd:a,typeProduct:O.l.AdWine,liters:e.liters,harvest:e.harvest,abv:e.abv,price:e.price,isPost:!1}),Object(t.c)("/annunci")},adType:a})]})]})}}}]);
//# sourceMappingURL=15.654d99da.chunk.js.map