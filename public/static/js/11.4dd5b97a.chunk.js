(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[11],{488:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(3),i=n(21),o=n(1),r=n(409),l=n(469),c=n(471),s=n(470),d=n(47),u=n.n(d),j=n(71),b=n(20),v=n(0),p=function(e){var t=e.id,n=e.handleClose,o=Object(v.O)({onCompleted:function(e){var t,n;if(null===(t=e.updateNegotiation)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var a,i=null===(a=e.updateNegotiation)||void 0===a?void 0:a.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(b.d)({type:"error",message:"".concat(i.toString())})}else Object(b.d)({message:"trattativa chiusa con successo",type:"success"})},onError:function(e){return Object(b.d)({type:"error",message:e.message})}}),l=Object(i.a)(o,2),c=l[0],s=l[1].loading,d=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,c({variables:{negotiation:{_id:t,isConcluded:!0}}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(r.a,{"aria-label":"close-negotiation",disabled:s,onClick:d,children:"Dichiara chiusa la trattativa"})},O=n(83),h=function(e){var t=e.id,n=e.handleClose,o=Object(v.v)({onCompleted:function(e){var t,n;if(null===(t=e.deleteNegotiation)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var a,i=null===(a=e.deleteNegotiation)||void 0===a?void 0:a.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(b.d)({type:"error",message:"".concat(i.toString())})}else Object(b.d)({message:"trattativa cancellata con successo",type:"info"})},onError:function(e){return Object(b.d)({type:"error",message:e.message})},update:function(e,t){var n,a=t.data;Object(O.g)(e,null===a||void 0===a||null===(n=a.deleteNegotiation)||void 0===n?void 0:n.response)}}),l=Object(i.a)(o,2),c=l[0],s=l[1].loading,d=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,c({variables:{id:t}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(r.a,{"aria-label":"cancel-negotiation",disabled:s,onClick:d,children:"Cancella la trattativa"})},g=n(82),m=function(e){var t=e.id,n=e.isBuy,d=e.isMessage,u=Object(g.c)(),j=o.useState(!1),b=Object(i.a)(j,2),v=b[0],O=b[1],m=function(){O(!1)};return n=!!d,Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(r.a,{fullWidth:!0,"aria-label":"close-negotiation-popup",className:n?u.buyButton:u.sellButton,onClick:function(){O(!0)},children:"Chiudi trattativa"}),Object(a.jsx)("div",{style:{display:"none"},children:Object(a.jsxs)(l.a,{open:v,onClose:m,"aria-labelledby":"close-negotiation",children:[Object(a.jsxs)(s.a,{children:[Object(a.jsx)(h,{id:t,handleClose:m}),Object(a.jsx)(p,{id:t,handleClose:m})]}),Object(a.jsx)(c.a,{children:Object(a.jsx)(r.a,{onClick:m,color:"primary",children:"Cancel"})})]})})]})}},489:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(3),i=n(21),o=n(409),r=n(1),l=n(0),c=n(82),s=n(479),d=n(469),u=n(470),j=n(471),b=n(142),v=n(495),p=n(20),O=function(e){var t=e.review,n=e.disabled,r=e.closeModal,c=Object(l.t)({onCompleted:function(e){var t,n;if(null===(t=e.createReview)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var a,i=null===(a=e.createReview)||void 0===a?void 0:a.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(p.d)({type:"error",message:"".concat(i.toString())})}else Object(p.d)({type:"success",message:"Recensione creata con successo"})},onError:function(e){return Object(p.d)({type:"error",message:e.message})}}),s=Object(i.a)(c,2),d=s[0],u=s[1].loading;return Object(a.jsx)(o.a,{disabled:n||u,"aria-label":"review",onClick:function(){r&&r(),d({variables:{review:t}})},color:"primary",children:"Recensisci"})},h={.5:"Useless",1:"Useless+",1.5:"Poor",2:"Poor+",2.5:"Ok",3:"Ok+",3.5:"Good",4:"Good+",4.5:"Excellent",5:"Excellent+"},g=function(e){var t=e.idUser,n=e.idNegotiation,p=e.type,g=e.isMessage,m=r.useState(!1),f=Object(i.a)(m,2),x=f[0],y=f[1],C=r.useState(2),w=Object(i.a)(C,2),N=w[0],k=w[1],S=r.useState(-1),B=Object(i.a)(S,2),E=B[0],R=B[1],U=r.useState(""),_=Object(i.a)(U,2),M=_[0],P=_[1],T=Object(c.c)(),W=Object(c.d)(),z=Object(c.b)(),A=function(){y(!1)};return p=g?l.k.Sell:p,Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(o.a,{fullWidth:!0,"aria-label":"review",className:p===l.k.Buy?T.buyButton:T.sellButton,onClick:function(){y(!0)},children:"Lascia una recensione"}),Object(a.jsx)("div",{style:{display:"none"},children:Object(a.jsxs)(d.a,{open:x,onClose:A,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(v.a,{id:"form-dialog-title",children:"Recensisci la trattativa"}),Object(a.jsxs)(u.a,{children:[Object(a.jsxs)("div",{className:z.root,children:[Object(a.jsx)(c.a,{name:"hover-feedback",value:N,precision:.5,onChange:function(e,t){k(t)},onChangeActive:function(e,t){R(t)}}),null!==N&&Object(a.jsx)(s.a,{ml:2,children:h[-1!==E?E:N]})]}),Object(a.jsx)(b.a,{color:"primary",multiline:!0,rows:4,value:M,error:M.length>0&&M.length<=5,helperText:"Lunghezza minima 5 caratteri",onChange:function(e){P(e.target.value)},InputLabelProps:{style:{color:"#6d1331"}},InputProps:{className:W.inputSell,classes:{underline:W.underlineSell}},id:"outlined-multiline-flexible",label:"Recensione",placeholder:"Ottima persona con cui...."})]}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(o.a,{"aria-label":"close-modal",onClick:A,color:"primary",children:"Cancel"}),Object(a.jsx)(O,{disabled:M.length<=5,review:{forUser:t,rating:N,negotiation:n,content:M,type:p},closeModal:A})]})]})})]})}},495:function(e,t,n){"use strict";var a=n(2),i=n(6),o=n(1),r=(n(11),n(7)),l=n(9),c=n(88),s=o.forwardRef((function(e,t){var n=e.children,l=e.classes,s=e.className,d=e.disableTypography,u=void 0!==d&&d,j=Object(i.a)(e,["children","classes","className","disableTypography"]);return o.createElement("div",Object(a.a)({className:Object(r.a)(l.root,s),ref:t},j),u?n:o.createElement(c.a,{component:"h2",variant:"h6"},n))}));t.a=Object(l.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(s)},532:function(e,t,n){"use strict";n.r(t);var a=n(3),i=(n(1),n(32)),o=n(0),r=n(466),l=n(467),c=n(172),s=n(409),d=n(88),u=n(82),j=n(112),b=n(489),v=n(488);t.default=function(){var e,t,n,p,O,h=Object(i.e)().id,g=Object(u.c)(),m=Object(o.H)({variables:{id:h}}),f=m.data,x=m.loading,y=m.error,C="AdWine"===(null===f||void 0===f||null===(e=f.negotiation)||void 0===e?void 0:e.ad.__typename)?null===f||void 0===f||null===(t=f.negotiation)||void 0===t?void 0:t.ad:null,w=function(){return(null===C||void 0===C?void 0:C.postedBy.hideContact)?null:Object(a.jsxs)("div",{"data-testid":"info-contact",children:["puoi contattare l utente al numero: ",null===C||void 0===C?void 0:C.postedBy.phoneNumber," o alla mail ",null===C||void 0===C?void 0:C.postedBy.email]})};return y?Object(a.jsx)("div",{children:y.message}):x?Object(a.jsx)(j.a,{}):Object(a.jsxs)(r.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(l.a,{}),Object(a.jsx)(c.a,{}),Object(a.jsxs)("div",{className:g.paper,children:[Object(a.jsx)(d.a,{color:"primary",component:"h3",variant:"h5",children:"Gestisci la trattativa"}),Object(a.jsx)(d.a,{color:"secondary",variant:"body1",children:"Puoi decidere se contattare l utente tramite il nostro portale o usando i suoi contatti"})]}),Object(a.jsx)(w,{}),Object(a.jsxs)(d.a,{color:"secondary",variant:"body1",children:["Questa trattativa riguarda l annuncio per ",null===C||void 0===C?void 0:C.wineName," ",null===C||void 0===C||null===(n=C.wine)||void 0===n?void 0:n.denominazioneZona]}),(null===f||void 0===f||null===(p=f.negotiation)||void 0===p?void 0:p.isConcluded)?Object(a.jsx)(b.a,{idNegotiation:f.negotiation._id,idUser:f.negotiation.forUserAd._id,type:f.negotiation.type}):Object(a.jsx)(v.a,{id:h}),Object(a.jsx)(s.a,{"aria-label":"open-chat",className:g.sellButton,component:i.a,to:"/messaggi/".concat(null===f||void 0===f||null===(O=f.negotiation)||void 0===O?void 0:O._id),children:"Vai alla chat"})]})}}}]);
//# sourceMappingURL=11.4dd5b97a.chunk.js.map