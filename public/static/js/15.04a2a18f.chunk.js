(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[15],{450:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(4),o=n(436),r=(n(0),n(23)),a=n(41),l=n(451),s=n.n(l),d=n(15),c=function(){var e=Object(r.e)(),t=Object(a.d)().pathname;return"annunci"===t.split("/")[1]&&t.split("/")[2]?Object(i.jsx)(o.a,{component:a.a,to:"/annunci",color:"primary",size:"large",startIcon:Object(i.jsx)(s.a,{}),children:"Annunci"}):(null===e||void 0===e?void 0:e.typeAd)===d.k.Buy&&"/buy"!==t?Object(i.jsx)(o.a,{component:a.a,to:"/buy",color:"primary",size:"large",startIcon:Object(i.jsx)(s.a,{}),children:"Compra"}):(null===e||void 0===e?void 0:e.typeAd)===d.k.Sell&&"/sell"!==t?Object(i.jsx)(o.a,{component:a.a,to:"/sell",color:"primary",size:"large",startIcon:Object(i.jsx)(s.a,{}),children:"Vendi"}):Object(i.jsx)(o.a,{color:"primary",size:"large",startIcon:Object(i.jsx)(s.a,{}),onClick:function(){return Object(a.c)(-1)},children:"Torna indietro"})}},451:function(e,t,n){"use strict";var i=n(46),o=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),a=(0,i(n(48)).default)(r.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");t.default=a},466:function(e,t,n){"use strict";var i=n(1),o=n(5),r=n(0),a=n(7),l=(n(10),n(27)),s=n(8),d=r.forwardRef((function(e,t){var n=e.animation,l=void 0===n?"pulse":n,s=e.classes,d=e.className,c=e.component,u=void 0===c?"span":c,m=e.height,p=e.variant,b=void 0===p?"text":p,j=e.width,v=Object(o.a)(e,["animation","classes","className","component","height","variant","width"]),h=Boolean(v.children);return r.createElement(u,Object(i.a)({ref:t,className:Object(a.a)(s.root,s[b],d,h&&[s.withChildren,!j&&s.fitContent,!m&&s.heightAuto],!1!==l&&s[l])},v,{style:Object(i.a)({width:j,height:m},v.style)}))}));t.a=Object(s.a)((function(e){return{root:{display:"block",backgroundColor:Object(l.c)(e.palette.text.primary,"light"===e.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:e.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}}),{name:"MuiSkeleton"})(d)},510:function(e,t,n){"use strict";n.r(t);var i=n(4),o=n(26),r=n(0),a=n(41),l=n(70),s=n(113),d=n(28),c=n(379),u=n(381),m=function(e){var t=Object(l.d)({name:e.name,type:e.type}),n=Object(o.a)(t,2),r=n[0],a=n[1],s=a.error,m=a.touched;return Object(i.jsx)(c.a,Object(d.a)(Object(d.a)({},r),{},{fullWidth:!0,type:e.type,inputProps:{"aria-label":e.name,min:e.min,max:e.max,step:e.step},InputLabelProps:{style:{color:e.labelTextColor}},className:e.class,InputProps:{endAdornment:Object(i.jsx)(u.a,{position:"end",children:e.adornment}),className:e.inputTextColor,classes:{underline:e.underlineColor}},error:void 0!==s&&m,"data-testid":e.name,placeholder:e.placeholder,label:e.label,helperText:s}))},p=n(156),b=n(511),j=n(151),v=Object(j.a)({option:{color:"#000"},groupLabel:{color:"#707070"}}),h=function(e){var t=e.items,n=e.label,r=e.name,a=e.setFieldValue,s=e.defaultWine,u=e.labelTextColor,m=e.underlineColor,p=Object(l.d)({name:r}),j=Object(o.a)(p,2),h=(j[0],j[1]),x=h.error,f=h.touched,O=v(),y=t.map((function(e){return{regione:e.regione[0],denominazioneVino:e.denominazioneVino}}));return Object(i.jsx)(b.a,{"data-testid":"combobox-wines",options:y.sort((function(e,t){return-t.regione.localeCompare(e.regione)})),groupBy:function(e){return e.regione},getOptionSelected:function(e,t){return e.denominazioneVino===t.denominazioneVino},defaultValue:s?{regione:"",denominazioneVino:s}:null,classes:{option:O.option,groupLabel:O.groupLabel,inputRoot:m},getOptionLabel:function(e){return e.denominazioneVino},fullWidth:!0,onChange:function(e,t){a(r,null===t||void 0===t?void 0:t.denominazioneVino)},renderInput:function(e){return Object(i.jsx)(l.a,Object(d.a)(Object(d.a)({component:c.a},e),{},{label:n,error:f&&void 0!==x,helperText:x,inputProps:Object(d.a)(Object(d.a)({},e.inputProps),{},{autoComplete:"new-password"}),InputLabelProps:{style:{color:u}}}))}})},x=n(466),f=n(436),O=n(90),y=n(15),g=n(131),k={wineName:"",harvest:2015,abv:13.5,price:1,liters:100},C=function(e){var t=e.onSubmit,n=e.adType,o=Object(g.d)(),r=Object(y.N)(),a=r.data,d=r.loading,c=r.error,u=(null===a||void 0===a?void 0:a.wines)?null===a||void 0===a?void 0:a.wines.map((function(e){return{denominazioneVino:e.denominazioneVino,regione:e.regione}})):null,b=(new Date).getFullYear();return d?Object(i.jsxs)("div",{className:o.paper,"data-testid":"loading",children:[Object(i.jsx)(x.a,{variant:"rect",width:"40em",height:70}),Object(i.jsx)("br",{}),Object(i.jsx)(x.a,{variant:"rect",width:"40em",height:30}),Object(i.jsx)(x.a,{variant:"rect",width:"40em",height:30}),Object(i.jsx)(x.a,{className:o.form,variant:"rect",width:"40em",height:30}),Object(i.jsx)(x.a,{className:o.form,variant:"rect",width:"40em",height:30}),Object(i.jsx)(x.a,{className:o.form,variant:"rect",width:"40em",height:30})]}):c?Object(i.jsxs)("div",{children:["Error...",c.message]}):Object(i.jsx)(l.c,{initialValues:k,validationSchema:s.c({wineName:s.e().required("Required"),harvest:s.b().positive("L'anno deve essere positivo").moreThan(1900,"L'anno deve essere maggiore di 1900").lessThan(b,"L'anno non pu\xf2 essere maggiore di ".concat(b)).required("Required"),abv:s.b().positive("La gradazione alcolica deve essere positiva").lessThan(22,"La gradazione alcolica non pu\xf2 essere maggiore di 22").required("Required"),price:s.b().positive("Il prezzo al litro deve essere positivo").lessThan(100,"Questo prezzo \xe8 al litro").required("Required"),liters:s.b().positive("La quantit\xe0 deve essere positiva").required("Required")}),onSubmit:t,children:function(e){var t=e.isValid,r=e.dirty,a=e.setFieldValue;return Object(i.jsxs)(l.b,{className:n===y.k.Buy?o.form:o.formSell,children:[Object(i.jsx)(O.a,{component:"h3",variant:"h5",color:n===y.k.Buy?"textSecondary":"primary",children:"Dati prodotto"}),Object(i.jsx)("br",{}),Object(i.jsx)(h,{name:"wineName",label:"Vino",items:u,setFieldValue:a,labelTextColor:n===y.k.Buy?"#fff":"#6d1331",underlineColor:n===y.k.Buy?o.underline:o.underlineSell}),Object(i.jsx)(p.a,{name:"harvest",type:"number",label:"Vendemmia",min:"1900",max:"".concat(b),step:"1",underlineColor:n===y.k.Buy?o.underline:o.underlineSell,placeholder:"Vendemmia anno",labelTextColor:n===y.k.Buy?"#fff":"#6d1331",inputTextColor:n===y.k.Buy?o.input:o.inputSell}),Object(i.jsx)(m,{name:"abv",type:"number",label:"Gradazione alcolica",min:"0",max:"22",step:"0.5",placeholder:"Esempio 13.5 vol",adornment:"%",underlineColor:n===y.k.Buy?o.underline:o.underlineSell,labelTextColor:n===y.k.Buy?"#fff":"#6d1331",inputTextColor:n===y.k.Buy?o.input:o.inputSell}),Object(i.jsx)(m,{name:"price",type:"number",label:"Prezzo massimo al litro",min:"0",max:"100",step:"0.1",placeholder:"Esempio 3.5 euro",adornment:"\u20ac",underlineColor:n===y.k.Buy?o.underline:o.underlineSell,labelTextColor:n===y.k.Buy?"#fff":"#6d1331",inputTextColor:n===y.k.Buy?o.input:o.inputSell}),Object(i.jsx)(m,{name:"liters",type:"number",label:"Litri richiesti",min:"0",max:"999999",step:"1",placeholder:"Esempio 1000 litri",adornment:"l",underlineColor:n===y.k.Buy?o.underline:o.underlineSell,labelTextColor:n===y.k.Buy?"#fff":"#6d1331",inputTextColor:n===y.k.Buy?o.input:o.inputSell}),Object(i.jsx)(f.a,{className:n===y.k.Buy?o.submit:o.submitSell,type:"submit",disabled:!r||!t,children:"Submit"})]})}})},B=n(23),S=n(230),w=n(228),z=n(227),T=n(383),V=function(e){var t=Object(l.d)({name:e.name}),n=Object(o.a)(t,2),r=n[0],a=n[1],s=a.error,c=a.touched;return Object(i.jsxs)(z.a,{fullWidth:!0,error:void 0!==s&&c,children:[Object(i.jsx)(S.a,{style:{color:e.labelColor},htmlFor:"select-label-".concat(e.name),children:e.label}),Object(i.jsx)(T.a,Object(d.a)(Object(d.a)({native:!0,className:e.underlineColor,classes:{root:e.underlineColor,icon:e.textColor},inputProps:{id:"select-label-".concat(e.name),name:r.name}},r),{},{children:e.options.map((function(e){return Object(i.jsx)("option",{value:e,children:e},e)}))})),Object(i.jsx)(w.a,{children:s})]})},N=n(474),q=n(437),L=n(477),F=n(475),A=n(476),P=n(472),R=function(e){var t=e.setFieldValue;return!0===Object(l.e)().values.isSameAddress?null:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(q.a,{item:!0,xs:12,children:Object(i.jsx)(F.a,{setFieldValue:t,name:"address.regione",label:"Regione",items:P.a})}),Object(i.jsx)(q.a,{item:!0,xs:12,children:Object(i.jsx)(A.a,{setFieldValue:t,name:"address.provincia",label:"Provincia"})}),Object(i.jsx)(q.a,{item:!0,xs:12,children:Object(i.jsx)(L.a,{setFieldValue:t,name:"address.comune",label:"Comune"})})]})},I={comune:"",provincia:"",regione:""},E=function(e){var t=e.onSubmit,n=e.adType,o=Object(y.N)(),r=o.data,a=o.loading,d=o.error,c=(null===r||void 0===r?void 0:r.wines)?null===r||void 0===r?void 0:r.wines.map((function(e){return{denominazioneVino:e.denominazioneVino,regione:e.regione}})):null,u=Object(g.d)(),b=(new Date).getFullYear(),j=Object(B.e)(),v={wineName:null===j||void 0===j?void 0:j.wineName,harvest:null===j||void 0===j?void 0:j.harvest,abv:null===j||void 0===j?void 0:j.abv,price:null===j||void 0===j?void 0:j.price,liters:null===j||void 0===j?void 0:j.liters,sottoZona:"",menzione:"",metodoProduttivo:"",content:"",needsFollowUp:!1,isSameAddress:!1,address:I};return a?Object(i.jsxs)("div",{className:u.paper,"data-testid":"loading",children:[Object(i.jsx)(x.a,{variant:"rect",width:"40em",height:70}),Object(i.jsx)("br",{}),Object(i.jsx)(x.a,{variant:"rect",width:"40em",height:30}),Object(i.jsx)(x.a,{variant:"rect",width:"40em",height:30}),Object(i.jsx)(x.a,{className:u.form,variant:"rect",width:"40em",height:30}),Object(i.jsx)(x.a,{className:u.form,variant:"rect",width:"40em",height:30}),Object(i.jsx)(x.a,{className:u.form,variant:"rect",width:"40em",height:30})]}):d?Object(i.jsxs)("div",{children:["Error...",d.message]}):Object(i.jsx)(l.c,{initialValues:v,validationSchema:s.c({wineName:s.e().required("Required"),harvest:s.b().positive("L'anno deve essere positivo").moreThan(1900,"L'anno deve essere maggiore di 1900").lessThan(b,"L'anno non pu\xf2 essere maggiore di ".concat(b)).required("Required"),abv:s.b().positive("La gradazione alcolica deve essere positiva").lessThan(22,"La gradazione alcolica non pu\xf2 essere maggiore di 22").required("Required"),price:s.b().positive("Il prezzo al litro deve essere positivo").lessThan(100,"Questo prezzo \xe8 al litro").required("Required"),liters:s.b().positive("La quantit\xe0 deve essere positiva").required("Required"),sottoZona:s.e(),menzione:s.e(),metodoProduttivo:s.e(),content:s.e().required("Required"),needsFollowUp:s.a().required("Required"),isSameAddress:s.a().required("Required"),address:s.c().shape({comune:s.e(),provincia:s.e(),regione:s.e()})}),onSubmit:t,children:function(e){var t=e.isValid,o=e.dirty,r=e.setFieldValue;return Object(i.jsxs)(l.b,{className:n===y.k.Buy?u.form:u.formSell,children:[Object(i.jsx)(O.a,{component:"h3",variant:"h5",color:n===y.k.Buy?"textSecondary":"primary",children:"Dati prodotto"}),Object(i.jsx)(h,{name:"wineName",label:"Vino",defaultWine:v.wineName,items:c,setFieldValue:r,labelTextColor:n===y.k.Buy?"#fff":"#6d1331",underlineColor:n===y.k.Buy?u.underline:u.underlineSell}),Object(i.jsx)(p.a,{name:"harvest",type:"number",label:"Vendemmia",min:"1900",max:"".concat(b),step:"1",underlineColor:n===y.k.Buy?u.underline:u.underlineSell,placeholder:"Vendemmia anno",labelTextColor:n===y.k.Buy?"#fff":"#6d1331",inputTextColor:n===y.k.Buy?u.input:u.inputSell}),Object(i.jsx)(m,{name:"abv",type:"number",label:"Gradazione alcolica",min:"0",max:"22",step:"0.5",placeholder:"Esempio 13.5 vol",adornment:"%",underlineColor:n===y.k.Buy?u.underline:u.underlineSell,labelTextColor:n===y.k.Buy?"#fff":"#6d1331",inputTextColor:n===y.k.Buy?u.input:u.inputSell}),Object(i.jsx)(m,{name:"price",type:"number",label:"Prezzo richiesto al litro",min:"0",max:"100",step:"0.1",placeholder:"Esempio 3.5 euro",adornment:"\u20ac",underlineColor:n===y.k.Buy?u.underline:u.underlineSell,labelTextColor:n===y.k.Buy?"#fff":"#6d1331",inputTextColor:n===y.k.Buy?u.input:u.inputSell}),Object(i.jsx)(m,{name:"liters",type:"number",label:"Litri richiesti",min:"0",max:"999999",step:"1",placeholder:"Esempio 1000 litri",adornment:"l",underlineColor:n===y.k.Buy?u.underline:u.underlineSell,labelTextColor:n===y.k.Buy?"#fff":"#6d1331",inputTextColor:n===y.k.Buy?u.input:u.inputSell}),Object(i.jsx)(V,{name:"menzione",label:"Menzione del vino",options:Object.values(y.c),underlineColor:n===y.k.Buy?u.underline:u.underlineSell,labelColor:n===y.k.Buy?"#fff":"#6d1331",textColor:n===y.k.Buy?u.input:u.inputSell}),Object(i.jsx)(V,{name:"metodoProduttivo",label:"Metodo produttivo del vino",options:Object.values(y.f),underlineColor:n===y.k.Buy?u.underline:u.underlineSell,labelColor:n===y.k.Buy?"#fff":"#6d1331",textColor:n===y.k.Buy?u.input:u.inputSell}),Object(i.jsx)(p.a,{name:"sottoZona",type:"text",label:"Sotto zona del vino",placeholder:"Sotto zona del vino",underlineColor:n===y.k.Buy?u.underline:u.underlineSell,labelTextColor:n===y.k.Buy?"#fff":"#6d1331",inputTextColor:n===y.k.Buy?u.input:u.inputSell}),Object(i.jsx)(p.a,{name:"content",type:"text",multiline:!0,label:"Descrizione",placeholder:"Vino veramente buono",underlineColor:n===y.k.Buy?u.underline:u.underlineSell,labelTextColor:n===y.k.Buy?"#fff":"#6d1331",inputTextColor:n===y.k.Buy?u.input:u.inputSell}),Object(i.jsx)(N.a,{name:"needsFollowUp",label:"Aggiornami se nuovi annunci pertinenti",labelColor:n===y.k.Buy?"#fff":"#6d1331"}),Object(i.jsx)(N.a,{name:"isSameAddress",label:"Indirizzo uguale a quello usato in registrazione",labelColor:n===y.k.Buy?"#fff":"#6d1331"}),Object(i.jsx)(R,{setFieldValue:r}),Object(i.jsx)(f.a,{className:n===y.k.Buy?u.submit:u.submitSell,type:"submit",disabled:!o||!t,children:"Submit"})]})}})},W=n(435),M=n(434),D=n(97),U=n(450);t.default=function(){var e,t,n,l=Object(B.c)(),s=Object(g.c)(),d="/buy"===Object(a.d)().pathname?y.k.Buy:y.k.Sell,c=Object(y.M)(),u=Object(o.a)(c,2),m=u[0],p=u[1].data;r.useEffect((function(){m()}),[]);var b=Object(y.q)({onError:function(e){return Object(B.d)({type:"error",message:"".concat(e.message)})},onCompleted:function(e){var t,n,i=e.createAd;if(0===(null===i||void 0===i||null===(t=i.errors)||void 0===t?void 0:t.length)&&(Object(B.d)({type:"success",message:"ad created"}),Object(a.c)("/")),null===i||void 0===i||null===(n=i.errors)||void 0===n?void 0:n.length){var o=i.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(B.d)({type:"error",message:"".concat(o.toString())})}},update:function(e,t){var n,i;Object(D.a)(e,null===(n=t.data)||void 0===n||null===(i=n.createAd)||void 0===i?void 0:i.response)}}),j=Object(o.a)(b,1)[0],v=d===y.k.Buy?"comprare":"vendere",h=d===y.k.Buy?"acquirente":"venditore";return Object(i.jsxs)(M.a,{component:"main",maxWidth:"xs",children:[Object(i.jsx)(W.a,{}),Object(i.jsx)(U.a,{}),Object(i.jsxs)("div",{className:s.paper,children:[Object(i.jsxs)(O.a,{component:"h1",variant:"h4",color:"primary",children:["Che cosa vuoi ",v,"?"]}),Object(i.jsxs)(O.a,{component:"p",color:"primary",children:["Inserisci i dati del prodotto che desideri ",v,", noi cercheremo per te il giusto ",h,"."]}),(null===p||void 0===p||null===(e=p.searchedWine)||void 0===e?void 0:e.isPost)?Object(i.jsx)(E,{onSubmit:function(e){var i,o;e.isSameAddress&&(null===l||void 0===l?void 0:l.address)?t={regione:l.address.regione,provincia:l.address.provincia,comune:l.address.comune}:n=e.address;var r={wineName:e.wineName,typeAd:null===p||void 0===p||null===(i=p.searchedWine)||void 0===i?void 0:i.typeAd,typeProduct:null===p||void 0===p||null===(o=p.searchedWine)||void 0===o?void 0:o.typeProduct,content:e.content,harvest:e.harvest,abv:e.abv,priceFrom:e.price,priceTo:e.price,litersFrom:e.liters,litersTo:e.liters,needsFollowUp:e.needsFollowUp,address:e.isSameAddress?t:n};j({variables:{input:r}}),Object(B.e)(void 0),Object(a.c)("/")},adType:d}):Object(i.jsx)(C,{onSubmit:function(e){Object(B.e)(void 0),Object(B.e)({wineName:e.wineName,typeAd:d,typeProduct:y.l.AdWine,liters:e.liters,harvest:e.harvest,abv:e.abv,price:e.price,isPost:!1}),Object(a.c)("/annunci")},adType:d})]})]})}}}]);
//# sourceMappingURL=15.04a2a18f.chunk.js.map