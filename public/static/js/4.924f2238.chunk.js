(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[4],{484:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(3),r=(n(1),n(479)),o=n(0),a=function(e){var t=e.notActive?"#b2b2b2":"white",n=e.notActive?"#8a425a":"primary.main";return Object(i.jsx)(r.a,{boxShadow:3,p:2,m:2,mt:2,px:2,pt:2,width:e.width,color:e.typeAd===o.k.Sell?"primary.main":"white",borderColor:e.typeAd===o.k.Sell?"white":"primary.main",bgcolor:e.typeAd===o.k.Sell?t:n,borderRadius:16,children:e.children})}},485:function(e,t,n){"use strict";var i=n(55),r=n(56);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(1)),a=(0,i(n(57)).default)(o.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.default=a},486:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(3),r=n(21),o=n(32),a=n(1),c=n(485),l=n.n(c),s=n(141),d=n(256),u=n(410),v=Object(s.a)((function(){return Object(d.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"}})})),b=function(e){var t=v(),n="messaggi"===Object(o.d)().pathname.split("/")[1],c=function(e){var t=e.root,n=void 0===t?null:t,i=e.rootMargin,o=void 0===i?"0px":i,c=e.threshold,l=void 0===c?0:c,s=a.useState(null),d=Object(r.a)(s,2),u=d[0],v=d[1],b=a.useState(null),j=Object(r.a)(b,2),h=j[0],f=j[1],p=a.useRef(null);return a.useEffect((function(){p.current&&p.current.disconnect(),p.current=new window.IntersectionObserver((function(e){var t=Object(r.a)(e,1)[0];return v(t)}),{root:n,rootMargin:o,threshold:l});var e=p.current;return h&&e.observe(h),function(){return e.disconnect()}}),[h,n,o,l]),[f,u]}({threshold:0}),s=Object(r.a)(c,2),d=s[0],b=s[1],j=a.useState(!0),h=Object(r.a)(j,2),f=h[0],p=h[1];return a.useEffect((function(){b&&(null===b||void 0===b?void 0:b.intersectionRatio)>0&&f?(e.fetchMore(),e.setIsLoading&&e.setIsLoading(!0),p(!1)):0!==(null===b||void 0===b?void 0:b.intersectionRatio)||f||(p(!0),e.setIsLoading&&e.setIsLoading(!1))}),[null===b||void 0===b?void 0:b.intersectionRatio]),n?Object(i.jsxs)(i.Fragment,{children:[e.isVisible?e.isLoading?Object(i.jsx)("div",{className:t.root,children:Object(i.jsx)(u.a,{})}):Object(i.jsxs)("div",{className:t.root,id:"page-bottom-boundary",ref:d,children:[" ",Object(i.jsx)(l.a,{})]}):null,e.children]}):Object(i.jsxs)("div",{className:t.root,children:[e.children,e.isVisible?e.isLoading?Object(i.jsx)(u.a,{}):Object(i.jsxs)("div",{id:"page-bottom-boundary",ref:d,style:{height:30},children:[" ",Object(i.jsx)(l.a,{})]}):null]})}},487:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(3),r=(n(1),n(414)),o=n(167),a=n(258),c=n(0),l=function(e){return Object(i.jsxs)(o.a,{fullWidth:!0,children:[Object(i.jsx)(a.a,{style:{color:"black"},htmlFor:"order",children:"Ordine risultati"}),Object(i.jsxs)(r.a,{native:!0,value:e.order,onChange:function(t){e.setOrder(t.target.value)},inputProps:{name:"order",id:"order"},children:[Object(i.jsx)("option",{value:c.i.CreatedAtDesc,children:"Dal piu recente"}),Object(i.jsx)("option",{value:c.i.CreatedAtAsc,children:"Dal meno recente"}),e.isAds?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("option",{value:c.i.PriceDesc,children:"Dal piu caro"}),Object(i.jsx)("option",{value:c.i.PriceAsc,children:"Dal meno caro"})]}):null]})]})}},488:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(3),r=n(21),o=n(1),a=n(409),c=n(469),l=n(471),s=n(470),d=n(47),u=n.n(d),v=n(71),b=n(20),j=n(0),h=function(e){var t=e.id,n=e.handleClose,o=Object(j.O)({onCompleted:function(e){var t,n;if(null===(t=e.updateNegotiation)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var i,r=null===(i=e.updateNegotiation)||void 0===i?void 0:i.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(b.d)({type:"error",message:"".concat(r.toString())})}else Object(b.d)({message:"trattativa chiusa con successo",type:"success"})},onError:function(e){return Object(b.d)({type:"error",message:e.message})}}),c=Object(r.a)(o,2),l=c[0],s=c[1].loading,d=function(){var e=Object(v.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,l({variables:{negotiation:{_id:t,isConcluded:!0}}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)(a.a,{"aria-label":"close-negotiation",disabled:s,onClick:d,children:"Dichiara chiusa la trattativa"})},f=n(83),p=function(e){var t=e.id,n=e.handleClose,o=Object(j.v)({onCompleted:function(e){var t,n;if(null===(t=e.deleteNegotiation)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var i,r=null===(i=e.deleteNegotiation)||void 0===i?void 0:i.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(b.d)({type:"error",message:"".concat(r.toString())})}else Object(b.d)({message:"trattativa cancellata con successo",type:"info"})},onError:function(e){return Object(b.d)({type:"error",message:e.message})},update:function(e,t){var n,i=t.data;Object(f.g)(e,null===i||void 0===i||null===(n=i.deleteNegotiation)||void 0===n?void 0:n.response)}}),c=Object(r.a)(o,2),l=c[0],s=c[1].loading,d=function(){var e=Object(v.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,l({variables:{id:t}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)(a.a,{"aria-label":"cancel-negotiation",disabled:s,onClick:d,children:"Cancella la trattativa"})},O=n(82),m=function(e){var t=e.id,n=e.isBuy,d=e.isMessage,u=Object(O.c)(),v=o.useState(!1),b=Object(r.a)(v,2),j=b[0],f=b[1],m=function(){f(!1)};return n=!!d,Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(a.a,{fullWidth:!0,"aria-label":"close-negotiation-popup",className:n?u.buyButton:u.sellButton,onClick:function(){f(!0)},children:"Chiudi trattativa"}),Object(i.jsx)("div",{style:{display:"none"},children:Object(i.jsxs)(c.a,{open:j,onClose:m,"aria-labelledby":"close-negotiation",children:[Object(i.jsxs)(s.a,{children:[Object(i.jsx)(p,{id:t,handleClose:m}),Object(i.jsx)(h,{id:t,handleClose:m})]}),Object(i.jsx)(l.a,{children:Object(i.jsx)(a.a,{onClick:m,color:"primary",children:"Cancel"})})]})})]})}},489:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n(3),r=n(21),o=n(409),a=n(1),c=n(0),l=n(82),s=n(479),d=n(469),u=n(470),v=n(471),b=n(142),j=n(495),h=n(20),f=function(e){var t=e.review,n=e.disabled,a=e.closeModal,l=Object(c.t)({onCompleted:function(e){var t,n;if(null===(t=e.createReview)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var i,r=null===(i=e.createReview)||void 0===i?void 0:i.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(h.d)({type:"error",message:"".concat(r.toString())})}else Object(h.d)({type:"success",message:"Recensione creata con successo"})},onError:function(e){return Object(h.d)({type:"error",message:e.message})}}),s=Object(r.a)(l,2),d=s[0],u=s[1].loading;return Object(i.jsx)(o.a,{disabled:n||u,"aria-label":"review",onClick:function(){a&&a(),d({variables:{review:t}})},color:"primary",children:"Recensisci"})},p={.5:"Useless",1:"Useless+",1.5:"Poor",2:"Poor+",2.5:"Ok",3:"Ok+",3.5:"Good",4:"Good+",4.5:"Excellent",5:"Excellent+"},O=function(e){var t=e.idUser,n=e.idNegotiation,h=e.type,O=e.isMessage,m=a.useState(!1),g=Object(r.a)(m,2),x=g[0],y=g[1],C=a.useState(2),k=Object(r.a)(C,2),E=k[0],w=k[1],S=a.useState(-1),A=Object(r.a)(S,2),N=A[0],M=A[1],T=a.useState(""),z=Object(r.a)(T,2),B=z[0],R=z[1],I=Object(l.c)(),D=Object(l.d)(),L=Object(l.b)(),_=function(){y(!1)};return h=O?c.k.Sell:h,Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(o.a,{fullWidth:!0,"aria-label":"review",className:h===c.k.Buy?I.buyButton:I.sellButton,onClick:function(){y(!0)},children:"Lascia una recensione"}),Object(i.jsx)("div",{style:{display:"none"},children:Object(i.jsxs)(d.a,{open:x,onClose:_,"aria-labelledby":"form-dialog-title",children:[Object(i.jsx)(j.a,{id:"form-dialog-title",children:"Recensisci la trattativa"}),Object(i.jsxs)(u.a,{children:[Object(i.jsxs)("div",{className:L.root,children:[Object(i.jsx)(l.a,{name:"hover-feedback",value:E,precision:.5,onChange:function(e,t){w(t)},onChangeActive:function(e,t){M(t)}}),null!==E&&Object(i.jsx)(s.a,{ml:2,children:p[-1!==N?N:E]})]}),Object(i.jsx)(b.a,{color:"primary",multiline:!0,rows:4,value:B,error:B.length>0&&B.length<=5,helperText:"Lunghezza minima 5 caratteri",onChange:function(e){R(e.target.value)},InputLabelProps:{style:{color:"#6d1331"}},InputProps:{className:D.inputSell,classes:{underline:D.underlineSell}},id:"outlined-multiline-flexible",label:"Recensione",placeholder:"Ottima persona con cui...."})]}),Object(i.jsxs)(v.a,{children:[Object(i.jsx)(o.a,{"aria-label":"close-modal",onClick:_,color:"primary",children:"Cancel"}),Object(i.jsx)(f,{disabled:B.length<=5,review:{forUser:t,rating:E,negotiation:n,content:B,type:h},closeModal:_})]})]})})]})}},491:function(e,t,n){"use strict";var i=n(55),r=n(56);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(1)),a=(0,i(n(57)).default)(o.createElement("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList");t.default=a},492:function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return z}));var i=n(3),r=n(21),o=n(13),a=n(1),c=n(409),l=n(498),s=n(491),d=n.n(s),u=n(459),v=n(411),b=n(2),j=n(6),h=(n(11),n(7)),f=n(177),p=n(64),O=Object(p.a)(a.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),m=Object(p.a)(a.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),g=n(19),x=Object(p.a)(a.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),y=n(12),C=n(9),k=a.createElement(m,null),E=a.createElement(O,null),w=a.createElement(x,null),S=a.forwardRef((function(e,t){var n=e.checkedIcon,i=void 0===n?k:n,r=e.classes,o=e.color,c=void 0===o?"secondary":o,l=e.icon,s=void 0===l?E:l,d=e.indeterminate,u=void 0!==d&&d,v=e.indeterminateIcon,p=void 0===v?w:v,O=e.inputProps,m=e.size,g=void 0===m?"medium":m,x=Object(j.a)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),C=u?p:s,S=u?p:i;return a.createElement(f.a,Object(b.a)({type:"checkbox",classes:{root:Object(h.a)(r.root,r["color".concat(Object(y.a)(c))],u&&r.indeterminate),checked:r.checked,disabled:r.disabled},color:c,inputProps:Object(b.a)({"data-indeterminate":u},O),icon:a.cloneElement(C,{fontSize:void 0===C.props.fontSize&&"small"===g?g:C.props.fontSize}),checkedIcon:a.cloneElement(S,{fontSize:void 0===S.props.fontSize&&"small"===g?g:S.props.fontSize}),ref:t},x))})),A=Object(C.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(g.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(g.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(S),N={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},M=n(20);var T=Object(C.a)({root:{color:N[400],"&$checked":{color:N[600]}},checked:{}})((function(e){return Object(i.jsx)(A,Object(o.a)({color:"default"},e))})),z=function(e){var t=Object(M.e)(),n=a.useState(!1),o=Object(r.a)(n,2),s=o[0],b=o[1],j=a.useState(!1),h=Object(r.a)(j,2),f=h[0],p=h[1],O=a.useState({priceTo:function(e){return e<=(null===t||void 0===t?void 0:t.priceTo)},abv:function(e){return e>=(null===t||void 0===t?void 0:t.abv)-.5||e<=(null===t||void 0===t?void 0:t.abv)+.5},harvest:function(e){return e===(null===t||void 0===t?void 0:t.harvest)||e-1===(null===t||void 0===t?void 0:t.harvest)},litersTo:function(e){return e>=(null===t||void 0===t?void 0:t.litersTo)}}),m=Object(r.a)(O,2),g=m[0],x=m[1];a.useEffect((function(){if(e.list.length>0){var t=function(e,t){var n=Object.keys(t);return e.filter((function(e){return n.every((function(n){return"function"!==typeof t[n]||t[n](e[n])}))}))}(e.list,g);e.setFilteredList(t)}}),[g,e.list]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(c.a,{onClick:function(){return p(!f)},"aria-label":"filter",color:"primary",size:"large",startIcon:Object(i.jsx)(d.a,{}),children:"Filtri"}),Object(i.jsxs)(l.a,{in:f,children:[e.children,Object(i.jsx)(u.a,{}),Object(i.jsx)(v.a,{control:Object(i.jsx)(T,{checked:s,onChange:function(){x(s?{priceTo:function(e){return e<=(null===t||void 0===t?void 0:t.priceTo)},abv:function(e){return e>=(null===t||void 0===t?void 0:t.abv)-.5||e<=(null===t||void 0===t?void 0:t.abv)+.5},harvest:function(e){return e===(null===t||void 0===t?void 0:t.harvest)||e-1===(null===t||void 0===t?void 0:t.harvest)},litersTo:function(e){return e>=(null===t||void 0===t?void 0:t.litersTo)}}:{priceTo:function(){return!0},harvest:function(){return!0},abv:function(){return!0},litersTo:function(){return!0}}),b(!s)},name:"showAll"}),label:"Mostra tutti gli annunci per questo vino"})]})]})}},495:function(e,t,n){"use strict";var i=n(2),r=n(6),o=n(1),a=(n(11),n(7)),c=n(9),l=n(88),s=o.forwardRef((function(e,t){var n=e.children,c=e.classes,s=e.className,d=e.disableTypography,u=void 0!==d&&d,v=Object(r.a)(e,["children","classes","className","disableTypography"]);return o.createElement("div",Object(i.a)({className:Object(a.a)(c.root,s),ref:t},v),u?n:o.createElement(l.a,{component:"h2",variant:"h6"},n))}));t.a=Object(c.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(s)},498:function(e,t,n){"use strict";var i=n(2),r=n(34),o=n(6),a=n(1),c=n(7),l=(n(11),n(418)),s=n(9),d=n(33),u=n(40),v=n(39),b=n(18),j=a.forwardRef((function(e,t){var n=e.children,s=e.classes,j=e.className,h=e.collapsedHeight,f=void 0===h?"0px":h,p=e.component,O=void 0===p?"div":p,m=e.disableStrictModeCompat,g=void 0!==m&&m,x=e.in,y=e.onEnter,C=e.onEntered,k=e.onEntering,E=e.onExit,w=e.onExited,S=e.onExiting,A=e.style,N=e.timeout,M=void 0===N?d.b.standard:N,T=e.TransitionComponent,z=void 0===T?l.a:T,B=Object(o.a)(e,["children","classes","className","collapsedHeight","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),R=Object(v.a)(),I=a.useRef(),D=a.useRef(null),L=a.useRef(),_="number"===typeof f?"".concat(f,"px"):f;a.useEffect((function(){return function(){clearTimeout(I.current)}}),[]);var H=R.unstable_strictMode&&!g,P=a.useRef(null),F=Object(b.a)(t,H?P:void 0),V=function(e){return function(t,n){if(e){var i=H?[P.current,t]:[t,n],o=Object(r.a)(i,2),a=o[0],c=o[1];void 0===c?e(a):e(a,c)}}},U=V((function(e,t){e.style.height=_,y&&y(e,t)})),W=V((function(e,t){var n=D.current?D.current.clientHeight:0,i=Object(u.a)({style:A,timeout:M},{mode:"enter"}).duration;if("auto"===M){var r=R.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(r,"ms"),L.current=r}else e.style.transitionDuration="string"===typeof i?i:"".concat(i,"ms");e.style.height="".concat(n,"px"),k&&k(e,t)})),$=V((function(e,t){e.style.height="auto",C&&C(e,t)})),G=V((function(e){var t=D.current?D.current.clientHeight:0;e.style.height="".concat(t,"px"),E&&E(e)})),J=V(w),q=V((function(e){var t=D.current?D.current.clientHeight:0,n=Object(u.a)({style:A,timeout:M},{mode:"exit"}).duration;if("auto"===M){var i=R.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(i,"ms"),L.current=i}else e.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");e.style.height=_,S&&S(e)}));return a.createElement(z,Object(i.a)({in:x,onEnter:U,onEntered:$,onEntering:W,onExit:G,onExited:J,onExiting:q,addEndListener:function(e,t){var n=H?e:t;"auto"===M&&(I.current=setTimeout(n,L.current||0))},nodeRef:H?P:void 0,timeout:"auto"===M?null:M},B),(function(e,t){return a.createElement(O,Object(i.a)({className:Object(c.a)(s.container,j,{entered:s.entered,exited:!x&&"0px"===_&&s.hidden}[e]),style:Object(i.a)({minHeight:_},A),ref:F},t),a.createElement("div",{className:s.wrapper,ref:D},a.createElement("div",{className:s.wrapperInner},n)))}))}));j.muiSupportAuto=!0,t.a=Object(s.a)((function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}}),{name:"MuiCollapse"})(j)},542:function(e,t,n){"use strict";n.r(t);var i=n(3),r=n(47),o=n.n(r),a=n(71),c=n(21),l=n(1),s=n(88),d=n(467),u=n(466),v=n(0),b=n(458),j=n(32),h=n(409),f=n(39),p=n(475),O=n(484),m=n(82),g=n(489),x=n(20),y=n(488),C=function(e){var t,n=e.negotiation,r=Object(x.c)(),o=Object(m.c)(),a=Object(f.a)(),c=Object(p.a)(a.breakpoints.up("sm"))?400:250,l=n.type===v.k.Buy,d=-1!==(null===(t=n.review)||void 0===t?void 0:t.findIndex((function(e){return(null===e||void 0===e?void 0:e.createdBy._id)===(null===r||void 0===r?void 0:r._id)})));return Object(i.jsxs)(O.a,{width:c,typeAd:n.type,children:[Object(i.jsxs)(b.a,{"aria-label":"link-negotiation",component:j.a,to:"/trattative/".concat(n._id),style:{textDecoration:"none"},children:[Object(i.jsxs)(s.a,{component:"h5",variant:"h6",color:l?"textSecondary":"primary",children:[l?"Compro":"Vendo"," ","AdWine"===n.ad.__typename&&n.ad.wineName," "]}),Object(i.jsxs)(s.a,{align:"left",variant:"body1",color:l?"textSecondary":"primary",children:["Aperta da: cantina ",n.createdBy.firstName,Object(i.jsx)("br",{}),"Per cantina: ",n.forUserAd.firstName,Object(i.jsx)("br",{}),n.isConcluded?"Trattativa conclusa":null]}),Object(i.jsx)("br",{})]}),Object(i.jsxs)(s.a,{"data-testid":"published",align:"right",variant:"caption",color:l?"textSecondary":"primary",children:["Trattativa aperta: ",n.dateCreated]}),n.isConcluded?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("br",{}),Object(i.jsxs)(s.a,{align:"right",variant:"caption",color:l?"textSecondary":"primary",children:["Trattativa conclusa: ",n.dateConcluded]})]}):null,Object(i.jsxs)("div",{children:[Object(i.jsx)("br",{}),n.isConcluded?d?null:Object(i.jsx)(g.a,{idNegotiation:n._id,type:n.type,idUser:n.forUserAd._id}):Object(i.jsx)(y.a,{isBuy:l,id:n._id}),Object(i.jsx)(h.a,{style:{marginTop:5},fullWidth:!0,className:l?o.buyButton:o.sellButton,color:"primary",component:j.a,to:"/messaggi/".concat(n._id),children:"Apri la chat"})]})]})},k=n(172),E=n(487),w=n(486),S=n(492),A=n(411),N=n(459),M=n(112);t.default=function(){var e,t,n,r,b,j,h,f=l.useState(v.i.CreatedAtDesc),p=Object(c.a)(f,2),O=p[0],m=p[1],g=Object(v.J)({variables:{offset:0,limit:4,orderBy:O,isConcluded:!1},onError:function(e){return console.error(e)}}),y=g.data,T=g.loading,z=g.error,B=g.fetchMore,R=l.useState(!1),I=Object(c.a)(R,2),D=I[0],L=I[1],_=l.useState(!1),H=Object(c.a)(_,2),P=H[0],F=H[1],V=l.useState(!1),U=Object(c.a)(V,2),W=U[0],$=U[1],G=function(){var e=Object(a.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=3;break}return L(!D),e.abrupt("return");case 3:if($(!0),!B||D){e.next=15;break}return e.prev=5,L(!0),e.next=9,B({variables:{limit:null===y||void 0===y||null===(t=y.negotiations)||void 0===t||null===(n=t.negotiations)||void 0===n?void 0:n.length,isConcluded:!0}});case 9:$(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),Object(x.d)({type:"error",message:"Errore durante il caricamento delle trattative"});case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),J=(null===y||void 0===y||null===(e=y.negotiations)||void 0===e||null===(t=e.negotiations)||void 0===t?void 0:t.length)<(null===y||void 0===y||null===(n=y.negotiations)||void 0===n?void 0:n.pageCount);if(l.useEffect((function(){var e,t,n,i;(null===y||void 0===y||null===(e=y.negotiations)||void 0===e||null===(t=e.negotiations)||void 0===t?void 0:t.length)&&B&&($(!0),B({variables:{orderBy:O,limit:null===y||void 0===y||null===(n=y.negotiations)||void 0===n||null===(i=n.negotiations)||void 0===i?void 0:i.length,isConcluded:D}}).then((function(){$(!1)})).catch((function(e){$(!1),console.error(e)})))}),[O]),T)return Object(i.jsx)(M.a,{});if(z)return Object(i.jsx)("div",{children:z.message});if(0===(null===y||void 0===y||null===(r=y.negotiations)||void 0===r||null===(b=r.negotiations)||void 0===b?void 0:b.length))return Object(i.jsx)("div",{children:"Non hai trattative attive"});if(null===y||void 0===y||null===(j=y.negotiations)||void 0===j||null===(h=j.negotiations)||void 0===h?void 0:h.length){var q,K=function(){var e=Object(a.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F(!0),!B){e.next=12;break}return e.prev=2,e.next=5,B({variables:{offset:null===y||void 0===y||null===(t=y.negotiations)||void 0===t||null===(n=t.negotiations)||void 0===n?void 0:n.length,orderBy:O,isConcluded:D}});case 5:F(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),F(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)(u.a,{component:"main",maxWidth:"xs",children:[Object(i.jsx)(d.a,{}),Object(i.jsx)(k.a,{}),Object(i.jsx)("br",{}),Object(i.jsx)(s.a,{color:"primary",component:"h3",variant:"h5",children:"Le tue trattative attive"}),Object(i.jsx)("br",{}),Object(i.jsx)(E.a,{setOrder:m,order:O}),Object(i.jsx)(N.a,{}),Object(i.jsx)(A.a,{control:Object(i.jsx)(S.b,{checked:D,onChange:G,name:"showAll"}),label:"Mostra anche le trattative chiuse"}),W?Object(i.jsx)(M.a,{}):Object(i.jsx)(w.a,{fetchMore:K,isVisible:J,isLoading:P,children:null===y||void 0===y||null===(q=y.negotiations)||void 0===q?void 0:q.negotiations.filter((function(e){return D?e:(null===e||void 0===e?void 0:e.isConcluded)===D})).map((function(e){return Object(i.jsx)(C,{negotiation:e},null===e||void 0===e?void 0:e._id)}))})]})}return Object(i.jsx)("div",{children:"Grave errore"})}}}]);
//# sourceMappingURL=4.924f2238.chunk.js.map