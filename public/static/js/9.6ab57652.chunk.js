(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[9],{450:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),o=n(436),i=(n(0),n(23)),a=n(41),c=n(451),u=n.n(c),s=n(15),l=function(){var e=Object(i.e)(),t=Object(a.d)().pathname;return"annunci"===t.split("/")[1]&&t.split("/")[2]?Object(r.jsx)(o.a,{component:a.a,to:"/annunci",color:"primary",size:"large",startIcon:Object(r.jsx)(u.a,{}),children:"Annunci"}):(null===e||void 0===e?void 0:e.typeAd)===s.k.Buy&&"/buy"!==t?Object(r.jsx)(o.a,{component:a.a,to:"/buy",color:"primary",size:"large",startIcon:Object(r.jsx)(u.a,{}),children:"Compra"}):(null===e||void 0===e?void 0:e.typeAd)===s.k.Sell&&"/sell"!==t?Object(r.jsx)(o.a,{component:a.a,to:"/sell",color:"primary",size:"large",startIcon:Object(r.jsx)(u.a,{}),children:"Vendi"}):Object(r.jsx)(o.a,{color:"primary",size:"large",startIcon:Object(r.jsx)(u.a,{}),onClick:function(){return Object(a.c)(-1)},children:"Torna indietro"})}},452:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),o=(n(0),n(445)),i=n(15),a=function(e){var t=e.notActive?"#b2b2b2":"white",n=e.notActive?"#8a425a":"primary.main";return Object(r.jsx)(o.a,{boxShadow:3,p:2,m:2,mt:2,px:2,pt:2,width:e.width,color:e.typeAd===i.k.Sell?"primary.main":"white",borderColor:e.typeAd===i.k.Sell?"white":"primary.main",bgcolor:e.typeAd===i.k.Sell?t:n,borderRadius:16,children:e.children})}},454:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(4),o=n(26),i=n(41),a=n(0),c=n(453),u=n.n(c),s=n(151),l=n(385),d=n(468),b=Object(s.a)((function(){return Object(l.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"}})})),v=function(e){var t=b(),n="messaggi"===Object(i.d)().pathname.split("/")[1],c=function(e){var t=e.root,n=void 0===t?null:t,r=e.rootMargin,i=void 0===r?"0px":r,c=e.threshold,u=void 0===c?0:c,s=a.useState(null),l=Object(o.a)(s,2),d=l[0],b=l[1],v=a.useState(null),j=Object(o.a)(v,2),f=j[0],p=j[1],O=a.useRef(null);return a.useEffect((function(){O.current&&O.current.disconnect(),O.current=new window.IntersectionObserver((function(e){var t=Object(o.a)(e,1)[0];return b(t)}),{root:n,rootMargin:i,threshold:u});var e=O.current;return f&&e.observe(f),function(){return e.disconnect()}}),[f,n,i,u]),[p,d]}({threshold:0}),s=Object(o.a)(c,2),l=s[0],v=s[1],j=a.useState(!0),f=Object(o.a)(j,2),p=f[0],O=f[1];return a.useEffect((function(){v&&(null===v||void 0===v?void 0:v.intersectionRatio)>=.5&&p?(e.fetchMore(),e.setIsLoading&&e.setIsLoading(!0),O(!1)):0!==(null===v||void 0===v?void 0:v.intersectionRatio)||p||(O(!0),e.setIsLoading&&e.setIsLoading(!1))}),[null===v||void 0===v?void 0:v.intersectionRatio]),n?Object(r.jsxs)(r.Fragment,{children:[e.isVisible?Object(r.jsxs)("div",{className:t.root,id:"page-bottom-boundary",ref:l,children:[" ",Object(r.jsx)(u.a,{})]}):null,e.children]}):Object(r.jsxs)("div",{className:t.root,children:[e.children,e.isVisible?e.isLoading?Object(r.jsx)(d.a,{}):Object(r.jsxs)("div",{id:"page-bottom-boundary",ref:l,style:{height:30},children:[" ",Object(r.jsx)(u.a,{})]}):null]})}},455:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),o=(n(0),n(383)),i=n(227),a=n(230),c=n(15),u=function(e){return Object(r.jsxs)(i.a,{fullWidth:!0,children:[Object(r.jsx)(a.a,{style:{color:"black"},htmlFor:"order",children:"Ordine risultati"}),Object(r.jsxs)(o.a,{native:!0,value:e.order,onChange:function(t){e.setOrder(t.target.value)},inputProps:{name:"order",id:"order"},children:[Object(r.jsx)("option",{"aria-label":"None",value:""}),Object(r.jsx)("option",{value:c.i.CreatedAtDesc,children:"Dal piu recente"}),Object(r.jsx)("option",{value:c.i.CreatedAtAsc,children:"Dal meno recente"}),Object(r.jsx)("option",{value:c.i.PriceDesc,children:"Dal piu caro"}),Object(r.jsx)("option",{value:c.i.PriceAsc,children:"Dal meno caro"})]})]})}},460:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(4),o=(n(0),n(452)),i=n(90),a=n(429),c=n(41),u=n(15),s=n(35),l=n(478),d=function(e){var t=e.ad,n=Object(s.a)(),d=Object(l.a)(n.breakpoints.up("sm"))?400:250,b=(null===t||void 0===t?void 0:t.typeAd)===u.k.Buy,v=(null===t||void 0===t?void 0:t.isActive)?"auto":"none";return t?Object(r.jsx)(o.a,{width:d,typeAd:t.typeAd,notActive:!t.isActive,children:Object(r.jsxs)(a.a,{style:{pointerEvents:v,display:"block"},component:c.a,to:"/annunci/".concat(t._id),underline:"none",children:[Object(r.jsxs)(i.a,{component:"h5",variant:"h6",color:b?"textSecondary":"primary",children:[b?"Compro":"Vendo"," ",t.wineName," "]}),Object(r.jsxs)(i.a,{align:"left",variant:"body1",color:b?"textSecondary":"primary",children:["Annata: ",t.harvest,Object(r.jsx)("br",{}),"Gradazione: ",t.abv," % Vol",Object(r.jsx)("br",{}),"Quantit\xe0: ",t.litersTo," l",Object(r.jsx)("br",{}),"Prezzo: ",t.priceFrom," euro al litro"]}),Object(r.jsx)("br",{}),Object(r.jsxs)(i.a,{align:"right",variant:"caption",color:b?"textSecondary":"primary",children:["Annuncio pubblicato il ",t.datePosted]})]})}):null}},461:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return m}));var r=n(4),o=n(26),i=n(28),a=n(0),c=n(436),u=n(486),s=n(467),l=n.n(s),d=n(423),b=n(484),v=n(514),j=n(8),f=n(504),p=n(23);var O=Object(j.a)({root:{color:f.a[400],"&$checked":{color:f.a[600]}},checked:{}})((function(e){return Object(r.jsx)(v.a,Object(i.a)({color:"default"},e))})),m=function(e){var t=Object(p.e)(),n=a.useState(!1),i=Object(o.a)(n,2),s=i[0],v=i[1],j=a.useState(!1),f=Object(o.a)(j,2),m=f[0],h=f[1],x=a.useState({priceTo:function(e){return e<=(null===t||void 0===t?void 0:t.price)},abv:function(e){return e>=(null===t||void 0===t?void 0:t.abv)-.5||e<=(null===t||void 0===t?void 0:t.abv)+.5},harvest:function(e){return e===(null===t||void 0===t?void 0:t.harvest)||e-1===(null===t||void 0===t?void 0:t.harvest)},litersTo:function(e){return e>=(null===t||void 0===t?void 0:t.liters)}}),g=Object(o.a)(x,2),y=g[0],E=g[1];a.useEffect((function(){if(e.list.length>0){var t=function(e,t){var n=Object.keys(t);return e.filter((function(e){return n.every((function(n){return"function"!==typeof t[n]||t[n](e[n])}))}))}(e.list,y);e.setFilteredList(t)}}),[y,e.list]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(c.a,{onClick:function(){return h(!m)},"aria-label":"filter",color:"primary",size:"large",startIcon:Object(r.jsx)(l.a,{}),children:"Filtri"}),Object(r.jsxs)(u.a,{in:m,children:[Object(r.jsx)(d.a,{}),Object(r.jsx)(b.a,{control:Object(r.jsx)(O,{checked:s,onChange:function(){E(s?{priceTo:function(e){return e<=(null===t||void 0===t?void 0:t.price)},abv:function(e){return e>=(null===t||void 0===t?void 0:t.abv)-.5||e<=(null===t||void 0===t?void 0:t.abv)+.5},harvest:function(e){return e===(null===t||void 0===t?void 0:t.harvest)||e-1===(null===t||void 0===t?void 0:t.harvest)},litersTo:function(e){return e>=(null===t||void 0===t?void 0:t.liters)}}:{priceTo:function(){return!0},harvest:function(){return!0},abv:function(){return!0},litersTo:function(){return!0}}),v(!s)},name:"showAll"}),label:"Mostra tutti gli annunci per questo vino"})]})]})}},512:function(e,t,n){"use strict";n.r(t);var r=n(4),o=n(81),i=n.n(o),a=n(28),c=n(103),u=n(26),s=n(0),l=n(90),d=n(466),b=n(435),v=n(434),j=n(41),f=n(15),p=n(23),O=n(460),m=n(450),h=n(461),x=n(5),g=n(22),y=n(1),E=(n(10),n(7)),k=n(8),w=n(29),C=n(19),A=n(24),L=n(16),S=n(30);function T(e){return e.substring(2).toLowerCase()}var N=function(e){var t=e.children,n=e.disableReactTree,r=void 0!==n&&n,o=e.mouseEvent,i=void 0===o?"onClick":o,a=e.onClickAway,c=e.touchEvent,u=void 0===c?"onTouchEnd":c,l=s.useRef(!1),d=s.useRef(null),b=s.useRef(!1),v=s.useRef(!1);s.useEffect((function(){return setTimeout((function(){b.current=!0}),0),function(){b.current=!1}}),[]);var j=s.useCallback((function(e){d.current=C.findDOMNode(e)}),[]),f=Object(L.a)(t.ref,j),p=Object(S.a)((function(e){var t=v.current;if(v.current=!1,b.current&&d.current&&!function(e){return document.documentElement.clientWidth<e.clientX||document.documentElement.clientHeight<e.clientY}(e))if(l.current)l.current=!1;else{var n;if(e.composedPath)n=e.composedPath().indexOf(d.current)>-1;else n=!Object(A.a)(d.current).documentElement.contains(e.target)||d.current.contains(e.target);n||!r&&t||a(e)}})),O=function(e){return function(n){v.current=!0;var r=t.props[e];r&&r(n)}},m={ref:f};return!1!==u&&(m[u]=O(u)),s.useEffect((function(){if(!1!==u){var e=T(u),t=Object(A.a)(d.current),n=function(){l.current=!0};return t.addEventListener(e,p),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,p),t.removeEventListener("touchmove",n)}}}),[p,u]),!1!==i&&(m[i]=O(i)),s.useEffect((function(){if(!1!==i){var e=T(i),t=Object(A.a)(d.current);return t.addEventListener(e,p),function(){t.removeEventListener(e,p)}}}),[p,i]),s.createElement(s.Fragment,null,s.cloneElement(t,m))},M=n(11),P=n(75),R=n(433),I=n(224),z=n(27),D=s.forwardRef((function(e,t){var n=e.action,r=e.classes,o=e.className,i=e.message,a=e.role,c=void 0===a?"alert":a,u=Object(x.a)(e,["action","classes","className","message","role"]);return s.createElement(I.a,Object(y.a)({role:c,square:!0,elevation:6,className:Object(E.a)(r.root,o),ref:t},u),s.createElement("div",{className:r.message},i),n?s.createElement("div",{className:r.action},n):null)})),B=Object(k.a)((function(e){var t="light"===e.palette.type?.8:.98,n=Object(z.b)(e.palette.background.default,t);return{root:Object(y.a)({},e.typography.body2,Object(g.a)({color:e.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288})),message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiSnackbarContent"})(D),F=s.forwardRef((function(e,t){var n=e.action,r=e.anchorOrigin,o=(r=void 0===r?{vertical:"bottom",horizontal:"center"}:r).vertical,i=r.horizontal,a=e.autoHideDuration,c=void 0===a?null:a,u=e.children,l=e.classes,d=e.className,b=e.ClickAwayListenerProps,v=e.ContentProps,j=e.disableWindowBlurListener,f=void 0!==j&&j,p=e.message,O=e.onClose,m=e.onEnter,h=e.onEntered,g=e.onEntering,k=e.onExit,C=e.onExited,A=e.onExiting,L=e.onMouseEnter,T=e.onMouseLeave,I=e.open,z=e.resumeHideDuration,D=e.TransitionComponent,F=void 0===D?R.a:D,V=e.transitionDuration,W=void 0===V?{enter:w.b.enteringScreen,exit:w.b.leavingScreen}:V,H=e.TransitionProps,q=Object(x.a)(e,["action","anchorOrigin","autoHideDuration","children","classes","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onEnter","onEntered","onEntering","onExit","onExited","onExiting","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"]),G=s.useRef(),Q=s.useState(!0),J=Q[0],X=Q[1],_=Object(S.a)((function(){O&&O.apply(void 0,arguments)})),Y=Object(S.a)((function(e){O&&null!=e&&(clearTimeout(G.current),G.current=setTimeout((function(){_(null,"timeout")}),e))}));s.useEffect((function(){return I&&Y(c),function(){clearTimeout(G.current)}}),[I,c,Y]);var $=function(){clearTimeout(G.current)},K=s.useCallback((function(){null!=c&&Y(null!=z?z:.5*c)}),[c,z,Y]);return s.useEffect((function(){if(!f&&I)return window.addEventListener("focus",K),window.addEventListener("blur",$),function(){window.removeEventListener("focus",K),window.removeEventListener("blur",$)}}),[f,K,I]),!I&&J?null:s.createElement(N,Object(y.a)({onClickAway:function(e){O&&O(e,"clickaway")}},b),s.createElement("div",Object(y.a)({className:Object(E.a)(l.root,l["anchorOrigin".concat(Object(M.a)(o)).concat(Object(M.a)(i))],d),onMouseEnter:function(e){L&&L(e),$()},onMouseLeave:function(e){T&&T(e),K()},ref:t},q),s.createElement(F,Object(y.a)({appear:!0,in:I,onEnter:Object(P.a)((function(){X(!1)}),m),onEntered:h,onEntering:g,onExit:k,onExited:Object(P.a)((function(){X(!0)}),C),onExiting:A,timeout:W,direction:"top"===o?"down":"up"},H),u||s.createElement(B,Object(y.a)({message:p,action:n},v)))))})),V=Object(k.a)((function(e){var t={top:8},n={bottom:8},r={justifyContent:"flex-end"},o={justifyContent:"flex-start"},i={top:24},a={bottom:24},c={right:24},u={left:24},s={left:"50%",right:"auto",transform:"translateX(-50%)"};return{root:{zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},anchorOriginTopCenter:Object(y.a)({},t,Object(g.a)({},e.breakpoints.up("sm"),Object(y.a)({},i,s))),anchorOriginBottomCenter:Object(y.a)({},n,Object(g.a)({},e.breakpoints.up("sm"),Object(y.a)({},a,s))),anchorOriginTopRight:Object(y.a)({},t,r,Object(g.a)({},e.breakpoints.up("sm"),Object(y.a)({left:"auto"},i,c))),anchorOriginBottomRight:Object(y.a)({},n,r,Object(g.a)({},e.breakpoints.up("sm"),Object(y.a)({left:"auto"},a,c))),anchorOriginTopLeft:Object(y.a)({},t,o,Object(g.a)({},e.breakpoints.up("sm"),Object(y.a)({right:"auto"},i,u))),anchorOriginBottomLeft:Object(y.a)({},n,o,Object(g.a)({},e.breakpoints.up("sm"),Object(y.a)({right:"auto"},a,u)))}}),{flip:!1,name:"MuiSnackbar"})(F),W=n(151),H=n(385),q=Object(W.a)((function(){return Object(H.a)({snackbarStyle:{backgroundColor:"#6d1331","&:hover":{backgroundColor:"rgb(100, 10, 40)",cursor:"pointer"}}})})),G=function(e){var t=q(),n=s.useState(!0),o=Object(u.a)(n,2),i=o[0],a=o[1];return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(V,{anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"primary",open:i,autoHideDuration:6e3,onClose:function(e,t){a(!1)},onClick:e.onClick,ContentProps:{className:t.snackbarStyle},message:"Vuoi creare un annuncio?"})})},Q=n(35),J=n(452),X=n(478),_=n(455),Y=n(454);t.default=function(){var e,t,n,o,x,g,y=Object(Q.a)(),E=Object(X.a)(y.breakpoints.up("sm"))?400:250,k=Object(p.e)(),w=s.useState([]),C=Object(u.a)(w,2),A=C[0],L=C[1],S=s.useState([]),T=Object(u.a)(S,2),N=T[0],M=T[1],P=s.useState(f.i.CreatedAtDesc),R=Object(u.a)(P,2),I=R[0],z=R[1],D=Object(f.p)({variables:{offset:0,limit:4,orderBy:I,wineName:null===k||void 0===k?void 0:k.wineName,typeProduct:null===k||void 0===k?void 0:k.typeProduct,typeAd:(null===k||void 0===k?void 0:k.typeAd)===f.k.Buy?f.k.Sell:f.k.Buy},onError:function(e){return Object(p.d)({type:"error",message:e.message})}}),B=Object(u.a)(D,2),F=B[0],V=B[1];s.useEffect((function(){(null===k||void 0===k?void 0:k.wineName)?F():Object(j.c)("/")}),[k]),s.useEffect((function(){var e;(null===(e=V.data)||void 0===e?void 0:e.ads)&&L(V.data.ads.ads)}),[V.data]),s.useEffect((function(){V.fetchMore&&A&&A.length&&V.fetchMore({variables:{orderBy:I,limit:A.length}}).catch((function(e){return console.log(e)}))}),[I]);var W=function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==k){e.next=4;break}return e.abrupt("return");case 4:return Object(p.e)(Object(a.a)(Object(a.a)({},k),{},{isPost:!0})),t=k.typeAd===f.k.Buy?"/buy":"/sell",e.next=8,Object(j.c)(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){return Object(r.jsx)("div",{onClick:W,children:"Non abbiamo trovato nulla, vuoi creare un annuncio?"})};if((null===(e=V.data)||void 0===e?void 0:e.ads)&&0===(null===(t=V.data)||void 0===t||null===(n=t.ads)||void 0===n?void 0:n.pageCount))return Object(r.jsx)(H,{});var q,$,K=function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V.fetchMore){e.next=9;break}return e.prev=1,e.next=4,V.fetchMore({variables:{offset:null===(t=V.data)||void 0===t||null===(n=t.ads)||void 0===n||null===(r=n.ads)||void 0===r?void 0:r.length,orderBy:I}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return 0===(null===A||void 0===A?void 0:A.length)?Object(r.jsx)("div",{children:"Non hai ancora creato annunci"}):A&&A.length&&0!==(null===(o=V.data)||void 0===o||null===(x=o.ads)||void 0===x||null===(g=x.ads)||void 0===g?void 0:g.length)?Object(r.jsxs)(v.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(b.a,{}),Object(r.jsx)(m.a,{}),Object(r.jsx)(l.a,{color:"primary",component:"h3",variant:"h5",children:"La tua ricerca"}),Object(r.jsxs)(J.a,{typeAd:null===k||void 0===k?void 0:k.typeAd,width:E,children:[Object(r.jsxs)(l.a,{component:"h5",variant:"h6",children:[(null===k||void 0===k?void 0:k.typeAd)===f.k.Buy?"Compro ":"Vendo"," ",null===k||void 0===k?void 0:k.wineName]}),Object(r.jsxs)(l.a,{align:"left",variant:"body1",children:["Annata: ".concat(null===k||void 0===k?void 0:k.harvest),Object(r.jsx)("br",{}),"Gradazione: ".concat(null===k||void 0===k?void 0:k.abv," % Vol"),Object(r.jsx)("br",{}),"Quantit\xe0: ".concat(null===k||void 0===k?void 0:k.liters," l"),Object(r.jsx)("br",{}),"Prezzo: ".concat(null===k||void 0===k?void 0:k.price," euro al litro")]})]}),Object(r.jsx)("br",{}),Object(r.jsx)(l.a,{color:"primary",component:"h3",variant:"h5",children:"I nostri risultati"}),Object(r.jsx)(l.a,{variant:"body2",children:N&&N.length>0?"Questi sono gli annunci che abbiamo trovato per te: sono stati pubblicati da utenti interessati all'acquisto.":"Non abbiamo trovato nulla che corrisponde ai criteri di ricerca, ma esistono annunci per questo vino, clicca su filtri e mostra tutto per vederli"}),Object(r.jsx)(h.a,{setList:L,list:A,setFilteredList:M}),Object(r.jsx)(_.a,{setOrder:z,order:I}),Object(r.jsx)("br",{}),Object(r.jsxs)(Y.a,{fetchMore:K,isVisible:A.length!==(null===(q=V.data)||void 0===q||null===($=q.ads)||void 0===$?void 0:$.pageCount),isLoading:V.loading,children:[" ",N&&N.map((function(e){return Object(r.jsx)(O.a,{ad:e},e&&e._id)}))]}),Object(r.jsx)(G,{onClick:W})]}):Object(r.jsx)(d.a,{})}}}]);
//# sourceMappingURL=9.6ab57652.chunk.js.map