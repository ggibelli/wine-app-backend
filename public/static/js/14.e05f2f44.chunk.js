(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[14],{480:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(458),i=(n(0),n(42)),o=n(481),r=n.n(o),c=n(3),l=function(){return Object(c.jsx)(a.a,{"aria-label":"previous-page",color:"primary",size:"large",startIcon:Object(c.jsx)(r.a,{}),onClick:function(){return Object(i.c)(-1)},children:"Torna indietro"})}},481:function(e,t,n){"use strict";var a=n(52),i=n(53);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(0)),r=(0,a(n(54)).default)(o.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");t.default=r},486:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(31),i=n(0),o=n(458),r=n(468),c=n(472),l=n(469),s=n(55),d=n.n(s),u=n(81),j=n(18),b=n(13),v=n(3),p=function(e){var t=e.id,n=e.handleClose,i=Object(b.M)({onCompleted:function(e){var t,n;if(null===(t=e.updateNegotiation)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var a,i=null===(a=e.updateNegotiation)||void 0===a?void 0:a.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(j.d)({type:"error",message:"".concat(i.toString())})}else Object(j.d)({message:"trattativa chiusa con successo",type:"success"})},onError:function(e){return Object(j.d)({type:"error",message:e.message})}}),r=Object(a.a)(i,2),c=r[0],l=r[1].loading,s=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,c({variables:{negotiation:{_id:t,isConcluded:!0}}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(o.a,{"aria-label":"close-negotiation",disabled:l,onClick:s,children:"Dichiara chiusa la trattativa"})},O=n(97),h=function(e){var t=e.id,n=e.handleClose,i=Object(b.t)({onCompleted:function(e){var t,n;if(null===(t=e.deleteNegotiation)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var a,i=null===(a=e.deleteNegotiation)||void 0===a?void 0:a.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(j.d)({type:"error",message:"".concat(i.toString())})}else Object(j.d)({message:"trattativa cancellata con successo",type:"info"})},onError:function(e){return Object(j.d)({type:"error",message:e.message})},update:function(e,t){var n,a=t.data;Object(O.g)(e,null===a||void 0===a||null===(n=a.deleteNegotiation)||void 0===n?void 0:n.response)}}),r=Object(a.a)(i,2),c=r[0],l=r[1].loading,s=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,c({variables:{id:t}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(o.a,{"aria-label":"cancel-negotiation",disabled:l,onClick:s,children:"Cancella la trattativa"})},f=n(140),g=function(e){var t=e.id,n=e.isBuy,s=e.isMessage,d=Object(f.c)(),u=i.useState(!1),j=Object(a.a)(u,2),b=j[0],O=j[1],g=function(){O(!1)};return n=!!s,Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(o.a,{fullWidth:!0,"aria-label":"close-negotiation-popup",className:n?d.buyButton:d.sellButton,onClick:function(){O(!0)},children:"Chiudi trattativa"}),Object(v.jsx)("div",{style:{display:"none"},children:Object(v.jsxs)(r.a,{open:b,onClose:g,"aria-labelledby":"close-negotiation",children:[Object(v.jsxs)(l.a,{children:[Object(v.jsx)(h,{id:t,handleClose:g}),Object(v.jsx)(p,{id:t,handleClose:g})]}),Object(v.jsx)(c.a,{children:Object(v.jsx)(o.a,{onClick:g,color:"primary",children:"Cancel"})})]})})]})}},487:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(31),i=n(458),o=n(0),r=n(13),c=n(140),l=n(473),s=n(468),d=n(469),u=n(472),j=n(401),b=n(494),v=n(18),p=n(3),O=function(e){var t=e.review,n=e.disabled,o=e.closeModal,c=Object(r.r)({onCompleted:function(e){var t,n;if(null===(t=e.createReview)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var a,i=null===(a=e.createReview)||void 0===a?void 0:a.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(v.d)({type:"error",message:"".concat(i.toString())})}else Object(v.d)({type:"success",message:"Recensione creata con successo"})},onError:function(e){return Object(v.d)({type:"error",message:e.message})}}),l=Object(a.a)(c,2),s=l[0],d=l[1].loading;return Object(p.jsx)(i.a,{disabled:n||d,"aria-label":"review",onClick:function(){o&&o(),s({variables:{review:t}})},color:"primary",children:"Recensisci"})},h={.5:"Useless",1:"Useless+",1.5:"Poor",2:"Poor+",2.5:"Ok",3:"Ok+",3.5:"Good",4:"Good+",4.5:"Excellent",5:"Excellent+"},f=function(e){var t=e.idUser,n=e.idNegotiation,v=e.type,f=e.isMessage,g=o.useState(!1),m=Object(a.a)(g,2),x=m[0],y=m[1],C=o.useState(2),w=Object(a.a)(C,2),N=w[0],k=w[1],B=o.useState(-1),S=Object(a.a)(B,2),E=S[0],M=S[1],_=o.useState(""),R=Object(a.a)(_,2),P=R[0],U=R[1],z=Object(c.c)(),L=Object(c.d)(),T=Object(c.b)(),A=function(){y(!1)};return v=f?r.i.Sell:v,Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(i.a,{fullWidth:!0,"aria-label":"review",className:v===r.i.Buy?z.buyButton:z.sellButton,onClick:function(){y(!0)},children:"Lascia una recensione"}),Object(p.jsx)("div",{style:{display:"none"},children:Object(p.jsxs)(s.a,{open:x,onClose:A,"aria-labelledby":"form-dialog-title",children:[Object(p.jsx)(b.a,{id:"form-dialog-title",children:"Recensisci la trattativa"}),Object(p.jsxs)(d.a,{children:[Object(p.jsxs)("div",{className:T.root,children:[Object(p.jsx)(c.a,{name:"hover-feedback",value:N,precision:.5,onChange:function(e,t){k(t)},onChangeActive:function(e,t){M(t)}}),null!==N&&Object(p.jsx)(l.a,{ml:2,children:h[-1!==E?E:N]})]}),Object(p.jsx)(j.a,{color:"primary",multiline:!0,rows:4,value:P,error:P.length>0&&P.length<=5,helperText:"Lunghezza minima 5 caratteri",onChange:function(e){U(e.target.value)},InputLabelProps:{style:{color:"#6d1331"}},InputProps:{className:L.inputSell,classes:{underline:L.underlineSell}},id:"outlined-multiline-flexible",label:"Recensione",placeholder:"Ottima persona con cui...."})]}),Object(p.jsxs)(u.a,{children:[Object(p.jsx)(i.a,{"aria-label":"close-modal",onClick:A,color:"primary",children:"Cancel"}),Object(p.jsx)(O,{disabled:P.length<=5,review:{forUser:t,rating:N,negotiation:n,content:P,type:v},closeModal:A})]})]})})]})}},494:function(e,t,n){"use strict";var a=n(1),i=n(4),o=n(0),r=(n(8),n(5)),c=n(6),l=n(94),s=o.forwardRef((function(e,t){var n=e.children,c=e.classes,s=e.className,d=e.disableTypography,u=void 0!==d&&d,j=Object(i.a)(e,["children","classes","className","disableTypography"]);return o.createElement("div",Object(a.a)({className:Object(r.a)(c.root,s),ref:t},j),u?n:o.createElement(l.a,{component:"h2",variant:"h6"},n))}));t.a=Object(c.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(s)},552:function(e,t,n){"use strict";n.r(t);n(0);var a=n(42),i=n(13),o=n(470),r=n(455),c=n(480),l=n(458),s=n(94),d=n(140),u=n(164),j=n(487),b=n(486),v=n(3);t.default=function(){var e,t,n,p,O,h=Object(a.e)().id,f=Object(d.c)(),g=Object(i.F)({variables:{id:h}}),m=g.data,x=g.loading,y=g.error,C="AdWine"===(null===m||void 0===m||null===(e=m.negotiation)||void 0===e?void 0:e.ad.__typename)?null===m||void 0===m||null===(t=m.negotiation)||void 0===t?void 0:t.ad:null,w=function(){return(null===C||void 0===C?void 0:C.postedBy.hideContact)?null:Object(v.jsxs)("div",{"data-testid":"info-contact",children:["puoi contattare l utente al numero: ",null===C||void 0===C?void 0:C.postedBy.phoneNumber," o alla mail ",null===C||void 0===C?void 0:C.postedBy.email]})};return y?Object(v.jsx)("div",{children:y.message}):x?Object(v.jsx)(u.a,{}):Object(v.jsxs)(o.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(r.a,{}),Object(v.jsx)(c.a,{}),Object(v.jsxs)("div",{className:f.paper,children:[Object(v.jsx)(s.a,{color:"primary",component:"h3",variant:"h5",children:"Gestisci la trattativa"}),Object(v.jsx)(s.a,{color:"secondary",variant:"body1",children:"Puoi decidere se contattare l utente tramite il nostro portale o usando i suoi contatti"})]}),Object(v.jsx)(w,{}),Object(v.jsxs)(s.a,{color:"secondary",variant:"body1",children:["Questa trattativa riguarda l annuncio per ",null===C||void 0===C?void 0:C.wineName," ",null===C||void 0===C||null===(n=C.wine)||void 0===n?void 0:n.denominazioneZona]}),(null===m||void 0===m||null===(p=m.negotiation)||void 0===p?void 0:p.isConcluded)?Object(v.jsx)(j.a,{idNegotiation:m.negotiation._id,idUser:m.negotiation.forUserAd._id,type:m.negotiation.type}):Object(v.jsx)(b.a,{id:h}),Object(v.jsx)(l.a,{"aria-label":"open-chat",className:f.sellButton,component:a.a,to:"/messaggi/".concat(null===m||void 0===m||null===(O=m.negotiation)||void 0===O?void 0:O._id),children:"Vai alla chat"})]})}}}]);