{"version":3,"sources":["containers/StyledBox.tsx","../node_modules/@material-ui/icons/FavoriteBorder.js","containers/FavoriteButton.tsx","components/Cards/CardWine.tsx","pages/SavedAds.tsx"],"names":["StyledBox","props","sellColor","notActive","buyColor","boxShadow","p","m","mt","px","pt","width","color","typeAd","TypeAd","Sell","borderColor","bgcolor","borderRadius","children","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","FavoriteButton","id","fontSize","timesFavorite","data","useMyInfoQuery","useSaveAdMutation","variables","onCompleted","setIsFav","isFav","onError","error","console","update","cache","updateCacheSaveAd","saveAd","response","stop","setStop","myInfo","savedAds","map","ad","_id","includes","IconButton","aria-label","onClick","size","CardWine","theme","useTheme","useMediaQuery","breakpoints","up","isBuy","Buy","pointerEvent","isActive","me","myAd","ads","data-testid","Link","style","pointerEvents","display","component","RouterLink","to","underline","Typography","variant","wineName","align","harvest","abv","litersTo","priceFrom","Grid","container","justify","datePosted","numberViews","activeNegotiations","Button","searchedWine","typeProduct","TypeProduct","AdWine","wine","undefined","navigate","savedTimes","SavedAds","useFavoriteQuery","loading","length","maxWidth"],"mappings":"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","file":"static/js/10.79262b65.chunk.js","sourcesContent":["import * as React from 'react';\nimport Box from '@material-ui/core/Box';\nimport { TypeAd } from '../generated/graphql';\n\ninterface BoxProps {\n  width: number;\n  typeAd: TypeAd;\n  children: React.ReactNode;\n  notActive?: boolean;\n}\n\nexport const StyledBox: React.FC<BoxProps> = (props) => {\n  const sellColor = props.notActive ? '#b2b2b2' : 'white';\n  const buyColor = props.notActive ? '#8a425a' : 'primary.main';\n\n  return (\n    <Box\n      boxShadow={3}\n      p={2}\n      m={2}\n      mt={2}\n      px={2}\n      pt={2}\n      width={props.width}\n      color={props.typeAd === TypeAd.Sell ? 'primary.main' : 'white'}\n      borderColor={props.typeAd === TypeAd.Sell ? 'white' : 'primary.main'}\n      bgcolor={props.typeAd === TypeAd.Sell ? sellColor : buyColor}\n      borderRadius={16}\n    >\n      {props.children}\n    </Box>\n  );\n};\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z\"\n}), 'FavoriteBorder');\n\nexports.default = _default;","import * as React from 'react';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport IconButton from '@material-ui/core/IconButton';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport { useSaveAdMutation, useMyInfoQuery } from '../generated/graphql';\nimport { updateCacheSaveAd } from '../utils/updateCache';\n\ntype FontSize = 'small' | 'inherit' | 'default' | 'large';\n\nexport const FavoriteButton: React.FC<{\n  id: string;\n  timesFavorite: number;\n  fontSize?: FontSize;\n}> = ({ id, fontSize = 'default', timesFavorite }) => {\n  const { data } = useMyInfoQuery();\n  const [saveAd] = useSaveAdMutation({\n    variables: { id },\n    onCompleted: () => {\n      setIsFav(!isFav);\n    },\n    onError: (error) => console.error(error),\n    update: (cache, { data }) => {\n      updateCacheSaveAd(cache, data?.saveAd?.response);\n    },\n  });\n  const [stop, setStop] = React.useState<boolean>(false);\n  const [isFav, setIsFav] = React.useState<boolean>(\n    data?.myInfo?.savedAds?.map((ad) => ad._id).includes(id) || false\n  );\n  React.useEffect(() => {\n    if (data?.myInfo?.savedAds && !stop) {\n      setIsFav(\n        data?.myInfo?.savedAds?.map((ad) => ad._id).includes(id) || false\n      );\n      setStop(true);\n    }\n  }, [data]);\n\n  return (\n    <IconButton aria-label='save' onClick={() => saveAd()} size='small'>\n      {isFav ? (\n        <FavoriteIcon fontSize={fontSize} />\n      ) : (\n        <FavoriteBorderIcon fontSize={fontSize} />\n      )}\n      {timesFavorite}\n    </IconButton>\n  );\n};\n","import * as React from 'react';\nimport { StyledBox } from '../../containers/StyledBox';\nimport Typography from '@material-ui/core/Typography';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport Link from '@material-ui/core/Link';\nimport { Link as RouterLink, navigate } from '@reach/router';\nimport { TypeAd, TypeProduct } from '../../generated/graphql';\nimport { useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { AdsWineResult } from '../../types';\nimport Grid from '@material-ui/core/Grid';\nimport { HandshakeOutline } from 'mdi-material-ui';\nimport { FavoriteButton } from '../../containers/FavoriteButton';\nimport { Button } from '@material-ui/core';\nimport { myInfo, searchedWine } from '../../cache';\n\nexport const CardWine: React.FC<{ ad: AdsWineResult }> = ({ ad }) => {\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n  const width = matches ? 400 : 250;\n  const isBuy = ad?.typeAd === TypeAd.Buy ? true : false;\n  const pointerEvent = ad?.isActive ? 'auto' : 'none';\n  const me = myInfo();\n  const myAd = me?.ads?.map((ad) => ad._id).includes(ad._id);\n  const handleClick = () => {\n    searchedWine({\n      ...ad,\n      typeProduct: TypeProduct.AdWine,\n      wine: undefined,\n    });\n    void navigate('/annunci');\n  };\n  return (\n    <>\n      <StyledBox\n        data-testid='card-wine'\n        width={width}\n        typeAd={ad.typeAd}\n        notActive={!ad.isActive}\n      >\n        <Link\n          aria-label='link-ad'\n          style={{ pointerEvents: pointerEvent, display: 'block' }}\n          component={RouterLink}\n          to={`/annunci/${ad._id}`}\n          underline='none'\n        >\n          <Typography\n            component='h5'\n            variant='h6'\n            color={isBuy ? 'textSecondary' : 'primary'}\n          >\n            {isBuy ? 'Compro' : 'Vendo'} {ad.wineName}{' '}\n            {/* {ad.wine.denominazioneZona} */}\n          </Typography>\n          <Typography\n            align='left'\n            variant='body1'\n            color={isBuy ? 'textSecondary' : 'primary'}\n          >\n            Annata: {ad.harvest}\n            <br />\n            Gradazione: {ad.abv} % Vol\n            <br />\n            Quantità: {ad.litersTo} l\n            <br />\n            Prezzo: {ad.priceFrom} €/l\n          </Typography>\n        </Link>\n        <br />\n        <Grid container justify='space-between'>\n          {' '}\n          <Typography\n            data-testid='published'\n            align='right'\n            variant='caption'\n            color={isBuy ? 'textSecondary' : 'primary'}\n          >\n            pubblicato il {ad.datePosted}\n          </Typography>\n          <div style={{ color: 'secondary' }}>\n            <VisibilityIcon fontSize='small' />\n            {ad?.numberViews}\n            <HandshakeOutline fontSize='small' />\n            {ad?.activeNegotiations}\n          </div>\n        </Grid>\n      </StyledBox>\n      <Grid container justify='space-between'>\n        <div>\n          {myAd ? <Button onClick={handleClick}>Cerca di nuovo</Button> : null}\n        </div>\n        <div>\n          <FavoriteButton\n            id={ad._id}\n            fontSize='small'\n            timesFavorite={ad?.savedTimes || 0}\n          />\n        </div>\n\n        {/* <Typography align='right' variant='caption'></Typography> */}\n      </Grid>\n    </>\n  );\n};\n","import Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport { RouteComponentProps } from '@reach/router';\nimport * as React from 'react';\nimport { BackButton } from '../components/BackButton';\nimport { CardWine } from '../components/Cards/CardWine';\nimport { Loading } from '../components/Loading';\nimport { useFavoriteQuery } from '../generated/graphql';\nimport { AdsWineResult } from '../types';\n\nconst SavedAds: React.FC<RouteComponentProps> = () => {\n  const { data, loading, error } = useFavoriteQuery();\n  if (loading) return <Loading />;\n  if (error || !data?.me?.savedAds) return <div>error</div>;\n  if (data?.me?.savedAds.length === 0)\n    return <div>Non hai ancora salvato annunci</div>;\n  return (\n    <Container component='main' maxWidth='xs'>\n      <CssBaseline />\n      <BackButton />\n      <br />\n      <Typography color='primary' component='h3' variant='h5'>\n        Gli annunci che hai salvato\n      </Typography>\n      <br />\n      {data?.me?.savedAds.map((ad) => (\n        <CardWine key={ad._id} ad={ad as AdsWineResult} />\n      ))}\n    </Container>\n  );\n};\n\nexport default SavedAds;\n"],"sourceRoot":""}