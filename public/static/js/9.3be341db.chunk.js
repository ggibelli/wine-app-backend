(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[9],{484:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(3),i=(r(1),r(479)),a=r(0),o=function(e){var t=e.notActive?"#b2b2b2":"white",r=e.notActive?"#8a425a":"primary.main";return Object(n.jsx)(i.a,{boxShadow:3,p:2,m:2,mt:2,px:2,pt:2,width:e.width,color:e.typeAd===a.k.Sell?"primary.main":"white",borderColor:e.typeAd===a.k.Sell?"white":"primary.main",bgcolor:e.typeAd===a.k.Sell?t:r,borderRadius:16,children:e.children})}},485:function(e,t,r){"use strict";var n=r(55),i=r(56);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(r(1)),o=(0,n(r(57)).default)(a.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.default=o},486:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(3),i=r(21),a=r(32),o=r(1),c=r(485),s=r.n(c),l=r(141),d=r(256),u=r(410),j=Object(l.a)((function(){return Object(d.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"}})})),v=function(e){var t=j(),r="messaggi"===Object(a.d)().pathname.split("/")[1],c=function(e){var t=e.root,r=void 0===t?null:t,n=e.rootMargin,a=void 0===n?"0px":n,c=e.threshold,s=void 0===c?0:c,l=o.useState(null),d=Object(i.a)(l,2),u=d[0],j=d[1],v=o.useState(null),b=Object(i.a)(v,2),h=b[0],f=b[1],O=o.useRef(null);return o.useEffect((function(){O.current&&O.current.disconnect(),O.current=new window.IntersectionObserver((function(e){var t=Object(i.a)(e,1)[0];return j(t)}),{root:r,rootMargin:a,threshold:s});var e=O.current;return h&&e.observe(h),function(){return e.disconnect()}}),[h,r,a,s]),[f,u]}({threshold:0}),l=Object(i.a)(c,2),d=l[0],v=l[1],b=o.useState(!0),h=Object(i.a)(b,2),f=h[0],O=h[1];return o.useEffect((function(){v&&(null===v||void 0===v?void 0:v.intersectionRatio)>0&&f?(e.fetchMore(),e.setIsLoading&&e.setIsLoading(!0),O(!1)):0!==(null===v||void 0===v?void 0:v.intersectionRatio)||f||(O(!0),e.setIsLoading&&e.setIsLoading(!1))}),[null===v||void 0===v?void 0:v.intersectionRatio]),r?Object(n.jsxs)(n.Fragment,{children:[e.isVisible?e.isLoading?Object(n.jsx)("div",{className:t.root,children:Object(n.jsx)(u.a,{})}):Object(n.jsxs)("div",{className:t.root,id:"page-bottom-boundary",ref:d,children:[" ",Object(n.jsx)(s.a,{})]}):null,e.children]}):Object(n.jsxs)("div",{className:t.root,children:[e.children,e.isVisible?e.isLoading?Object(n.jsx)(u.a,{}):Object(n.jsxs)("div",{id:"page-bottom-boundary",ref:d,style:{height:30},children:[" ",Object(n.jsx)(s.a,{})]}):null]})}},487:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(3),i=(r(1),r(414)),a=r(167),o=r(258),c=r(0),s=function(e){return Object(n.jsxs)(a.a,{fullWidth:!0,children:[Object(n.jsx)(o.a,{style:{color:"black"},htmlFor:"order",children:"Ordine risultati"}),Object(n.jsxs)(i.a,{native:!0,value:e.order,onChange:function(t){e.setOrder(t.target.value)},inputProps:{name:"order",id:"order"},children:[Object(n.jsx)("option",{value:c.i.CreatedAtDesc,children:"Dal piu recente"}),Object(n.jsx)("option",{value:c.i.CreatedAtAsc,children:"Dal meno recente"}),e.isAds?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("option",{value:c.i.PriceDesc,children:"Dal piu caro"}),Object(n.jsx)("option",{value:c.i.PriceAsc,children:"Dal meno caro"})]}):null]})]})}},543:function(e,t,r){"use strict";r.r(t);var n=r(3),i=r(47),a=r.n(i),o=r(53),c=r(71),s=r(21),l=r(1),d=r(88),u=r(467),j=r(466),v=r(0),b=r(172),h=r(487),f=r(486),O=r(484),p=r(39),x=r(475),m=r(20),g=r(417),y=function(e){var t=e.review,r=Object(m.c)(),i=Object(p.a)(),a=Object(x.a)(i.breakpoints.up("sm"))?400:250,o=(null===t||void 0===t?void 0:t.type)===v.k.Buy,c=(null===t||void 0===t?void 0:t.createdBy._id)===(null===r||void 0===r?void 0:r._id);return t?Object(n.jsxs)(O.a,{width:a,typeAd:t.type,children:[Object(n.jsx)(g.a,{name:"read-only",value:t.rating,readOnly:!0,precision:.1}),Object(n.jsxs)(d.a,{align:"left",variant:"h6",color:o?"textSecondary":"primary",children:[c?"Cosa hai detto della cantina ".concat(t.forUser.firstName):"La cantina ".concat(t.createdBy.firstName," dice di te"),":"]}),Object(n.jsx)("br",{}),Object(n.jsx)(d.a,{align:"left",variant:"body1",color:o?"textSecondary":"primary",children:t.content}),Object(n.jsxs)(d.a,{"data-testid":"date",align:"right",variant:"caption",color:o?"textSecondary":"primary",children:["Recensito il ",t.dateCreated]})]}):null},w=r(112);t.default=function(){var e=l.useState([]),t=Object(s.a)(e,2),r=t[0],i=t[1],O=l.useState(v.i.CreatedAtDesc),p=Object(s.a)(O,2),x=p[0],m=p[1],g=l.useState(!1),S=Object(s.a)(g,2),A=S[0],k=S[1],C=l.useState(!1),L=Object(s.a)(C,2),D=L[0],M=L[1],B=Object(v.M)({variables:{offset:0,limit:4,orderBy:v.i.CreatedAtDesc},onError:function(e){return console.error(e)},onCompleted:function(e){var t=e.reviews;return i(null===t||void 0===t?void 0:t.reviews)}}),E=B.data,I=B.error,N=B.loading,R=B.fetchMore;if(l.useEffect((function(){(null===r||void 0===r?void 0:r.length)&&R&&(M(!0),R({variables:{orderBy:x,limit:r.length}}).then((function(e){var t,r=e.data;i(null===(t=r.reviews)||void 0===t?void 0:t.reviews),M(!1)})).catch((function(e){console.error(e),M(!1)})))}),[x]),I)return Object(n.jsx)("div",{children:"error"});if(N)return Object(n.jsx)(w.a,{});if(0===(null===r||void 0===r?void 0:r.length))return Object(n.jsx)("div",{children:"Non hai ancora recensioni"});if(null===r||void 0===r?void 0:r.length){var _,P=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=15;break}return e.prev=1,k(!0),e.next=5,R({variables:{offset:null===r||void 0===r?void 0:r.length,orderBy:x}});case 5:n=e.sent,c=n.data,i([].concat(Object(o.a)(r),Object(o.a)(null===(t=c.reviews)||void 0===t?void 0:t.reviews))),k(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),k(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(j.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(u.a,{}),Object(n.jsx)(b.a,{}),Object(n.jsx)("br",{}),Object(n.jsx)(d.a,{color:"primary",component:"h3",variant:"h5",children:"Le tue recensioni"}),Object(n.jsx)("br",{}),Object(n.jsx)(h.a,{setOrder:m,order:x}),D?Object(n.jsx)(w.a,{}):Object(n.jsxs)(f.a,{fetchMore:P,isVisible:(null===r||void 0===r?void 0:r.length)!==(null===E||void 0===E||null===(_=E.reviews)||void 0===_?void 0:_.pageCount),isLoading:A,children:[" ",null===r||void 0===r?void 0:r.map((function(e){return Object(n.jsx)(y,{review:e},e&&e._id)}))]})]})}return Object(n.jsx)("div",{children:"Grave errore"})}}}]);
//# sourceMappingURL=9.3be341db.chunk.js.map