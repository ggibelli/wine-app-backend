{"version":3,"sources":["components/BackButton.tsx","components/StyledBox.tsx","components/InfiniteScrollFetch.tsx","utils/useIntersectionHook.tsx","components/FilterAds/Order.tsx","containers/CloseNegotiationButton.tsx","components/FilterAds/index.tsx","utils/multiFilter.ts","containers/CreateReview.tsx","../node_modules/@material-ui/core/esm/DialogTitle/DialogTitle.js","components/CardNegotiation.tsx","pages/Negotiations.tsx"],"names":["BackButton","searchedWineCache","searchedWine","pathname","useLocation","split","component","Link","to","color","size","startIcon","typeAd","TypeAd","Buy","Sell","onClick","navigate","StyledBox","props","sellColor","notActive","buyColor","boxShadow","p","m","mt","px","pt","width","borderColor","bgcolor","borderRadius","children","useStyles","makeStyles","createStyles","root","display","flexDirection","alignItems","InfiniteScroll","classes","message","rootMargin","threshold","React","entry","setEntry","node","setNode","observer","current","disconnect","window","IntersectionObserver","currentObserver","observe","useIntersect","ref","isOk","setIsOk","intersectionRatio","fetchMore","setIsLoading","isVisible","className","id","isLoading","CircularProgress","style","height","Order","fullWidth","htmlFor","native","value","order","onChange","event","setOrder","target","inputProps","name","aria-label","QueryOrderBy","CreatedAtDesc","CreatedAtAsc","PriceDesc","PriceAsc","CloseNegotiationButton","isBuy","useUpdateNegotiationMutation","onCompleted","closedNegotiation","updateNegotiation","errors","length","errorMessages","map","error","text","notification","type","toString","onError","closeNegotiation","loading","handleCloseNegotiation","a","variables","negotiation","_id","isConcluded","buyButton","sellButton","disabled","PurpleCheckbox","withStyles","deepPurple","checked","Checkbox","Filter","isShowAll","setIsShowAll","showFilter","setShowFilter","priceTo","price","abv","harvest","litersTo","liters","filterAds","setFilterAds","list","filtredAds","array","filters","filterKeys","Object","keys","filter","item","every","key","multiFilter","setFilteredList","Button","Collapse","in","Divider","FormControlLabel","control","label","labels","0.5","1","1.5","2","2.5","3","3.5","4","4.5","5","CreateReview","idUser","idNegotiation","open","setOpen","setValue","hover","setHover","review","setReview","useStylesHook","classesTextField","useStylesForms","classesStars","useStyleRating","useCreateReviewMutation","createdReview","createReview","handleClose","visibility","onClose","aria-labelledby","precision","newValue","onChangeActive","newHover","ml","multiline","rows","InputLabelProps","InputProps","inputSell","underline","underlineSell","placeholder","forUser","rating","content","DialogTitle","_props$disableTypogra","disableTypography","other","_objectWithoutProperties","_extends","clsx","Typography","variant","margin","padding","flex","CardNegotiation","me","myInfo","theme","useTheme","useMediaQuery","breakpoints","up","showCloseNeg","setShowCloseNeg","isReviewed","findIndex","createdBy","RouterLink","textDecoration","ad","__typename","wineName","align","firstName","forUserAd","dateCreated","Grid","Negotiations","useNegotiationsLazyQuery","console","log","lazyNegotiations","result","negotiations","setNegotiations","offset","limit","orderBy","data","pageCount","negotiationsData","n","catch","e","Container","maxWidth","CssBaseline","refetch","Skeleton"],"mappings":"qOAOaA,EAAuB,WAClC,IAAMC,EAAoBC,cAClBC,EAAaC,cAAbD,SACR,MAA+B,YAA3BA,EAASE,MAAM,KAAK,IAAoBF,EAASE,MAAM,KAAK,GAE5D,cAAC,IAAD,CACEC,UAAWC,IACXC,GAAG,WAEHC,MAAM,UACNC,KAAK,QACLC,UAAW,cAAC,IAAD,IANb,sBAWwB,OAAjBV,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBW,UAAWC,IAAOC,KAAoB,SAAbX,EAEnD,cAAC,IAAD,CACEG,UAAWC,IACXC,GAAG,OAEHC,MAAM,UACNC,KAAK,QACLC,UAAW,cAAC,IAAD,IANb,qBAYe,OAAjBV,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBW,UAAWC,IAAOE,MACxB,UAAbZ,EAGE,cAAC,IAAD,CACEG,UAAWC,IACXC,GAAG,QAEHC,MAAM,UACNC,KAAK,QACLC,UAAW,cAAC,IAAD,IANb,mBAaA,cAAC,IAAD,CACEF,MAAM,UACNC,KAAK,QACLC,UAAW,cAAC,IAAD,IACXK,QAAS,kBAAMC,aAAU,IAJ3B,8B,sGC3COC,EAAgC,SAACC,GAC5C,IAAMC,EAAYD,EAAME,UAAY,UAAY,QAC1CC,EAAWH,EAAME,UAAY,UAAY,eAE/C,OACE,cAAC,IAAD,CACEE,UAAW,EACXC,EAAG,EACHC,EAAG,EACHC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,MAAOV,EAAMU,MACbpB,MAAOU,EAAMP,SAAWC,IAAOE,KAAO,eAAiB,QACvDe,YAAaX,EAAMP,SAAWC,IAAOE,KAAO,QAAU,eACtDgB,QAASZ,EAAMP,SAAWC,IAAOE,KAAOK,EAAYE,EACpDU,aAAc,GAXhB,SAaGb,EAAMc,a,kJCdPC,EAAYC,aAAW,kBAC3BC,YAAa,CACXC,KAAM,CACJC,QAAS,OACTC,cAAe,SACfC,WAAY,eAKLC,EAAgD,SAACtB,GAC5D,IAAMuB,EAAUR,IAEVS,EAAqC,aADtBvC,cAAbD,SACiBE,MAAM,KAAK,GAHkC,ECvB5C,SAAC,GAOvB,IAAD,IANHgC,YAMG,MANI,KAMJ,MALHO,kBAKG,MALU,MAKV,MAJHC,iBAIG,MAJS,EAIT,IACuBC,WACxB,MAFC,mBACIC,EADJ,KACWC,EADX,OAIqBF,WAAsC,MAJ3D,mBAIIG,EAJJ,KAIUC,EAJV,KAMGC,EAAWL,SAA0C,MAkB3D,OAhBAA,aAAgB,WACVK,EAASC,SACXD,EAASC,QAAQC,aAEnBF,EAASC,QAAU,IAAIE,OAAOC,sBAC5B,gBAAER,EAAF,2BAAaC,EAASD,KACtB,CAAEV,OAAMO,aAAYC,cANF,IASHW,EAAoBL,EAA7BC,QAKR,OAHIH,GACFO,EAAgBC,QAAQR,GAEnB,kBAAMO,EAAgBH,gBAC5B,CAACJ,EAAMZ,EAAMO,EAAYC,IACrB,CAACK,EAASH,GDJIW,CAAa,CAAEb,UAAW,IAJuB,mBAI/Dc,EAJ+D,KAI1DZ,EAJ0D,OAK9CD,YAAwB,GALsB,mBAK/Dc,EAL+D,KAKzDC,EALyD,KAiBtE,OAVAf,aAAgB,WACVC,IAAc,OAALA,QAAK,IAALA,OAAA,EAAAA,EAAOe,oBAAqB,IAAOF,GACzCzC,EAAM4C,YACX5C,EAAM6C,cAAgB7C,EAAM6C,cAAa,GACzCH,GAAQ,IAC8B,KAAxB,OAALd,QAAK,IAALA,OAAA,EAAAA,EAAOe,oBAA4BF,IAC5CC,GAAQ,GACR1C,EAAM6C,cAAgB7C,EAAM6C,cAAa,MAE1C,QAACjB,QAAD,IAACA,OAAD,EAACA,EAAOe,oBACPnB,EAEA,qCACGxB,EAAM8C,UACL,sBAAKC,UAAWxB,EAAQL,KAAM8B,GAAG,uBAAuBR,IAAKA,EAA7D,UACG,IACD,cAAC,IAAD,OAEA,KACHxC,EAAMc,YAMX,sBAAKiC,UAAWxB,EAAQL,KAAxB,UACGlB,EAAMc,SACNd,EAAM8C,UACL9C,EAAMiD,UACJ,cAACC,EAAA,EAAD,IAEA,sBAAKF,GAAG,uBAAuBR,IAAKA,EAAKW,MAAO,CAAEC,OAAQ,IAA1D,UACG,IACD,cAAC,IAAD,OAGF,U,wHExDGC,EAA8B,SAACrD,GAK1C,OACE,eAAC,IAAD,CAAasD,WAAS,EAAtB,UACE,cAAC,IAAD,CAAYH,MAAO,CAAE7D,MAAO,SAAWiE,QAAQ,QAA/C,8BAGA,eAAC,IAAD,CACEC,QAAM,EACNC,MAAOzD,EAAM0D,MACbC,SAZe,SAACC,GACpB5D,EAAM6D,SAASD,EAAME,OAAOL,QAYxBM,WAAY,CACVC,KAAM,QACNhB,GAAI,SANR,UASE,wBAAQiB,aAAW,OAAOR,MAAM,KAChC,wBAAQA,MAAOS,IAAaC,cAA5B,6BACA,wBAAQV,MAAOS,IAAaE,aAA5B,8BACA,wBAAQX,MAAOS,IAAaG,UAA5B,0BACA,wBAAQZ,MAAOS,IAAaI,SAA5B,mC,yJC7BKC,EAGR,SAAC,GAAmB,IAAjBvB,EAAgB,EAAhBA,GAAIwB,EAAY,EAAZA,MACJjD,EAAUR,cADM,EAEkB0D,YAA6B,CACnEC,YAAa,SAACC,GAAuB,IAAD,IAClC,aAAIA,EAAkBC,yBAAtB,iBAAI,EAAqCC,cAAzC,aAAI,EAA6CC,OAAQ,CAAC,IAAD,EACjDC,EAAa,UAAGJ,EAAkBC,yBAArB,aAAG,EAAqCC,OAAOG,KAChE,SAACC,GAAD,cAAWA,QAAX,IAAWA,OAAX,EAAWA,EAAOC,QAEpBC,YAAa,CACXC,KAAM,QACN5D,QAAQ,GAAD,OAAKuD,EAAcM,mBAG5BF,YAAa,CACX3D,QAAS,iCACT4D,KAAM,aAKZE,QAAS,SAACL,GAAD,OAAWE,YAAa,CAAEC,KAAM,QAAS5D,QAASyD,EAAMzD,aApB7C,mBAEf+D,EAFe,KAEKC,EAFL,KAEKA,QAqBrBC,EAAsB,uCAAG,sBAAAC,EAAA,sEACvBH,EAAiB,CACrBI,UAAW,CAAEC,YAAa,CAAEC,IAAK7C,EAAI8C,aAAa,MAFvB,2CAAH,qDAM5B,OACE,cAAC,IAAD,CACE/C,UAAWyB,EAAQjD,EAAQwE,UAAYxE,EAAQyE,WAC/CC,SAAUT,EACV3F,QAAS4F,EAHX,6C,8NC3BG,IAAMS,EAAiBC,YAAW,CACvCjF,KAAM,CACJ5B,MAAO8G,IAAW,KAClB,YAAa,CACX9G,MAAO8G,IAAW,OAGtBC,QAAS,IAPmBF,EAQ3B,SAACnG,GAAD,OAA0B,cAACsG,EAAA,EAAD,aAAUhH,MAAM,WAAcU,OAW9CuG,EAAgC,SAACvG,GAC5C,IAAMlB,EAAoBC,cAD4B,EAEpB4C,YAAwB,GAFJ,mBAE/C6E,EAF+C,KAEpCC,EAFoC,OAGlB9E,YAAwB,GAHN,mBAG/C+E,EAH+C,KAGnCC,EAHmC,OAIpBhF,WAAyB,CACzDiF,QAAS,SAACA,GAAD,OACPA,IAAO,OAAK9H,QAAL,IAAKA,OAAL,EAAKA,EAAmB+H,QACjCC,IAAK,SAACA,GAAD,OACHA,IAAO,OAAChI,QAAD,IAACA,OAAD,EAACA,EAAmBgI,KAAiB,IAC5CA,IAAO,OAAChI,QAAD,IAACA,OAAD,EAACA,EAAmBgI,KAAiB,IAC9CC,QAAS,SAACA,GAAD,OACPA,KAAO,OAAMjI,QAAN,IAAMA,OAAN,EAAMA,EAAmBiI,UAChCA,EAAU,KAAV,OAAiBjI,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAmBiI,UACtCC,SAAU,SAACA,GAAD,OACRA,IAAQ,OAAKlI,QAAL,IAAKA,OAAL,EAAKA,EAAmBmI,WAdkB,mBAI/CC,EAJ+C,KAIpCC,EAJoC,KAgBtDxF,aAAgB,WACd,GAAI3B,EAAMoH,KAAKtC,OAAS,EAAG,CACzB,IAAMuC,ECvCL,SACLC,EACAC,GAEA,IAAMC,EAAaC,OAAOC,KAAKH,GAC/B,OAAOD,EAAMK,QAAO,SAACC,GAEnB,OAAOJ,EAAWK,OAAM,SAACC,GAEvB,MAA4B,oBAAjBP,EAAQO,IACZP,EAAQO,GAAKF,EAAKE,UD6BNC,CAAY/H,EAAMoH,KAAMF,GAC3ClH,EAAMgI,gBAAgBX,MAEvB,CAACH,EAAWlH,EAAMoH,OAyBrB,OACE,qCACE,cAACa,EAAA,EAAD,CACEpI,QAAS,kBAAM8G,GAAeD,IAC9BzC,aAAW,SACX3E,MAAM,UACNC,KAAK,QACLC,UAAW,cAAC,IAAD,IALb,oBASA,eAAC0I,EAAA,EAAD,CAAUC,GAAIzB,EAAd,UACE,cAAC0B,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,CACEC,QACE,cAACpC,EAAD,CACEG,QAASG,EACT7C,SAzCU,WASlBwD,EARGX,EAQU,CACXI,QAAS,SAACA,GAAD,OACPA,IAAO,OAAK9H,QAAL,IAAKA,OAAL,EAAKA,EAAmB+H,QACjCC,IAAK,SAACA,GAAD,OACHA,IAAO,OAAChI,QAAD,IAACA,OAAD,EAACA,EAAmBgI,KAAiB,IAC5CA,IAAO,OAAChI,QAAD,IAACA,OAAD,EAACA,EAAmBgI,KAAiB,IAC9CC,QAAS,SAACA,GAAD,OACPA,KAAO,OAAMjI,QAAN,IAAMA,OAAN,EAAMA,EAAmBiI,UAChCA,EAAU,KAAV,OAAiBjI,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAmBiI,UACtCC,SAAU,SAACA,GAAD,OACRA,IAAQ,OAAKlI,QAAL,IAAKA,OAAL,EAAKA,EAAmBmI,UAjBvB,CACXL,QAAS,kBAAM,GACfG,QAAS,kBAAM,GACfD,IAAK,kBAAM,GACXE,SAAU,kBAAM,KAgBpBP,GAAcD,IAoBJxC,KAAK,YAGTuE,MAAM,qD,qLEjFVC,EAAsC,CAC1CC,GAAK,UACLC,EAAG,WACHC,IAAK,OACLC,EAAG,QACHC,IAAK,KACLC,EAAG,MACHC,IAAK,OACLC,EAAG,QACHC,IAAK,YACLC,EAAG,cAGQC,EAKR,SAAC,GAA4C,IAA1CC,EAAyC,EAAzCA,OAAQC,EAAiC,EAAjCA,cAAe7E,EAAkB,EAAlBA,MAAOY,EAAW,EAAXA,KAAW,EACvBzD,YAAwB,GADD,mBACxC2H,EADwC,KAClCC,EADkC,OAErB5H,WAA8B,GAFT,mBAExC8B,EAFwC,KAEjC+F,EAFiC,OAGrB7H,YAAwB,GAHH,mBAGxC8H,EAHwC,KAGjCC,EAHiC,OAInB/H,WAAuB,IAJJ,mBAIxCgI,EAJwC,KAIhCC,EAJgC,KAQzCrI,EAAUsI,cACVC,EAAmBC,cACnBC,EAAeC,cAV0B,EAWXC,YAAwB,CAC1DxF,YAAa,SAACyF,GAAmB,IAAD,IAC9B,aAAIA,EAAcC,oBAAlB,iBAAI,EAA4BvF,cAAhC,aAAI,EAAoCC,OAAQ,CAAC,IAAD,EACxCC,EAAa,UAAGoF,EAAcC,oBAAjB,aAAG,EAA4BvF,OAAOG,KACvD,SAACC,GAAD,cAAWA,QAAX,IAAWA,OAAX,EAAWA,EAAOC,QAEpBC,YAAa,CACXC,KAAM,QACN5D,QAAQ,GAAD,OAAKuD,EAAcM,mBAG5BF,YAAa,CACXC,KAAM,UACN5D,QAAS,mCAIb6I,KAGF/E,QAAS,SAACL,GAAD,OAAWE,YAAa,CAAEC,KAAM,QAAS5D,QAASyD,EAAMzD,aA/BpB,mBAWxC4I,EAXwC,KAWxB5E,EAXwB,KAWxBA,QAyBjB6E,EAAc,WAClBd,GAAQ,IAgBV,OACE,qCACE,cAAC,IAAD,CACExG,UAAWyB,EAAQjD,EAAQwE,UAAYxE,EAAQyE,WAC/CC,SAAUT,EACV3F,QAzBc,WAClB0J,GAAQ,IAqBN,mCAOA,qBAAKpG,MAAO,CAAEmH,WAAY,UAA1B,SACE,eAAC,IAAD,CACEhB,KAAMA,EACNiB,QAASF,EACTG,kBAAgB,oBAHlB,UAKE,cAAC,IAAD,CAAaxH,GAAG,oBAAhB,mCAIA,eAAC,IAAD,WACE,sBAAKD,UAAWiH,EAAa9I,KAA7B,UACE,cAAC,IAAD,CACE8C,KAAK,iBACLP,MAAOA,EACPgH,UAAW,GACX9G,SAAU,SAACC,EAAO8G,GAChBlB,EAASkB,IAEXC,eAAgB,SAAC/G,EAAOgH,GACtBlB,EAASkB,MAGF,OAAVnH,GACC,cAAC,IAAD,CAAKoH,GAAI,EAAT,SAAarC,GAAkB,IAAXiB,EAAeA,EAAQhG,QAG/C,cAAC,IAAD,CACEnE,MAAM,UACNwL,WAAS,EACTC,KAAM,EACNtH,MAAOkG,EACPhG,SAzFS,SAACC,GACpBgG,EAAUhG,EAAME,OAAOL,QAyFbuH,gBAAiB,CACf7H,MAAO,CAAE7D,MAAO,YAElB2L,WAAY,CACVlI,UAAW+G,EAAiBoB,UAC5B3J,QAAS,CACP4J,UAAWrB,EAAiBsB,gBAGhCpI,GAAG,8BACHuF,MAAM,aACN8C,YAAY,kCAGhB,eAAC,IAAD,WACE,cAAC,IAAD,CAAQxL,QAASwK,EAAa/K,MAAM,UAApC,oBAGA,cAAC,IAAD,CAAQO,QA1ES,WACpBuK,EAAa,CAChBzE,UAAW,CACTgE,OAAQ,CACN2B,QAASlC,EACTmC,OAAQ9H,EACRmC,YAAayD,EACbmC,QAAS7B,EACTvE,KAAMA,OAkEiC9F,MAAM,UAA3C,qC,iCCpJZ,uDAeImM,EAA2B9J,cAAiB,SAAqB3B,EAAOwC,GAC1E,IAAI1B,EAAWd,EAAMc,SACjBS,EAAUvB,EAAMuB,QAChBwB,EAAY/C,EAAM+C,UAClB2I,EAAwB1L,EAAM2L,kBAC9BA,OAA8C,IAA1BD,GAA2CA,EAC/DE,EAAQC,YAAyB7L,EAAO,CAAC,WAAY,UAAW,YAAa,sBAEjF,OAAoB2B,gBAAoB,MAAOmK,YAAS,CACtD/I,UAAWgJ,YAAKxK,EAAQL,KAAM6B,GAC9BP,IAAKA,GACJoJ,GAAQD,EAAoB7K,EAAwBa,gBAAoBqK,IAAY,CACrF7M,UAAW,KACX8M,QAAS,MACRnL,OA8BUqF,gBApDK,CAElBjF,KAAM,CACJgL,OAAQ,EACRC,QAAS,YACTC,KAAM,aA+CwB,CAChCpI,KAAM,kBADOmC,CAEZsF,I,6MC9CUY,EAER,SAAC,GAAqB,IAAD,EAAlBzG,EAAkB,EAAlBA,YACA0G,EAAKC,cACLhL,EAAUR,cACVyL,EAAQC,cAER/L,EADUgM,YAAcF,EAAMG,YAAYC,GAAG,OAC3B,IAAM,IALN,EAMgBjL,YAAwB,GANxC,mBAMjBkL,EANiB,KAMHC,EANG,KAOlBtI,EAAQoB,EAAYR,OAAS1F,IAAOC,IAIpCoN,GAGG,KAFP,UAAAnH,EAAY+D,cAAZ,eAAoBqD,WAClB,SAACrD,GAAD,OAAkB,OAANA,QAAM,IAANA,OAAA,EAAAA,EAAQsD,UAAUpH,QAAlB,OAA0ByG,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAIzG,SAE9C,OACE,eAAC9F,EAAA,EAAD,CAAWW,MAAOA,EAAOjB,OAAQmG,EAAYR,KAA7C,UACE,eAAChG,EAAA,EAAD,CACED,UAAW+N,IACX7N,GAAE,sBAAiBuG,EAAYC,KAC/B1C,MAAO,CAAEgK,eAAgB,QAH3B,UAKE,eAACnB,EAAA,EAAD,CACE7M,UAAU,KACV8M,QAAQ,KACR3M,MAAOkF,EAAQ,gBAAkB,UAHnC,UAKGA,EAAQ,SAAW,QAAS,IACE,WAA9BoB,EAAYwH,GAAGC,YAA2BzH,EAAYwH,GAAGE,SAAU,OAGtE,eAACtB,EAAA,EAAD,CACEuB,MAAM,OACNtB,QAAQ,QACR3M,MAAOkF,EAAQ,gBAAkB,UAHnC,gCAKsBoB,EAAYqH,UAAUO,UAC1C,uBANF,gBAOgB5H,EAAY6H,UAAUD,UACpC,uBACC5H,EAAYE,YAAc,sBAAwB,QAErD,uBACA,eAACkG,EAAA,EAAD,CACEuB,MAAM,QACNtB,QAAQ,UACR3M,MAAOkF,EAAQ,gBAAkB,UAHnC,kCAKwBoB,EAAY8H,kBAGtC,cAACC,EAAA,EAAD,UACG/H,EAAYE,cAAgB+G,EAC1BE,EAWG,KAVF,cAAC5D,EAAA,EAAD,CACE3E,MAAOA,EACP6E,cAAezD,EAAYC,IAC3BT,KAAMQ,EAAYR,KAClBgE,OACExD,EAAYqH,UAAUpH,OAAtB,OAA8ByG,QAA9B,IAA8BA,OAA9B,EAA8BA,EAAIzG,KAC9BD,EAAY6H,UAAU5H,IACtBD,EAAYqH,UAAUpH,MAKhC,sBAAKhG,QA1DO,WAClBiN,GAAgB,IAyDV,UACG,IACD,cAACvI,EAAA,EAAD,CAAwBC,MAAOA,EAAOxB,GAAI4C,EAAYC,WAK5D,cAACoC,EAAA,EAAD,CACElF,UAAWyB,EAAQjD,EAAQwE,UAAYxE,EAAQyE,WAC/C1G,MAAM,UACNH,UAAW+N,IACX7N,GAAE,oBAAeuG,EAAYC,KAJ/B,8B,sDCsES+H,UA1IqC,WAAO,IAAD,kBACrBC,YAAyB,CAC1DvI,QAAS,SAACL,GAAD,OAAW6I,QAAQC,IAAI9I,MAFsB,mBACjD+I,EADiD,KAC/BC,EAD+B,OAIhBtM,WAEtC,IANsD,mBAIjDuM,EAJiD,KAInCC,EAJmC,OAO9BxM,WACxBuC,IAAaC,eARyC,mBAOjDT,EAPiD,KAO1CG,EAP0C,OAUtBlC,YAAwB,GAVF,mBAUjD6E,EAViD,KAUtCC,EAVsC,KAqCxD9E,aAAgB,WACTqM,EAAiB,CACpBrI,UAAW,CACTyI,OAAQ,EACRC,MAAO,EACPC,QAAS5K,EACToC,aAAa,OAGhB,IACH,IAAMhD,GACQ,OAAZoL,QAAY,IAAZA,OAAA,EAAAA,EAAcpJ,WAAd,UAAyBmJ,EAAOM,YAAhC,iBAAyB,EAAaL,oBAAtC,aAAyB,EAA2BM,WAwBtD,GAvBA7M,aAAgB,WAAO,IAAD,MACpB,aAAIsM,EAAOM,YAAX,iBAAI,EAAaL,oBAAjB,iBAAI,EAA2BA,oBAA/B,aAAI,EAAyCpJ,OAAQ,CAAC,IAAD,EAC7C2J,EAAgB,UAAGR,EAAOM,YAAV,aAAG,EAAaL,aAAaA,aAIjDC,EAHG3H,EAGaiI,EAFD,OAACA,QAAD,IAACA,OAAD,EAACA,EAAkB9G,QAAO,SAAC+G,GAAD,QAAO,OAACA,QAAD,IAACA,OAAD,EAACA,EAAG5I,oBAKvD,CAACmI,EAAOM,OACX5M,aAAgB,WACVsM,EAAOrL,WACTqL,EACGrL,UAAU,CACT+C,UAAW,CACT2I,QAAS5K,EACT2K,MAAK,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAcpJ,OACrBgB,YAAaU,KAGhBmI,OAAM,SAACC,GAAD,OAAOd,QAAQC,IAAIa,QAE7B,CAAClL,IACyB,KAAb,OAAZwK,QAAY,IAAZA,OAAA,EAAAA,EAAcpJ,QAChB,OAAO,mEAET,IACc,OAAZoJ,QAAY,IAAZA,OAAA,EAAAA,EAAcpJ,SACsC,KAApD,UAAAmJ,EAAOM,YAAP,mBAAaL,oBAAb,mBAA2BA,oBAA3B,eAAyCpJ,QACzC,CAiBA,OACE,eAAC+J,EAAA,EAAD,CAAW1P,UAAU,OAAO2P,SAAS,KAArC,UACE,cAACC,EAAA,EAAD,IACA,cAAClQ,EAAA,EAAD,IAEA,uBACA,cAACmN,EAAA,EAAD,CAAY1M,MAAM,UAAUH,UAAU,KAAK8M,QAAQ,KAAnD,sCAGA,uBACA,cAAC5I,EAAA,EAAD,CAAOQ,SAAUA,EAAUH,MAAOA,IAClC,cAAC0E,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,CACEC,QACE,cAAC,IAAD,CACEjC,QAASG,EACT7C,SAnGU,WAUpB,GATI6C,GAAayH,EAAOe,UACjBf,EAAOe,QAAQ,CAClBZ,OAAQ,EACRC,MAAO,EACPC,QAAS5K,EACToC,aAAa,IAEfW,GAAa,IAEXwH,EAAOrL,YAAc4D,EACvB,IACOyH,EAAOrL,UAAU,CACpB+C,UAAW,CAAE0I,MAAK,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAcpJ,OAAQgB,aAAa,KAEzDW,GAAa,GACb,MAAOmI,GACPzJ,YAAa,CACXC,KAAM,QACN5D,QAAS,qDAiFLwC,KAAK,YAGTuE,MAAM,sCAER,cAAC,IAAD,CACE3F,UAvCkB,WACtB,GAAIqL,EAAOrL,UACT,IAAK,IAAD,MACGqL,EAAOrL,UAAU,CACpB+C,UAAW,CACTyI,OAAM,UAAEH,EAAOM,YAAT,iBAAE,EAAaL,oBAAf,iBAAE,EAA2BA,oBAA7B,aAAE,EAAyCpJ,OACjDwJ,QAAS5K,EACToC,YAAaU,KAGjB,MAAOoI,GACPd,QAAQC,IAAIa,KA6BZ9L,UAAWA,EACXG,UAAWgL,EAAOzI,QAHpB,SAKG0I,EAAalJ,KAAI,SAACY,GAAD,OAChB,cAAC,EAAD,CAEEA,YAAaA,GAFf,OACOA,QADP,IACOA,OADP,EACOA,EAAaC,aAQ9B,OAAwD,KAApD,UAAAoI,EAAOM,YAAP,mBAAaL,oBAAb,mBAA2BA,oBAA3B,eAAyCpJ,QACpC,kEAEF,cAACmK,EAAA,EAAD","file":"static/js/8.c4f0c4bc.chunk.js","sourcesContent":["import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { searchedWine } from '../cache';\nimport { Link, useLocation, navigate } from '@reach/router';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport { TypeAd } from '../generated/graphql';\n\nexport const BackButton: React.FC = () => {\n  const searchedWineCache = searchedWine();\n  const { pathname } = useLocation();\n  if (pathname.split('/')[1] === 'annunci' && pathname.split('/')[2]) {\n    return (\n      <Button\n        component={Link}\n        to='/annunci'\n        //variant='contained'\n        color='primary'\n        size='large'\n        startIcon={<ArrowBackIosIcon />}\n      >\n        Annunci\n      </Button>\n    );\n  } else if (searchedWineCache?.typeAd === TypeAd.Buy && pathname !== '/buy') {\n    return (\n      <Button\n        component={Link}\n        to='/buy'\n        //variant='contained'\n        color='primary'\n        size='large'\n        startIcon={<ArrowBackIosIcon />}\n      >\n        Compra\n      </Button>\n    );\n  } else if (\n    searchedWineCache?.typeAd === TypeAd.Sell &&\n    pathname !== '/sell'\n  ) {\n    return (\n      <Button\n        component={Link}\n        to='/sell'\n        //variant='contained'\n        color='primary'\n        size='large'\n        startIcon={<ArrowBackIosIcon />}\n      >\n        Vendi\n      </Button>\n    );\n  } else\n    return (\n      <Button\n        color='primary'\n        size='large'\n        startIcon={<ArrowBackIosIcon />}\n        onClick={() => navigate(-1)}\n      >\n        Torna indietro\n      </Button>\n    );\n};\n","import * as React from 'react';\nimport Box from '@material-ui/core/Box';\nimport { TypeAd } from '../generated/graphql';\n\ninterface BoxProps {\n  width: number;\n  typeAd: TypeAd;\n  children: React.ReactNode;\n  notActive?: boolean;\n}\n\nexport const StyledBox: React.FC<BoxProps> = (props) => {\n  const sellColor = props.notActive ? '#b2b2b2' : 'white';\n  const buyColor = props.notActive ? '#8a425a' : 'primary.main';\n\n  return (\n    <Box\n      boxShadow={3}\n      p={2}\n      m={2}\n      mt={2}\n      px={2}\n      pt={2}\n      width={props.width}\n      color={props.typeAd === TypeAd.Sell ? 'primary.main' : 'white'}\n      borderColor={props.typeAd === TypeAd.Sell ? 'white' : 'primary.main'}\n      bgcolor={props.typeAd === TypeAd.Sell ? sellColor : buyColor}\n      borderRadius={16}\n    >\n      {props.children}\n    </Box>\n  );\n};\n","import { useLocation } from '@reach/router';\nimport * as React from 'react';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useIntersect } from '../utils/useIntersectionHook';\nimport { makeStyles, createStyles } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\ninterface InfiniteScrollProps {\n  children: React.ReactNode;\n  fetchMore: () => void;\n  isVisible: boolean;\n  isLoading: boolean;\n  setIsLoading?: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n  })\n);\n\nexport const InfiniteScroll: React.FC<InfiniteScrollProps> = (props) => {\n  const classes = useStyles();\n  const { pathname } = useLocation();\n  const message = pathname.split('/')[1] === 'messaggi';\n  const [ref, entry] = useIntersect({ threshold: 0 });\n  const [isOk, setIsOk] = React.useState<boolean>(true);\n\n  React.useEffect(() => {\n    if (entry && entry?.intersectionRatio >= 0.5 && isOk) {\n      void props.fetchMore();\n      props.setIsLoading && props.setIsLoading(true);\n      setIsOk(false);\n    } else if (entry?.intersectionRatio === 0 && !isOk) {\n      setIsOk(true);\n      props.setIsLoading && props.setIsLoading(false);\n    }\n  }, [entry?.intersectionRatio]);\n  if (message) {\n    return (\n      <>\n        {props.isVisible ? (\n          <div className={classes.root} id='page-bottom-boundary' ref={ref}>\n            {' '}\n            <ExpandMoreIcon />\n          </div>\n        ) : null}\n        {props.children}\n      </>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      {props.children}\n      {props.isVisible ? (\n        props.isLoading ? (\n          <CircularProgress />\n        ) : (\n          <div id='page-bottom-boundary' ref={ref} style={{ height: 30 }}>\n            {' '}\n            <ExpandMoreIcon />\n          </div>\n        )\n      ) : null}\n    </div>\n  );\n};\n","import * as React from 'react';\n\nexport const useIntersect = ({\n  root = null,\n  rootMargin = '0px',\n  threshold = 0,\n}): [\n  React.Dispatch<React.SetStateAction<HTMLDivElement | null>>,\n  IntersectionObserverEntry | null\n] => {\n  const [entry, setEntry] = React.useState<IntersectionObserverEntry | null>(\n    null\n  );\n  const [node, setNode] = React.useState<HTMLDivElement | null>(null);\n\n  const observer = React.useRef<IntersectionObserver | null>(null);\n\n  React.useEffect(() => {\n    if (observer.current) {\n      observer.current.disconnect();\n    }\n    observer.current = new window.IntersectionObserver(\n      ([entry]) => setEntry(entry),\n      { root, rootMargin, threshold }\n    );\n\n    const { current: currentObserver } = observer;\n\n    if (node) {\n      currentObserver.observe(node);\n    }\n    return () => currentObserver.disconnect();\n  }, [node, root, rootMargin, threshold]);\n  return [setNode, entry];\n};\n","/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport * as React from 'react';\nimport Select from '@material-ui/core/Select';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { QueryOrderBy } from '../../generated/graphql';\n\ninterface OrderProps {\n  setOrder: React.Dispatch<React.SetStateAction<QueryOrderBy>>;\n  order: QueryOrderBy;\n}\n\nexport const Order: React.FC<OrderProps> = (props) => {\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    props.setOrder(event.target.value as QueryOrderBy);\n  };\n\n  return (\n    <FormControl fullWidth>\n      <InputLabel style={{ color: 'black' }} htmlFor='order'>\n        Ordine risultati\n      </InputLabel>\n      <Select\n        native\n        value={props.order}\n        onChange={handleChange}\n        inputProps={{\n          name: 'order',\n          id: 'order',\n        }}\n      >\n        <option aria-label='None' value='' />\n        <option value={QueryOrderBy.CreatedAtDesc}>Dal piu recente</option>\n        <option value={QueryOrderBy.CreatedAtAsc}>Dal meno recente</option>\n        <option value={QueryOrderBy.PriceDesc}>Dal piu caro</option>\n        <option value={QueryOrderBy.PriceAsc}>Dal meno caro</option>\n      </Select>\n    </FormControl>\n  );\n};\n","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { notification } from '../cache';\nimport { useUpdateNegotiationMutation } from '../generated/graphql';\nimport { useStyles } from '../utils/styleHook';\n\nexport const CloseNegotiationButton: React.FC<{\n  id: string;\n  isBuy?: boolean;\n}> = ({ id, isBuy }) => {\n  const classes = useStyles();\n  const [closeNegotiation, { loading }] = useUpdateNegotiationMutation({\n    onCompleted: (closedNegotiation) => {\n      if (closedNegotiation.updateNegotiation?.errors?.length) {\n        const errorMessages = closedNegotiation.updateNegotiation?.errors.map(\n          (error) => error?.text\n        );\n        notification({\n          type: 'error',\n          message: `${errorMessages.toString()}`,\n        });\n      } else {\n        notification({\n          message: 'trattativa chiusa con successo',\n          type: 'success',\n        });\n      }\n    },\n\n    onError: (error) => notification({ type: 'error', message: error.message }),\n  });\n\n  const handleCloseNegotiation = async () => {\n    await closeNegotiation({\n      variables: { negotiation: { _id: id, isConcluded: true } },\n    });\n  };\n\n  return (\n    <Button\n      className={isBuy ? classes.buyButton : classes.sellButton}\n      disabled={loading}\n      onClick={handleCloseNegotiation}\n    >\n      Dichiara chiusa la trattativa\n    </Button>\n  );\n};\n","import * as React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Collapse from '@material-ui/core/Collapse';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport Divider from '@material-ui/core/Divider';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox, { CheckboxProps } from '@material-ui/core/Checkbox';\nimport { withStyles } from '@material-ui/core/styles';\nimport { deepPurple } from '@material-ui/core/colors';\nimport { searchedWine } from '../../cache';\nimport { IFilters, multiFilter } from '../../utils/multiFilter';\n\nexport const PurpleCheckbox = withStyles({\n  root: {\n    color: deepPurple[400],\n    '&$checked': {\n      color: deepPurple[600],\n    },\n  },\n  checked: {},\n})((props: CheckboxProps) => <Checkbox color='default' {...props} />);\n\ninterface FilterProps {\n  setList: React.Dispatch<React.SetStateAction<Array<any> | undefined | null>>;\n  list: Array<any>;\n  filteredList?: Array<any>;\n  setFilteredList: React.Dispatch<\n    React.SetStateAction<Array<any> | undefined | null>\n  >;\n}\n\nexport const Filter: React.FC<FilterProps> = (props) => {\n  const searchedWineCache = searchedWine();\n  const [isShowAll, setIsShowAll] = React.useState<boolean>(false);\n  const [showFilter, setShowFilter] = React.useState<boolean>(false);\n  const [filterAds, setFilterAds] = React.useState<IFilters>({\n    priceTo: (priceTo: number) =>\n      priceTo <= (searchedWineCache?.price as number),\n    abv: (abv: number) =>\n      abv >= (searchedWineCache?.abv as number) - 0.5 ||\n      abv <= (searchedWineCache?.abv as number) + 0.5,\n    harvest: (harvest: number) =>\n      harvest === (searchedWineCache?.harvest as number) ||\n      harvest - 1 === (searchedWineCache?.harvest as number),\n    litersTo: (litersTo: number) =>\n      litersTo >= (searchedWineCache?.liters as number),\n  });\n  React.useEffect(() => {\n    if (props.list.length > 0) {\n      const filtredAds = multiFilter(props.list, filterAds);\n      props.setFilteredList(filtredAds);\n    }\n  }, [filterAds, props.list]);\n  const handleShowAll = () => {\n    if (!isShowAll) {\n      setFilterAds({\n        priceTo: () => true,\n        harvest: () => true,\n        abv: () => true,\n        litersTo: () => true,\n      });\n    } else {\n      setFilterAds({\n        priceTo: (priceTo: number) =>\n          priceTo <= (searchedWineCache?.price as number),\n        abv: (abv: number) =>\n          abv >= (searchedWineCache?.abv as number) - 0.5 ||\n          abv <= (searchedWineCache?.abv as number) + 0.5,\n        harvest: (harvest: number) =>\n          harvest === (searchedWineCache?.harvest as number) ||\n          harvest - 1 === (searchedWineCache?.harvest as number),\n        litersTo: (litersTo: number) =>\n          litersTo >= (searchedWineCache?.liters as number),\n      });\n    }\n    setIsShowAll(!isShowAll);\n  };\n  return (\n    <>\n      <Button\n        onClick={() => setShowFilter(!showFilter)}\n        aria-label='filter'\n        color='primary'\n        size='large'\n        startIcon={<FilterListIcon />}\n      >\n        Filtri\n      </Button>\n      <Collapse in={showFilter}>\n        <Divider />\n        <FormControlLabel\n          control={\n            <PurpleCheckbox\n              checked={isShowAll}\n              onChange={handleShowAll}\n              name='showAll'\n            />\n          }\n          label='Mostra tutti gli annunci per questo vino'\n        />\n      </Collapse>\n    </>\n  );\n};\n","export interface IFilters {\n  [key: string]: (value: any) => boolean;\n}\n\ninterface IArray {\n  [key: string]: any;\n}\n\n// function taken from https://gist.github.com/jherax/f11d669ba286f21b7a2dcff69621eb72\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function multiFilter(\n  array: Array<IArray>,\n  filters: IFilters\n): Array<IArray> {\n  const filterKeys = Object.keys(filters);\n  return array.filter((item) => {\n    // validates all filter criteria\n    return filterKeys.every((key) => {\n      // ignores non-function predicates\n      if (typeof filters[key] !== 'function') return true;\n      return filters[key](item[key]);\n    });\n  });\n}\n","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { notification } from '../cache';\nimport { useCreateReviewMutation, TypeAd } from '../generated/graphql';\nimport {\n  StyledRating,\n  useStyles as useStylesHook,\n  useStylesForms,\n  useStyleRating,\n} from '../utils/styleHook';\nimport Box from '@material-ui/core/Box';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nconst labels: { [index: string]: string } = {\n  0.5: 'Useless',\n  1: 'Useless+',\n  1.5: 'Poor',\n  2: 'Poor+',\n  2.5: 'Ok',\n  3: 'Ok+',\n  3.5: 'Good',\n  4: 'Good+',\n  4.5: 'Excellent',\n  5: 'Excellent+',\n};\n\nexport const CreateReview: React.FC<{\n  idNegotiation: string;\n  idUser: string;\n  type: TypeAd;\n  isBuy?: boolean;\n}> = ({ idUser, idNegotiation, isBuy, type }) => {\n  const [open, setOpen] = React.useState<boolean>(false);\n  const [value, setValue] = React.useState<number | null>(2);\n  const [hover, setHover] = React.useState<number>(-1);\n  const [review, setReview] = React.useState<string>('');\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setReview(event.target.value);\n  };\n  const classes = useStylesHook();\n  const classesTextField = useStylesForms();\n  const classesStars = useStyleRating();\n  const [createReview, { loading }] = useCreateReviewMutation({\n    onCompleted: (createdReview) => {\n      if (createdReview.createReview?.errors?.length) {\n        const errorMessages = createdReview.createReview?.errors.map(\n          (error) => error?.text\n        );\n        notification({\n          type: 'error',\n          message: `${errorMessages.toString()}`,\n        });\n      } else {\n        notification({\n          type: 'success',\n          message: 'Recensione creata con successo',\n        });\n      }\n\n      handleClose();\n    },\n\n    onError: (error) => notification({ type: 'error', message: error.message }),\n  });\n  const handleModal = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const handleCreateReview = () => {\n    void createReview({\n      variables: {\n        review: {\n          forUser: idUser,\n          rating: value as number,\n          negotiation: idNegotiation,\n          content: review,\n          type: type,\n        },\n      },\n    });\n  };\n\n  return (\n    <>\n      <Button\n        className={isBuy ? classes.buyButton : classes.sellButton}\n        disabled={loading}\n        onClick={handleModal}\n      >\n        Lascia una recensione\n      </Button>\n      <div style={{ visibility: 'hidden' }}>\n        <Dialog\n          open={open}\n          onClose={handleClose}\n          aria-labelledby='form-dialog-title'\n        >\n          <DialogTitle id='form-dialog-title'>\n            Lascia una recensione\n          </DialogTitle>\n\n          <DialogContent>\n            <div className={classesStars.root}>\n              <StyledRating\n                name='hover-feedback'\n                value={value}\n                precision={0.5}\n                onChange={(event, newValue) => {\n                  setValue(newValue);\n                }}\n                onChangeActive={(event, newHover) => {\n                  setHover(newHover);\n                }}\n              />\n              {value !== null && (\n                <Box ml={2}>{labels[hover !== -1 ? hover : value]}</Box>\n              )}\n            </div>\n            <TextField\n              color='primary'\n              multiline\n              rows={4}\n              value={review}\n              onChange={handleChange}\n              InputLabelProps={{\n                style: { color: '#6d1331' },\n              }}\n              InputProps={{\n                className: classesTextField.inputSell,\n                classes: {\n                  underline: classesTextField.underlineSell,\n                },\n              }}\n              id='outlined-multiline-flexible'\n              label='Recensione'\n              placeholder='Ottima persona con cui....'\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleClose} color='primary'>\n              Cancel\n            </Button>\n            <Button onClick={handleCreateReview} color='primary'>\n              Recensisci\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    </>\n  );\n};\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    margin: 0,\n    padding: '16px 24px',\n    flex: '0 0 auto'\n  }\n};\nvar DialogTitle = /*#__PURE__*/React.forwardRef(function DialogTitle(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"disableTypography\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), disableTypography ? children : /*#__PURE__*/React.createElement(Typography, {\n    component: \"h2\",\n    variant: \"h6\"\n  }, children));\n});\nprocess.env.NODE_ENV !== \"production\" ? DialogTitle.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the children won't be wrapped by a typography component.\n   * For instance, this can be useful to render an h4 instead of the default h2.\n   */\n  disableTypography: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogTitle'\n})(DialogTitle);","import * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport { Link as RouterLink } from '@reach/router';\nimport { NegotiationDetailsFragment } from '../generated/graphql';\nimport { TypeAd } from '../generated/graphql';\nimport Button from '@material-ui/core/Button';\nimport { useTheme, useMediaQuery } from '@material-ui/core';\nimport { StyledBox } from './StyledBox';\nimport { CloseNegotiationButton } from '../containers/CloseNegotiationButton';\nimport { useStyles } from '../utils/styleHook';\nimport { Grid } from '@material-ui/core';\nimport { CreateReview } from '../containers/CreateReview';\nimport { myInfo } from '../cache';\n\nexport const CardNegotiation: React.FC<{\n  negotiation: NegotiationDetailsFragment;\n}> = ({ negotiation }) => {\n  const me = myInfo();\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n  const width = matches ? 400 : 250;\n  const [showCloseNeg, setShowCloseNeg] = React.useState<boolean>(true);\n  const isBuy = negotiation.type === TypeAd.Buy ? true : false;\n  const handleClick = () => {\n    setShowCloseNeg(false);\n  };\n  const isReviewed =\n    negotiation.review?.findIndex(\n      (review) => review?.createdBy._id === me?._id\n    ) !== -1;\n  return (\n    <StyledBox width={width} typeAd={negotiation.type}>\n      <Link\n        component={RouterLink}\n        to={`/trattative/${negotiation._id}`}\n        style={{ textDecoration: 'none' }}\n      >\n        <Typography\n          component='h5'\n          variant='h6'\n          color={isBuy ? 'textSecondary' : 'primary'}\n        >\n          {isBuy ? 'Compro' : 'Vendo'}{' '}\n          {negotiation.ad.__typename === 'AdWine' && negotiation.ad.wineName}{' '}\n          {/* {ad.wine.denominazioneZona} */}\n        </Typography>\n        <Typography\n          align='left'\n          variant='body1'\n          color={isBuy ? 'textSecondary' : 'primary'}\n        >\n          Aperta da: cantina {negotiation.createdBy.firstName}\n          <br />\n          Per cantina: {negotiation.forUserAd.firstName}\n          <br />\n          {negotiation.isConcluded ? 'Trattativa conclusa' : null}\n        </Typography>\n        <br />\n        <Typography\n          align='right'\n          variant='caption'\n          color={isBuy ? 'textSecondary' : 'primary'}\n        >\n          Trattativa aperta il {negotiation.dateCreated}\n        </Typography>\n      </Link>\n      <Grid>\n        {negotiation.isConcluded || !showCloseNeg ? (\n          !isReviewed ? (\n            <CreateReview\n              isBuy={isBuy}\n              idNegotiation={negotiation._id}\n              type={negotiation.type}\n              idUser={\n                negotiation.createdBy._id === me?._id\n                  ? negotiation.forUserAd._id\n                  : negotiation.createdBy._id\n              }\n            />\n          ) : null\n        ) : (\n          <div onClick={handleClick}>\n            {' '}\n            <CloseNegotiationButton isBuy={isBuy} id={negotiation._id} />\n          </div>\n        )}\n      </Grid>\n\n      <Button\n        className={isBuy ? classes.buyButton : classes.sellButton}\n        color='primary'\n        component={RouterLink}\n        to={`/messaggi/${negotiation._id}`}\n      >\n        Apri la chat\n      </Button>\n    </StyledBox>\n  );\n};\n","import * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Container from '@material-ui/core/Container';\nimport { RouteComponentProps } from '@reach/router';\nimport {\n  NegotiationDetailsFragment,\n  NegotiationsQuery,\n  QueryOrderBy,\n  useNegotiationsLazyQuery,\n} from '../generated/graphql';\nimport { CardNegotiation } from '../components/CardNegotiation';\nimport { BackButton } from '../components/BackButton';\nimport { Order } from '../components/FilterAds/Order';\nimport { InfiniteScroll } from '../components/InfiniteScrollFetch';\nimport { DeepExtractType } from 'ts-deep-extract-types';\nimport { notification } from '../cache';\nimport { PurpleCheckbox } from '../components/FilterAds';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Divider from '@material-ui/core/Divider';\n\nconst Negotiations: React.FC<RouteComponentProps> = () => {\n  const [lazyNegotiations, result] = useNegotiationsLazyQuery({\n    onError: (error) => console.log(error),\n  });\n  const [negotiations, setNegotiations] = React.useState<\n    DeepExtractType<NegotiationsQuery, ['negotiations']>['negotiations']\n  >([]);\n  const [order, setOrder] = React.useState<QueryOrderBy>(\n    QueryOrderBy.CreatedAtDesc\n  );\n  const [isShowAll, setIsShowAll] = React.useState<boolean>(false);\n\n  const handleShowAll = () => {\n    if (isShowAll && result.refetch) {\n      void result.refetch({\n        offset: 0,\n        limit: 4,\n        orderBy: order,\n        isConcluded: false,\n      });\n      setIsShowAll(false);\n    }\n    if (result.fetchMore && !isShowAll) {\n      try {\n        void result.fetchMore({\n          variables: { limit: negotiations?.length, isConcluded: true },\n        });\n        setIsShowAll(true);\n      } catch (e) {\n        notification({\n          type: 'error',\n          message: 'Errore durante il caricamento delle trattative',\n        });\n      }\n    }\n  };\n\n  React.useEffect(() => {\n    void lazyNegotiations({\n      variables: {\n        offset: 0,\n        limit: 4,\n        orderBy: order,\n        isConcluded: false,\n      },\n    });\n  }, []);\n  const isVisible =\n    negotiations?.length !== result.data?.negotiations?.pageCount;\n  React.useEffect(() => {\n    if (result.data?.negotiations?.negotiations?.length) {\n      const negotiationsData = result.data?.negotiations.negotiations;\n      if (!isShowAll) {\n        setNegotiations(negotiationsData?.filter((n) => !n?.isConcluded));\n      } else {\n        setNegotiations(negotiationsData);\n      }\n    }\n  }, [result.data]);\n  React.useEffect(() => {\n    if (result.fetchMore) {\n      result\n        .fetchMore({\n          variables: {\n            orderBy: order,\n            limit: negotiations?.length,\n            isConcluded: isShowAll,\n          },\n        })\n        .catch((e) => console.log(e));\n    }\n  }, [order]);\n  if (negotiations?.length === 0) {\n    return <div>Non hai ancora aperto trattative</div>;\n  }\n  if (\n    negotiations?.length &&\n    result.data?.negotiations?.negotiations?.length !== 0\n  ) {\n    const handleFetchMore = () => {\n      if (result.fetchMore) {\n        try {\n          void result.fetchMore({\n            variables: {\n              offset: result.data?.negotiations?.negotiations?.length,\n              orderBy: order,\n              isConcluded: isShowAll,\n            },\n          });\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    };\n\n    return (\n      <Container component='main' maxWidth='xs'>\n        <CssBaseline />\n        <BackButton />\n\n        <br />\n        <Typography color='primary' component='h3' variant='h5'>\n          Le tue trattative attive\n        </Typography>\n        <br />\n        <Order setOrder={setOrder} order={order} />\n        <Divider />\n        <FormControlLabel\n          control={\n            <PurpleCheckbox\n              checked={isShowAll}\n              onChange={handleShowAll}\n              name='showAll'\n            />\n          }\n          label='Mostra anche le trattative chiuse'\n        />\n        <InfiniteScroll\n          fetchMore={handleFetchMore}\n          isVisible={isVisible}\n          isLoading={result.loading}\n        >\n          {negotiations.map((negotiation) => (\n            <CardNegotiation\n              key={negotiation?._id}\n              negotiation={negotiation as NegotiationDetailsFragment}\n            />\n          ))}\n        </InfiniteScroll>\n      </Container>\n    );\n  }\n  if (result.data?.negotiations?.negotiations?.length === 0) {\n    return <div>Non ci sono negoziazioni attive</div>;\n  }\n  return <Skeleton />;\n};\n\nexport default Negotiations;\n"],"sourceRoot":""}