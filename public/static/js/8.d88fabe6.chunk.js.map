{"version":3,"sources":["components/BackButton.tsx","containers/StyledBox.tsx","containers/InfiniteScrollFetch.tsx","utils/useIntersectionHook.tsx","components/FilterAds/Order.tsx","containers/CloseNegotiationButton.tsx","containers/CreateReview.tsx","components/ReviewModal/index.tsx","components/FilterAds/index.tsx","utils/multiFilter.ts","../node_modules/@material-ui/core/esm/DialogTitle/DialogTitle.js","components/Cards/CardNegotiation.tsx","pages/Negotiations.tsx"],"names":["BackButton","aria-label","color","size","startIcon","onClick","navigate","StyledBox","props","sellColor","notActive","buyColor","boxShadow","p","m","mt","px","pt","width","typeAd","TypeAd","Sell","borderColor","bgcolor","borderRadius","children","useStyles","makeStyles","createStyles","root","display","flexDirection","alignItems","InfiniteScroll","classes","message","useLocation","pathname","split","rootMargin","threshold","React","entry","setEntry","node","setNode","observer","current","disconnect","window","IntersectionObserver","currentObserver","observe","useIntersect","ref","isOk","setIsOk","intersectionRatio","fetchMore","setIsLoading","isVisible","isLoading","className","CircularProgress","id","style","height","Order","fullWidth","htmlFor","native","value","order","onChange","event","setOrder","target","inputProps","name","QueryOrderBy","CreatedAtDesc","CreatedAtAsc","isAds","PriceDesc","PriceAsc","CloseNegotiationButton","isBuy","useUpdateNegotiationMutation","onCompleted","closedNegotiation","updateNegotiation","errors","length","errorMessages","map","error","text","notification","type","toString","onError","closeNegotiation","loading","handleCloseNegotiation","a","variables","negotiation","_id","isConcluded","buyButton","sellButton","disabled","CreateReview","review","closeModal","useCreateReviewMutation","createdReview","createReview","Button","labels","0.5","1","1.5","2","2.5","3","3.5","4","4.5","5","CreateReviewModal","idUser","idNegotiation","open","setOpen","setValue","hover","setHover","setReview","useStylesHook","classesTextField","useStylesForms","classesStars","useStyleRating","handleClose","Buy","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","precision","newValue","onChangeActive","newHover","Box","ml","TextField","multiline","rows","helperText","InputLabelProps","InputProps","inputSell","underline","underlineSell","label","placeholder","DialogActions","forUser","rating","content","PurpleCheckbox","withStyles","deepPurple","checked","Checkbox","Filter","searchedWineCache","searchedWine","isShowAll","setIsShowAll","showFilter","setShowFilter","priceTo","abv","harvest","litersTo","filterAds","setFilterAds","list","filtredAds","array","filters","filterKeys","Object","keys","filter","item","every","key","multiFilter","setFilteredList","Collapse","in","Divider","FormControlLabel","control","_props$disableTypogra","disableTypography","other","_objectWithoutProperties","_extends","clsx","Typography","component","variant","margin","padding","flex","CardNegotiation","me","myInfo","theme","useTheme","useMediaQuery","breakpoints","up","showCloseNeg","setShowCloseNeg","isReviewed","findIndex","createdBy","Link","RouterLink","to","textDecoration","ad","__typename","wineName","align","firstName","forUserAd","dateCreated","dateConcluded","Grid","Negotiations","useNegotiationsQuery","offset","limit","orderBy","negotiations","setNegotiations","console","log","data","isLoadFetchMore","setIsLoadFetchMore","isLoadOrder","setIsLoadOrder","handleShowAll","pageCount","then","catch","e","Loading","handleFetchMore","Container","maxWidth","CssBaseline"],"mappings":"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","file":"static/js/8.d88fabe6.chunk.js","sourcesContent":["import Button from '@material-ui/core/Button';\nimport * as React from 'react';\n// import { searchedWine } from '../cache';\nimport { navigate } from '@reach/router';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\n// import { TypeAd } from '../generated/graphql';\n\nexport const BackButton: React.FC = () => {\n  // // const searchedWineCache = searchedWine();\n  // // const { pathname } = useLocation();\n  // // if (searchedWineCache?.typeAd === TypeAd.Buy && pathname !== '/buy') {\n  // //   return (\n  // //     <Button\n  // //       component={Link}\n  // //       to='/buy'\n  // //       //variant='contained'\n  // //       color='primary'\n  // //       size='large'\n  // //       startIcon={<ArrowBackIosIcon />}\n  // //     >\n  // //       Compra\n  // //     </Button>\n  // //   );\n  // // } else if (\n  // //   searchedWineCache?.typeAd === TypeAd.Sell &&\n  // //   pathname !== '/sell'\n  // // ) {\n  //   return (\n  //     <Button\n  //       component={Link}\n  //       to='/sell'\n  //       //variant='contained'\n  //       color='primary'\n  //       size='large'\n  //       startIcon={<ArrowBackIosIcon />}\n  //     >\n  //       Vendi\n  //     </Button>\n  //   );\n  // } else\n  return (\n    <Button\n      aria-label='previous-page'\n      color='primary'\n      size='large'\n      startIcon={<ArrowBackIosIcon />}\n      onClick={() => navigate(-1)}\n    >\n      Torna indietro\n    </Button>\n  );\n};\n","import * as React from 'react';\nimport Box from '@material-ui/core/Box';\nimport { TypeAd } from '../generated/graphql';\n\ninterface BoxProps {\n  width: number;\n  typeAd: TypeAd;\n  children: React.ReactNode;\n  notActive?: boolean;\n}\n\nexport const StyledBox: React.FC<BoxProps> = (props) => {\n  const sellColor = props.notActive ? '#b2b2b2' : 'white';\n  const buyColor = props.notActive ? '#8a425a' : 'primary.main';\n\n  return (\n    <Box\n      boxShadow={3}\n      p={2}\n      m={2}\n      mt={2}\n      px={2}\n      pt={2}\n      width={props.width}\n      color={props.typeAd === TypeAd.Sell ? 'primary.main' : 'white'}\n      borderColor={props.typeAd === TypeAd.Sell ? 'white' : 'primary.main'}\n      bgcolor={props.typeAd === TypeAd.Sell ? sellColor : buyColor}\n      borderRadius={16}\n    >\n      {props.children}\n    </Box>\n  );\n};\n","import { useLocation } from '@reach/router';\nimport * as React from 'react';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useIntersect } from '../utils/useIntersectionHook';\nimport { makeStyles, createStyles } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\ninterface InfiniteScrollProps {\n  children: React.ReactNode;\n  fetchMore: () => void;\n  isVisible: boolean;\n  isLoading: boolean;\n  setIsLoading?: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n  })\n);\n\nexport const InfiniteScroll: React.FC<InfiniteScrollProps> = (props) => {\n  const classes = useStyles();\n  const { pathname } = useLocation();\n  const message = pathname.split('/')[1] === 'messaggi';\n  const [ref, entry] = useIntersect({ threshold: 0 });\n  const [isOk, setIsOk] = React.useState<boolean>(true);\n  React.useEffect(() => {\n    if (entry && entry?.intersectionRatio > 0 && isOk) {\n      void props.fetchMore();\n      props.setIsLoading && props.setIsLoading(true);\n      setIsOk(false);\n    } else if (entry?.intersectionRatio === 0 && !isOk) {\n      setIsOk(true);\n      props.setIsLoading && props.setIsLoading(false);\n    }\n  }, [entry?.intersectionRatio]);\n  if (message) {\n    return (\n      <>\n        {props.isVisible ? (\n          props.isLoading ? (\n            <div className={classes.root}>\n              <CircularProgress />\n            </div>\n          ) : (\n            <div className={classes.root} id='page-bottom-boundary' ref={ref}>\n              {' '}\n              <ExpandMoreIcon />\n            </div>\n          )\n        ) : null}\n        {props.children}\n      </>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      {props.children}\n      {props.isVisible ? (\n        props.isLoading ? (\n          <CircularProgress />\n        ) : (\n          <div id='page-bottom-boundary' ref={ref} style={{ height: 30 }}>\n            {' '}\n            <ExpandMoreIcon />\n          </div>\n        )\n      ) : null}\n    </div>\n  );\n};\n","import * as React from 'react';\n\nexport const useIntersect = ({\n  root = null,\n  rootMargin = '0px',\n  threshold = 0,\n}): [\n  React.Dispatch<React.SetStateAction<HTMLDivElement | null>>,\n  IntersectionObserverEntry | null\n] => {\n  const [entry, setEntry] = React.useState<IntersectionObserverEntry | null>(\n    null\n  );\n  const [node, setNode] = React.useState<HTMLDivElement | null>(null);\n\n  const observer = React.useRef<IntersectionObserver | null>(null);\n  React.useEffect(() => {\n    if (observer.current) {\n      observer.current.disconnect();\n    }\n    observer.current = new window.IntersectionObserver(\n      ([entry]) => setEntry(entry),\n      { root, rootMargin, threshold }\n    );\n\n    const { current: currentObserver } = observer;\n\n    if (node) {\n      currentObserver.observe(node);\n    }\n    return () => currentObserver.disconnect();\n  }, [node, root, rootMargin, threshold]);\n  return [setNode, entry];\n};\n","/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport * as React from 'react';\nimport Select from '@material-ui/core/Select';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { QueryOrderBy } from '../../generated/graphql';\n\ninterface OrderProps {\n  setOrder: React.Dispatch<React.SetStateAction<QueryOrderBy>>;\n  order: QueryOrderBy;\n  isAds?: boolean;\n}\n\nexport const Order: React.FC<OrderProps> = (props) => {\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    props.setOrder(event.target.value as QueryOrderBy);\n  };\n  return (\n    <FormControl fullWidth>\n      <InputLabel style={{ color: 'black' }} htmlFor='order'>\n        Ordine risultati\n      </InputLabel>\n      <Select\n        native\n        value={props.order}\n        onChange={handleChange}\n        inputProps={{\n          name: 'order',\n          id: 'order',\n        }}\n      >\n        <option value={QueryOrderBy.CreatedAtDesc}>Dal piu recente</option>\n        <option value={QueryOrderBy.CreatedAtAsc}>Dal meno recente</option>\n        {props.isAds ? (\n          <>\n            <option value={QueryOrderBy.PriceDesc}>Dal piu caro</option>\n            <option value={QueryOrderBy.PriceAsc}>Dal meno caro</option>\n          </>\n        ) : null}\n      </Select>\n    </FormControl>\n  );\n};\n","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { notification } from '../cache';\nimport { useUpdateNegotiationMutation } from '../generated/graphql';\nimport { useStyles } from '../utils/styleHook';\n\nexport const CloseNegotiationButton: React.FC<{\n  id: string;\n  isBuy?: boolean;\n}> = ({ id, isBuy }) => {\n  const classes = useStyles();\n  const [closeNegotiation, { loading }] = useUpdateNegotiationMutation({\n    onCompleted: (closedNegotiation) => {\n      if (closedNegotiation.updateNegotiation?.errors?.length) {\n        const errorMessages = closedNegotiation.updateNegotiation?.errors.map(\n          (error) => error?.text\n        );\n        notification({\n          type: 'error',\n          message: `${errorMessages.toString()}`,\n        });\n      } else {\n        notification({\n          message: 'trattativa chiusa con successo',\n          type: 'success',\n        });\n      }\n    },\n\n    onError: (error) => notification({ type: 'error', message: error.message }),\n  });\n\n  const handleCloseNegotiation = async () => {\n    await closeNegotiation({\n      variables: { negotiation: { _id: id, isConcluded: true } },\n    });\n  };\n\n  return (\n    <Button\n      aria-label='close-negotiation'\n      className={isBuy ? classes.buyButton : classes.sellButton}\n      disabled={loading}\n      onClick={handleCloseNegotiation}\n    >\n      Dichiara chiusa la trattativa\n    </Button>\n  );\n};\n","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { notification } from '../cache';\nimport { useCreateReviewMutation, ReviewInput } from '../generated/graphql';\n\nexport const CreateReview: React.FC<{\n  review: ReviewInput;\n  disabled: boolean;\n  closeModal?: () => void;\n}> = ({ review, disabled, closeModal }) => {\n  const [createReview, { loading }] = useCreateReviewMutation({\n    onCompleted: (createdReview) => {\n      if (createdReview.createReview?.errors?.length) {\n        const errorMessages = createdReview.createReview?.errors.map(\n          (error) => error?.text\n        );\n        notification({\n          type: 'error',\n          message: `${errorMessages.toString()}`,\n        });\n      } else {\n        notification({\n          type: 'success',\n          message: 'Recensione creata con successo',\n        });\n      }\n    },\n\n    onError: (error) => notification({ type: 'error', message: error.message }),\n  });\n\n  const handleCreateReview = () => {\n    closeModal && closeModal();\n    void createReview({\n      variables: {\n        review,\n      },\n    });\n  };\n\n  return (\n    <Button\n      disabled={disabled || loading}\n      aria-label='review'\n      onClick={handleCreateReview}\n      color='primary'\n    >\n      Recensisci\n    </Button>\n  );\n};\n","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { TypeAd } from '../../generated/graphql';\nimport {\n  StyledRating,\n  useStyles as useStylesHook,\n  useStylesForms,\n  useStyleRating,\n} from '../../utils/styleHook';\nimport Box from '@material-ui/core/Box';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { CreateReview } from '../../containers/CreateReview';\nconst labels: { [index: string]: string } = {\n  0.5: 'Useless',\n  1: 'Useless+',\n  1.5: 'Poor',\n  2: 'Poor+',\n  2.5: 'Ok',\n  3: 'Ok+',\n  3.5: 'Good',\n  4: 'Good+',\n  4.5: 'Excellent',\n  5: 'Excellent+',\n};\n\nexport const CreateReviewModal: React.FC<{\n  idNegotiation: string;\n  idUser: string;\n  type: TypeAd;\n}> = ({ idUser, idNegotiation, type }) => {\n  const [open, setOpen] = React.useState<boolean>(false);\n  const [value, setValue] = React.useState<number | null>(2);\n  const [hover, setHover] = React.useState<number>(-1);\n  const [review, setReview] = React.useState<string>('');\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setReview(event.target.value);\n  };\n  const classes = useStylesHook();\n  const classesTextField = useStylesForms();\n  const classesStars = useStyleRating();\n  const handleModal = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <Button\n        aria-label='review'\n        className={type === TypeAd.Buy ? classes.buyButton : classes.sellButton}\n        onClick={handleModal}\n      >\n        Lascia una recensione\n      </Button>\n      <div style={{ display: 'none' }}>\n        <Dialog\n          open={open}\n          onClose={handleClose}\n          aria-labelledby='form-dialog-title'\n        >\n          <DialogTitle id='form-dialog-title'>\n            Recensisci la trattativa\n          </DialogTitle>\n\n          <DialogContent>\n            <div className={classesStars.root}>\n              <StyledRating\n                name='hover-feedback'\n                value={value}\n                precision={0.5}\n                onChange={(event, newValue) => {\n                  setValue(newValue);\n                }}\n                onChangeActive={(event, newHover) => {\n                  setHover(newHover);\n                }}\n              />\n              {value !== null && (\n                <Box ml={2}>{labels[hover !== -1 ? hover : value]}</Box>\n              )}\n            </div>\n            <TextField\n              color='primary'\n              multiline\n              rows={4}\n              value={review}\n              error={review.length > 0 && review.length <= 5}\n              helperText='Lunghezza minima 5 caratteri'\n              onChange={handleChange}\n              InputLabelProps={{\n                style: { color: '#6d1331' },\n              }}\n              InputProps={{\n                className: classesTextField.inputSell,\n                classes: {\n                  underline: classesTextField.underlineSell,\n                },\n              }}\n              id='outlined-multiline-flexible'\n              label='Recensione'\n              placeholder='Ottima persona con cui....'\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button\n              aria-label='close-modal'\n              onClick={handleClose}\n              color='primary'\n            >\n              Cancel\n            </Button>\n            <CreateReview\n              disabled={review.length <= 5}\n              review={{\n                forUser: idUser,\n                rating: value as number,\n                negotiation: idNegotiation,\n                content: review,\n                type: type,\n              }}\n              closeModal={handleClose}\n            />\n          </DialogActions>\n        </Dialog>\n      </div>\n    </>\n  );\n};\n","import * as React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Collapse from '@material-ui/core/Collapse';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport Divider from '@material-ui/core/Divider';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox, { CheckboxProps } from '@material-ui/core/Checkbox';\nimport { withStyles } from '@material-ui/core/styles';\nimport { deepPurple } from '@material-ui/core/colors';\nimport { searchedWine } from '../../cache';\nimport { IFilters, multiFilter } from '../../utils/multiFilter';\n\nexport const PurpleCheckbox = withStyles({\n  root: {\n    color: deepPurple[400],\n    '&$checked': {\n      color: deepPurple[600],\n    },\n  },\n  checked: {},\n})((props: CheckboxProps) => <Checkbox color='default' {...props} />);\n\ninterface FilterProps {\n  list: Array<any>;\n  filteredList?: Array<any>;\n  setFilteredList: React.Dispatch<\n    React.SetStateAction<Array<any> | undefined | null>\n  >;\n  children?: React.ReactNode;\n}\n\nexport const Filter: React.FC<FilterProps> = (props) => {\n  const searchedWineCache = searchedWine();\n  const [isShowAll, setIsShowAll] = React.useState<boolean>(false);\n  const [showFilter, setShowFilter] = React.useState<boolean>(false);\n  const [filterAds, setFilterAds] = React.useState<IFilters>({\n    priceTo: (priceTo: number) =>\n      priceTo <= (searchedWineCache?.priceTo as number),\n    abv: (abv: number) =>\n      abv >= (searchedWineCache?.abv as number) - 0.5 ||\n      abv <= (searchedWineCache?.abv as number) + 0.5,\n    harvest: (harvest: number) =>\n      harvest === (searchedWineCache?.harvest as number) ||\n      harvest - 1 === (searchedWineCache?.harvest as number),\n    litersTo: (litersTo: number) =>\n      litersTo >= (searchedWineCache?.litersTo as number),\n  });\n  React.useEffect(() => {\n    if (props.list.length > 0) {\n      const filtredAds = multiFilter(props.list, filterAds);\n      props.setFilteredList(filtredAds);\n    }\n  }, [filterAds, props.list]);\n  const handleShowAll = () => {\n    if (!isShowAll) {\n      setFilterAds({\n        priceTo: () => true,\n        harvest: () => true,\n        abv: () => true,\n        litersTo: () => true,\n      });\n    } else {\n      setFilterAds({\n        priceTo: (priceTo: number) =>\n          priceTo <= (searchedWineCache?.priceTo as number),\n        abv: (abv: number) =>\n          abv >= (searchedWineCache?.abv as number) - 0.5 ||\n          abv <= (searchedWineCache?.abv as number) + 0.5,\n        harvest: (harvest: number) =>\n          harvest === (searchedWineCache?.harvest as number) ||\n          harvest - 1 === (searchedWineCache?.harvest as number),\n        litersTo: (litersTo: number) =>\n          litersTo >= (searchedWineCache?.litersTo as number),\n      });\n    }\n    setIsShowAll(!isShowAll);\n  };\n  return (\n    <>\n      <Button\n        onClick={() => setShowFilter(!showFilter)}\n        aria-label='filter'\n        color='primary'\n        size='large'\n        startIcon={<FilterListIcon />}\n      >\n        Filtri\n      </Button>\n      <Collapse in={showFilter}>\n        {props.children}\n        <Divider />\n        <FormControlLabel\n          control={\n            <PurpleCheckbox\n              checked={isShowAll}\n              onChange={handleShowAll}\n              name='showAll'\n            />\n          }\n          label='Mostra tutti gli annunci per questo vino'\n        />\n      </Collapse>\n    </>\n  );\n};\n","export interface IFilters {\n  [key: string]: (value: any) => boolean;\n}\n\ninterface IArray {\n  [key: string]: any;\n}\n\n// function taken from https://gist.github.com/jherax/f11d669ba286f21b7a2dcff69621eb72\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function multiFilter(\n  array: Array<IArray>,\n  filters: IFilters\n): Array<IArray> {\n  const filterKeys = Object.keys(filters);\n  return array.filter((item) => {\n    // validates all filter criteria\n    return filterKeys.every((key) => {\n      // ignores non-function predicates\n      if (typeof filters[key] !== 'function') return true;\n      return filters[key](item[key]);\n    });\n  });\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    margin: 0,\n    padding: '16px 24px',\n    flex: '0 0 auto'\n  }\n};\nvar DialogTitle = /*#__PURE__*/React.forwardRef(function DialogTitle(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"disableTypography\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), disableTypography ? children : /*#__PURE__*/React.createElement(Typography, {\n    component: \"h2\",\n    variant: \"h6\"\n  }, children));\n});\nprocess.env.NODE_ENV !== \"production\" ? DialogTitle.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the children won't be wrapped by a typography component.\n   * For instance, this can be useful to render an h4 instead of the default h2.\n   */\n  disableTypography: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogTitle'\n})(DialogTitle);","import * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport { Link as RouterLink } from '@reach/router';\nimport { NegotiationDetailsFragment } from '../../generated/graphql';\nimport { TypeAd } from '../../generated/graphql';\nimport Button from '@material-ui/core/Button';\nimport { useTheme, useMediaQuery } from '@material-ui/core';\nimport { StyledBox } from '../../containers/StyledBox';\nimport { CloseNegotiationButton } from '../../containers/CloseNegotiationButton';\nimport { useStyles } from '../../utils/styleHook';\nimport { Grid } from '@material-ui/core';\nimport { CreateReviewModal } from '../ReviewModal';\nimport { myInfo } from '../../cache';\n\nexport const CardNegotiation: React.FC<{\n  negotiation: NegotiationDetailsFragment;\n}> = ({ negotiation }) => {\n  const me = myInfo();\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n  const width = matches ? 400 : 250;\n  const [showCloseNeg, setShowCloseNeg] = React.useState<boolean>(true);\n  const isBuy = negotiation.type === TypeAd.Buy ? true : false;\n  const handleClick = () => {\n    setShowCloseNeg(false);\n  };\n  const isReviewed =\n    negotiation.review?.findIndex(\n      (review) => review?.createdBy._id === me?._id\n    ) !== -1;\n  return (\n    <StyledBox width={width} typeAd={negotiation.type}>\n      <Link\n        aria-label='link-negotiation'\n        component={RouterLink}\n        to={`/trattative/${negotiation._id}`}\n        style={{ textDecoration: 'none' }}\n      >\n        <Typography\n          component='h5'\n          variant='h6'\n          color={isBuy ? 'textSecondary' : 'primary'}\n        >\n          {isBuy ? 'Compro' : 'Vendo'}{' '}\n          {negotiation.ad.__typename === 'AdWine' && negotiation.ad.wineName}{' '}\n          {/* {ad.wine.denominazioneZona} */}\n        </Typography>\n        <Typography\n          align='left'\n          variant='body1'\n          color={isBuy ? 'textSecondary' : 'primary'}\n        >\n          Aperta da: cantina {negotiation.createdBy.firstName}\n          <br />\n          Per cantina: {negotiation.forUserAd.firstName}\n          <br />\n          {negotiation.isConcluded ? 'Trattativa conclusa' : null}\n        </Typography>\n        <br />\n        <Typography\n          align='right'\n          variant='caption'\n          color={isBuy ? 'textSecondary' : 'primary'}\n        >\n          Trattativa aperta: {negotiation.dateCreated}\n        </Typography>\n        {negotiation.isConcluded ? (\n          <>\n            <br />\n            <Typography\n              align='right'\n              variant='caption'\n              color={isBuy ? 'textSecondary' : 'primary'}\n            >\n              Trattativa conclusa: {negotiation.dateConcluded}\n            </Typography>\n          </>\n        ) : null}\n      </Link>\n      <Grid>\n        {negotiation.isConcluded || !showCloseNeg ? (\n          !isReviewed ? (\n            <CreateReviewModal\n              idNegotiation={negotiation._id}\n              type={negotiation.type}\n              idUser={negotiation.forUserAd._id}\n            />\n          ) : null\n        ) : (\n          <div onClick={handleClick}>\n            {' '}\n            <CloseNegotiationButton isBuy={isBuy} id={negotiation._id} />\n          </div>\n        )}\n      </Grid>\n\n      <Button\n        className={isBuy ? classes.buyButton : classes.sellButton}\n        color='primary'\n        component={RouterLink}\n        to={`/messaggi/${negotiation._id}`}\n      >\n        Apri la chat\n      </Button>\n    </StyledBox>\n  );\n};\n","import * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Container from '@material-ui/core/Container';\nimport { RouteComponentProps } from '@reach/router';\nimport {\n  NegotiationDetailsFragment,\n  NegotiationsQuery,\n  QueryOrderBy,\n  useNegotiationsQuery,\n} from '../generated/graphql';\nimport { CardNegotiation } from '../components/Cards/CardNegotiation';\nimport { BackButton } from '../components/BackButton';\nimport { Order } from '../components/FilterAds/Order';\nimport { InfiniteScroll } from '../containers/InfiniteScrollFetch';\nimport { DeepExtractType } from 'ts-deep-extract-types';\nimport { notification } from '../cache';\nimport { PurpleCheckbox } from '../components/FilterAds';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Divider from '@material-ui/core/Divider';\nimport { Loading } from '../components/Loading';\n\nconst Negotiations: React.FC<RouteComponentProps> = () => {\n  const [order, setOrder] = React.useState<QueryOrderBy>(\n    QueryOrderBy.CreatedAtDesc\n  );\n  const { data, loading, error, fetchMore } = useNegotiationsQuery({\n    variables: {\n      offset: 0,\n      limit: 4,\n      orderBy: order,\n      isConcluded: false,\n    },\n    onCompleted: ({ negotiations }) =>\n      setNegotiations(negotiations?.negotiations),\n    onError: (error) => console.log(error),\n  });\n  const [negotiations, setNegotiations] = React.useState<\n    DeepExtractType<NegotiationsQuery, ['negotiations']>['negotiations']\n  >([]);\n  const [isShowAll, setIsShowAll] = React.useState<boolean>(false);\n  const [isLoadFetchMore, setIsLoadFetchMore] = React.useState<boolean>(false);\n  const [isLoadOrder, setIsLoadOrder] = React.useState<boolean>(false);\n  const handleShowAll = async () => {\n    setIsLoadOrder(true);\n    if (isShowAll && fetchMore) {\n      setIsShowAll(false);\n      const { data } = await fetchMore({\n        variables: {\n          offset: 0,\n          limit: 4,\n          orderBy: order,\n          isConcluded: false,\n        },\n      });\n      setNegotiations(data.negotiations?.negotiations);\n      setIsLoadOrder(false);\n    }\n    if (fetchMore && !isShowAll) {\n      try {\n        setIsShowAll(true);\n        const { data } = await fetchMore({\n          variables: { limit: negotiations?.length, isConcluded: true },\n        });\n        setNegotiations([\n          ...(negotiations as []),\n          ...(data.negotiations?.negotiations as []),\n        ]);\n\n        setIsLoadOrder(false);\n      } catch (e) {\n        notification({\n          type: 'error',\n          message: 'Errore durante il caricamento delle trattative',\n        });\n      }\n    }\n  };\n  const isVisible =\n    (negotiations?.length as number) <\n    (data?.negotiations?.pageCount as number);\n  React.useEffect(() => {\n    if (negotiations?.length && fetchMore) {\n      setIsLoadOrder(true);\n\n      fetchMore({\n        variables: {\n          orderBy: order,\n          limit: negotiations?.length,\n          isConcluded: isShowAll,\n        },\n      })\n        .then(({ data }) => {\n          setIsLoadOrder(false);\n          setNegotiations(data.negotiations?.negotiations);\n        })\n        .catch((e) => {\n          setIsLoadOrder(false);\n\n          console.log(e);\n        });\n    }\n  }, [order]);\n\n  if (loading) {\n    return <Loading />;\n  }\n  if (error) return <div>{error.message}</div>;\n  if (negotiations?.length === 0) {\n    return <div>Non hai ancora aperto trattative</div>;\n  }\n  if (negotiations?.length && data?.negotiations?.negotiations?.length !== 0) {\n    const handleFetchMore = async () => {\n      setIsLoadFetchMore(true);\n      if (fetchMore) {\n        try {\n          const { data } = await fetchMore({\n            variables: {\n              offset: negotiations.length,\n              orderBy: order,\n              isConcluded: isShowAll,\n            },\n          });\n          setNegotiations([\n            ...negotiations,\n            ...(data.negotiations?.negotiations as []),\n          ]);\n          setIsLoadFetchMore(false);\n        } catch (e) {\n          console.log(e);\n          setIsLoadFetchMore(false);\n        }\n      }\n    };\n\n    return (\n      <Container component='main' maxWidth='xs'>\n        <CssBaseline />\n        <BackButton />\n        <br />\n        <Typography color='primary' component='h3' variant='h5'>\n          Le tue trattative attive\n        </Typography>\n        <br />\n        <Order setOrder={setOrder} order={order} />\n        <Divider />\n        <FormControlLabel\n          control={\n            <PurpleCheckbox\n              checked={isShowAll}\n              onChange={handleShowAll}\n              name='showAll'\n            />\n          }\n          label='Mostra anche le trattative chiuse'\n        />\n        {isLoadOrder ? (\n          <Loading />\n        ) : (\n          <InfiniteScroll\n            fetchMore={handleFetchMore}\n            isVisible={isVisible}\n            isLoading={isLoadFetchMore}\n          >\n            {negotiations.map((negotiation) => (\n              <CardNegotiation\n                key={negotiation?._id}\n                negotiation={negotiation as NegotiationDetailsFragment}\n              />\n            ))}\n          </InfiniteScroll>\n        )}\n      </Container>\n    );\n  }\n  return <div>Grave errore</div>;\n};\n\nexport default Negotiations;\n"],"sourceRoot":""}