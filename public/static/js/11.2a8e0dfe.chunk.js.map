{"version":3,"sources":["components/BackButton.tsx","../node_modules/@material-ui/icons/ArrowBackIos.js","containers/StyledBox.tsx","../node_modules/@material-ui/icons/ExpandMore.js","containers/InfiniteScrollFetch.tsx","utils/useIntersectionHook.tsx","components/FilterAds/Order.tsx","../node_modules/@material-ui/core/esm/useMediaQuery/useMediaQuery.js","components/Cards/CardReview.tsx","pages/Reviews.tsx"],"names":["BackButton","aria-label","color","size","startIcon","onClick","navigate","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","StyledBox","props","sellColor","notActive","buyColor","boxShadow","p","m","mt","px","pt","width","typeAd","TypeAd","Sell","borderColor","bgcolor","borderRadius","children","useStyles","makeStyles","createStyles","root","display","flexDirection","alignItems","InfiniteScroll","classes","message","useLocation","pathname","split","rootMargin","threshold","entry","setEntry","node","setNode","observer","current","disconnect","window","IntersectionObserver","currentObserver","observe","useIntersect","ref","isOk","setIsOk","intersectionRatio","fetchMore","setIsLoading","isVisible","isLoading","className","CircularProgress","id","style","height","Order","fullWidth","htmlFor","native","order","onChange","event","setOrder","target","inputProps","name","QueryOrderBy","CreatedAtDesc","CreatedAtAsc","isAds","PriceDesc","PriceAsc","useMediaQuery","queryInput","options","arguments","length","undefined","theme","useTheme","getThemeProps","query","replace","supportMatchMedia","matchMedia","_props$options","_extends","_props$options$defaul","defaultMatches","_props$options$matchM","_props$options$noSsr","noSsr","_props$options$ssrMat","ssrMatchMedia","_React$useState","matches","match","setMatch","active","queryList","updateMatch","addListener","removeListener","CardReview","review","me","myInfo","breakpoints","up","isBuy","type","Buy","isMyReview","createdBy","_id","Rating","rating","readOnly","precision","Typography","align","variant","forUser","firstName","content","data-testid","dateCreated","Reviews","reviews","setReviews","isLoadFetchMore","setIsLoadFetchMore","isLoadOrder","setIsLoadOrder","useReviewsQuery","variables","offset","limit","orderBy","onError","error","console","log","onCompleted","data","loading","then","catch","e","Loading","handleFetchMore","a","Container","component","maxWidth","CssBaseline","pageCount","map"],"mappings":"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","file":"static/js/11.2a8e0dfe.chunk.js","sourcesContent":["import Button from '@material-ui/core/Button';\nimport * as React from 'react';\n// import { searchedWine } from '../cache';\nimport { navigate } from '@reach/router';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\n// import { TypeAd } from '../generated/graphql';\n\nexport const BackButton: React.FC = () => {\n  // // const searchedWineCache = searchedWine();\n  // // const { pathname } = useLocation();\n  // // if (searchedWineCache?.typeAd === TypeAd.Buy && pathname !== '/buy') {\n  // //   return (\n  // //     <Button\n  // //       component={Link}\n  // //       to='/buy'\n  // //       //variant='contained'\n  // //       color='primary'\n  // //       size='large'\n  // //       startIcon={<ArrowBackIosIcon />}\n  // //     >\n  // //       Compra\n  // //     </Button>\n  // //   );\n  // // } else if (\n  // //   searchedWineCache?.typeAd === TypeAd.Sell &&\n  // //   pathname !== '/sell'\n  // // ) {\n  //   return (\n  //     <Button\n  //       component={Link}\n  //       to='/sell'\n  //       //variant='contained'\n  //       color='primary'\n  //       size='large'\n  //       startIcon={<ArrowBackIosIcon />}\n  //     >\n  //       Vendi\n  //     </Button>\n  //   );\n  // } else\n  return (\n    <Button\n      aria-label='previous-page'\n      color='primary'\n      size='large'\n      startIcon={<ArrowBackIosIcon />}\n      onClick={() => navigate(-1)}\n    >\n      Torna indietro\n    </Button>\n  );\n};\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z\"\n}), 'ArrowBackIos');\n\nexports.default = _default;","import * as React from 'react';\nimport Box from '@material-ui/core/Box';\nimport { TypeAd } from '../generated/graphql';\n\ninterface BoxProps {\n  width: number;\n  typeAd: TypeAd;\n  children: React.ReactNode;\n  notActive?: boolean;\n}\n\nexport const StyledBox: React.FC<BoxProps> = (props) => {\n  const sellColor = props.notActive ? '#b2b2b2' : 'white';\n  const buyColor = props.notActive ? '#8a425a' : 'primary.main';\n\n  return (\n    <Box\n      boxShadow={3}\n      p={2}\n      m={2}\n      mt={2}\n      px={2}\n      pt={2}\n      width={props.width}\n      color={props.typeAd === TypeAd.Sell ? 'primary.main' : 'white'}\n      borderColor={props.typeAd === TypeAd.Sell ? 'white' : 'primary.main'}\n      bgcolor={props.typeAd === TypeAd.Sell ? sellColor : buyColor}\n      borderRadius={16}\n    >\n      {props.children}\n    </Box>\n  );\n};\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"\n}), 'ExpandMore');\n\nexports.default = _default;","import { useLocation } from '@reach/router';\nimport * as React from 'react';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useIntersect } from '../utils/useIntersectionHook';\nimport { makeStyles, createStyles } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\ninterface InfiniteScrollProps {\n  children: React.ReactNode;\n  fetchMore: () => void;\n  isVisible: boolean;\n  isLoading: boolean;\n  setIsLoading?: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n  })\n);\n\nexport const InfiniteScroll: React.FC<InfiniteScrollProps> = (props) => {\n  const classes = useStyles();\n  const { pathname } = useLocation();\n  const message = pathname.split('/')[1] === 'messaggi';\n  const [ref, entry] = useIntersect({ threshold: 0 });\n  const [isOk, setIsOk] = React.useState<boolean>(true);\n  React.useEffect(() => {\n    if (entry && entry?.intersectionRatio > 0 && isOk) {\n      void props.fetchMore();\n      props.setIsLoading && props.setIsLoading(true);\n      setIsOk(false);\n    } else if (entry?.intersectionRatio === 0 && !isOk) {\n      setIsOk(true);\n      props.setIsLoading && props.setIsLoading(false);\n    }\n  }, [entry?.intersectionRatio]);\n  if (message) {\n    return (\n      <>\n        {props.isVisible ? (\n          props.isLoading ? (\n            <div className={classes.root}>\n              <CircularProgress />\n            </div>\n          ) : (\n            <div className={classes.root} id='page-bottom-boundary' ref={ref}>\n              {' '}\n              <ExpandMoreIcon />\n            </div>\n          )\n        ) : null}\n        {props.children}\n      </>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      {props.children}\n      {props.isVisible ? (\n        props.isLoading ? (\n          <CircularProgress />\n        ) : (\n          <div id='page-bottom-boundary' ref={ref} style={{ height: 30 }}>\n            {' '}\n            <ExpandMoreIcon />\n          </div>\n        )\n      ) : null}\n    </div>\n  );\n};\n","import * as React from 'react';\n\nexport const useIntersect = ({\n  root = null,\n  rootMargin = '0px',\n  threshold = 0,\n}): [\n  React.Dispatch<React.SetStateAction<HTMLDivElement | null>>,\n  IntersectionObserverEntry | null\n] => {\n  const [entry, setEntry] = React.useState<IntersectionObserverEntry | null>(\n    null\n  );\n  const [node, setNode] = React.useState<HTMLDivElement | null>(null);\n\n  const observer = React.useRef<IntersectionObserver | null>(null);\n  React.useEffect(() => {\n    if (observer.current) {\n      observer.current.disconnect();\n    }\n    observer.current = new window.IntersectionObserver(\n      ([entry]) => setEntry(entry),\n      { root, rootMargin, threshold }\n    );\n\n    const { current: currentObserver } = observer;\n\n    if (node) {\n      currentObserver.observe(node);\n    }\n    return () => currentObserver.disconnect();\n  }, [node, root, rootMargin, threshold]);\n  return [setNode, entry];\n};\n","/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport * as React from 'react';\nimport Select from '@material-ui/core/Select';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { QueryOrderBy } from '../../generated/graphql';\n\ninterface OrderProps {\n  setOrder: React.Dispatch<React.SetStateAction<QueryOrderBy>>;\n  order: QueryOrderBy;\n  isAds?: boolean;\n}\n\nexport const Order: React.FC<OrderProps> = (props) => {\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    props.setOrder(event.target.value as QueryOrderBy);\n  };\n  return (\n    <FormControl fullWidth>\n      <InputLabel style={{ color: 'black' }} htmlFor='order'>\n        Ordine risultati\n      </InputLabel>\n      <Select\n        native\n        value={props.order}\n        onChange={handleChange}\n        inputProps={{\n          name: 'order',\n          id: 'order',\n        }}\n      >\n        <option value={QueryOrderBy.CreatedAtDesc}>Dal piu recente</option>\n        <option value={QueryOrderBy.CreatedAtAsc}>Dal meno recente</option>\n        {props.isAds ? (\n          <>\n            <option value={QueryOrderBy.PriceDesc}>Dal piu caro</option>\n            <option value={QueryOrderBy.PriceAsc}>Dal meno caro</option>\n          </>\n        ) : null}\n      </Select>\n    </FormControl>\n  );\n};\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { getThemeProps, useTheme } from '@material-ui/styles';\nexport default function useMediaQuery(queryInput) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var theme = useTheme();\n  var props = getThemeProps({\n    theme: theme,\n    name: 'MuiUseMediaQuery',\n    props: {}\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof queryInput === 'function' && theme === null) {\n      console.error(['Material-UI: The `query` argument provided is invalid.', 'You are providing a function without a theme in the context.', 'One of the parent elements needs to use a ThemeProvider.'].join('\\n'));\n    }\n  }\n\n  var query = typeof queryInput === 'function' ? queryInput(theme) : queryInput;\n  query = query.replace(/^@media( ?)/m, ''); // Wait for jsdom to support the match media feature.\n  // All the browsers Material-UI support have this built-in.\n  // This defensive check is here for simplicity.\n  // Most of the time, the match media logic isn't central to people tests.\n\n  var supportMatchMedia = typeof window !== 'undefined' && typeof window.matchMedia !== 'undefined';\n\n  var _props$options = _extends({}, props, options),\n      _props$options$defaul = _props$options.defaultMatches,\n      defaultMatches = _props$options$defaul === void 0 ? false : _props$options$defaul,\n      _props$options$matchM = _props$options.matchMedia,\n      matchMedia = _props$options$matchM === void 0 ? supportMatchMedia ? window.matchMedia : null : _props$options$matchM,\n      _props$options$noSsr = _props$options.noSsr,\n      noSsr = _props$options$noSsr === void 0 ? false : _props$options$noSsr,\n      _props$options$ssrMat = _props$options.ssrMatchMedia,\n      ssrMatchMedia = _props$options$ssrMat === void 0 ? null : _props$options$ssrMat;\n\n  var _React$useState = React.useState(function () {\n    if (noSsr && supportMatchMedia) {\n      return matchMedia(query).matches;\n    }\n\n    if (ssrMatchMedia) {\n      return ssrMatchMedia(query).matches;\n    } // Once the component is mounted, we rely on the\n    // event listeners to return the correct matches value.\n\n\n    return defaultMatches;\n  }),\n      match = _React$useState[0],\n      setMatch = _React$useState[1];\n\n  React.useEffect(function () {\n    var active = true;\n\n    if (!supportMatchMedia) {\n      return undefined;\n    }\n\n    var queryList = matchMedia(query);\n\n    var updateMatch = function updateMatch() {\n      // Workaround Safari wrong implementation of matchMedia\n      // TODO can we remove it?\n      // https://github.com/mui-org/material-ui/pull/17315#issuecomment-528286677\n      if (active) {\n        setMatch(queryList.matches);\n      }\n    };\n\n    updateMatch();\n    queryList.addListener(updateMatch);\n    return function () {\n      active = false;\n      queryList.removeListener(updateMatch);\n    };\n  }, [query, matchMedia, supportMatchMedia]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useDebugValue({\n      query: query,\n      match: match\n    });\n  }\n\n  return match;\n}","import * as React from 'react';\nimport { StyledBox } from '../../containers/StyledBox';\nimport Typography from '@material-ui/core/Typography';\nimport { ReviewDetailsFragment, TypeAd } from '../../generated/graphql';\nimport { useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { myInfo } from '../../cache';\nimport Rating from '@material-ui/lab/Rating';\n\nexport const CardReview: React.FC<{ review: ReviewDetailsFragment | null }> = ({\n  review,\n}) => {\n  const me = myInfo();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n  const width = matches ? 400 : 250;\n  const isBuy = review?.type === TypeAd.Buy ? true : false;\n  const isMyReview = review?.createdBy._id === me?._id ? true : false;\n  if (!review) return null;\n  return (\n    <StyledBox width={width} typeAd={review.type}>\n      <Rating name='read-only' value={review.rating} readOnly precision={0.1} />\n\n      <Typography\n        align='left'\n        variant='h6'\n        color={isBuy ? 'textSecondary' : 'primary'}\n      >\n        {isMyReview\n          ? `Cosa hai detto della cantina ${review.forUser.firstName}`\n          : `La cantina ${review.createdBy.firstName} dice di te`}\n        :\n      </Typography>\n      <br />\n      <Typography\n        align='left'\n        variant='body1'\n        color={isBuy ? 'textSecondary' : 'primary'}\n      >\n        {review.content}\n      </Typography>\n      <Typography\n        data-testid='date'\n        align='right'\n        variant='caption'\n        color={isBuy ? 'textSecondary' : 'primary'}\n      >\n        Recensito il {review.dateCreated}\n      </Typography>\n    </StyledBox>\n  );\n};\n","import * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Container from '@material-ui/core/Container';\nimport { RouteComponentProps } from '@reach/router';\nimport {\n  QueryOrderBy,\n  useReviewsQuery,\n  ReviewsQuery,\n  ReviewDetailsFragment,\n} from '../generated/graphql';\nimport { BackButton } from '../components/BackButton';\nimport { Order } from '../components/FilterAds/Order';\nimport { InfiniteScroll } from '../containers/InfiniteScrollFetch';\nimport { DeepExtractType } from 'ts-deep-extract-types';\nimport { CardReview } from '../components/Cards/CardReview';\nimport { Loading } from '../components/Loading';\n\nconst Reviews: React.FC<RouteComponentProps> = () => {\n  const [reviews, setReviews] = React.useState<\n    DeepExtractType<ReviewsQuery, ['reviews']>['reviews']\n  >([]);\n  const [order, setOrder] = React.useState<QueryOrderBy>(\n    QueryOrderBy.CreatedAtDesc\n  );\n  const [isLoadFetchMore, setIsLoadFetchMore] = React.useState<boolean>(false);\n  const [isLoadOrder, setIsLoadOrder] = React.useState<boolean>(false);\n\n  const { data, error, loading, fetchMore } = useReviewsQuery({\n    variables: {\n      offset: 0,\n      limit: 4,\n      orderBy: QueryOrderBy.CreatedAtDesc,\n    },\n    onError: (error) => console.log(error),\n    onCompleted: ({ reviews }) => setReviews(reviews?.reviews),\n  });\n\n  React.useEffect(() => {\n    if (reviews?.length && fetchMore) {\n      setIsLoadOrder(true);\n      fetchMore({\n        variables: { orderBy: order, limit: reviews.length },\n      })\n        .then(({ data }) => {\n          setReviews(data.reviews?.reviews);\n          setIsLoadOrder(false);\n        })\n        .catch((e) => {\n          console.log(e);\n          setIsLoadOrder(false);\n        });\n    }\n  }, [order]);\n\n  if (error) return <div>error</div>;\n  if (loading) {\n    return <Loading />;\n  }\n  if (reviews?.length === 0) {\n    return <div>Non hai ancora recensioni</div>;\n  } else if (reviews?.length) {\n    const handleFetchMore = async () => {\n      if (fetchMore) {\n        try {\n          setIsLoadFetchMore(true);\n          const { data } = await fetchMore({\n            variables: {\n              offset: reviews?.length,\n              orderBy: order,\n            },\n          });\n          setReviews([...(reviews as []), ...(data.reviews?.reviews as [])]);\n          setIsLoadFetchMore(false);\n        } catch (e) {\n          console.log(e);\n          setIsLoadFetchMore(false);\n        }\n      }\n    };\n    return (\n      <Container component='main' maxWidth='xs'>\n        <CssBaseline />\n        <BackButton />\n        <br />\n        <Typography color='primary' component='h3' variant='h5'>\n          Le tue recensioni\n        </Typography>\n        <br />\n        <Order setOrder={setOrder} order={order} />\n        {isLoadOrder ? (\n          <Loading />\n        ) : (\n          <InfiniteScroll\n            fetchMore={handleFetchMore}\n            isVisible={reviews?.length !== data?.reviews?.pageCount}\n            isLoading={isLoadFetchMore}\n          >\n            {' '}\n            {reviews?.map((review) => (\n              <CardReview\n                key={review && review._id}\n                review={review as ReviewDetailsFragment}\n              />\n            ))}\n          </InfiniteScroll>\n        )}\n      </Container>\n    );\n  }\n  return <div>Grave errore</div>;\n};\n\nexport default Reviews;\n"],"sourceRoot":""}