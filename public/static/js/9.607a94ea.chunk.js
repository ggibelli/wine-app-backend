(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[9],{454:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(4),r=n(439),o=(n(0),n(41)),a=n(455),c=n.n(a),l=function(){return Object(i.jsx)(r.a,{"aria-label":"previous-page",color:"primary",size:"large",startIcon:Object(i.jsx)(c.a,{}),onClick:function(){return Object(o.c)(-1)},children:"Torna indietro"})}},456:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(4),r=(n(0),n(449)),o=n(14),a=function(e){var t=e.notActive?"#b2b2b2":"white",n=e.notActive?"#8a425a":"primary.main";return Object(i.jsx)(r.a,{boxShadow:3,p:2,m:2,mt:2,px:2,pt:2,width:e.width,color:e.typeAd===o.l.Sell?"primary.main":"white",borderColor:e.typeAd===o.l.Sell?"white":"primary.main",bgcolor:e.typeAd===o.l.Sell?t:n,borderRadius:16,children:e.children})}},458:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n(4),r=n(28),o=n(41),a=n(0),c=n(457),l=n.n(c),d=n(131),s=n(233),u=n(384),v=Object(d.a)((function(){return Object(s.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"}})})),j=function(e){var t=v(),n="messaggi"===Object(o.d)().pathname.split("/")[1],c=function(e){var t=e.root,n=void 0===t?null:t,i=e.rootMargin,o=void 0===i?"0px":i,c=e.threshold,l=void 0===c?0:c,d=a.useState(null),s=Object(r.a)(d,2),u=s[0],v=s[1],j=a.useState(null),b=Object(r.a)(j,2),f=b[0],O=b[1],h=a.useRef(null);return a.useEffect((function(){h.current&&h.current.disconnect(),h.current=new window.IntersectionObserver((function(e){var t=Object(r.a)(e,1)[0];return v(t)}),{root:n,rootMargin:o,threshold:l});var e=h.current;return f&&e.observe(f),function(){return e.disconnect()}}),[f,n,o,l]),[O,u]}({threshold:0}),d=Object(r.a)(c,2),s=d[0],j=d[1],b=a.useState(!0),f=Object(r.a)(b,2),O=f[0],h=f[1];return a.useEffect((function(){j&&(null===j||void 0===j?void 0:j.intersectionRatio)>0&&O?(e.fetchMore(),e.setIsLoading&&e.setIsLoading(!0),h(!1)):0!==(null===j||void 0===j?void 0:j.intersectionRatio)||O||(h(!0),e.setIsLoading&&e.setIsLoading(!1))}),[null===j||void 0===j?void 0:j.intersectionRatio]),n?Object(i.jsxs)(i.Fragment,{children:[e.isVisible?e.isLoading?Object(i.jsx)("div",{className:t.root,children:Object(i.jsx)(u.a,{})}):Object(i.jsxs)("div",{className:t.root,id:"page-bottom-boundary",ref:s,children:[" ",Object(i.jsx)(l.a,{})]}):null,e.children]}):Object(i.jsxs)("div",{className:t.root,children:[e.children,e.isVisible?e.isLoading?Object(i.jsx)(u.a,{}):Object(i.jsxs)("div",{id:"page-bottom-boundary",ref:s,style:{height:30},children:[" ",Object(i.jsx)(l.a,{})]}):null]})}},459:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(4),r=(n(0),n(386)),o=n(231),a=n(235),c=n(14),l=function(e){return Object(i.jsxs)(o.a,{fullWidth:!0,children:[Object(i.jsx)(a.a,{style:{color:"black"},htmlFor:"order",children:"Ordine risultati"}),Object(i.jsxs)(r.a,{native:!0,value:e.order,onChange:function(t){e.setOrder(t.target.value)},inputProps:{name:"order",id:"order"},children:[Object(i.jsx)("option",{value:c.j.CreatedAtDesc,children:"Dal piu recente"}),Object(i.jsx)("option",{value:c.j.CreatedAtAsc,children:"Dal meno recente"}),e.isAds?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("option",{value:c.j.PriceDesc,children:"Dal piu caro"}),Object(i.jsx)("option",{value:c.j.PriceAsc,children:"Dal meno caro"})]}):null]})]})}},463:function(e,t,n){"use strict";var i=n(53),r=n(54);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),a=(0,i(n(55)).default)(o.createElement("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");t.default=a},464:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n(4),r=n(0),o=n(456),a=n(91),c=n(161),l=n.n(c),d=n(429),s=n(41),u=n(14),v=n(35),j=n(482),b=n(440),f=n(435),O=n.n(f),h=n(28),p=n(463),x=n.n(p),m=n(380),y=n(160),g=n.n(y),A=n(93),w=function(e){var t,n,o=e.id,a=e.fontSize,c=void 0===a?"default":a,l=Object(u.E)().data,d=Object(u.N)({variables:{id:o},onCompleted:function(){w(!y)},onError:function(e){return console.log(e)},update:function(e,t){var n,i=t.data;Object(A.f)(e,null===i||void 0===i||null===(n=i.saveAd)||void 0===n?void 0:n.response)}}),s=Object(h.a)(d,1)[0],v=r.useState(!1),j=Object(h.a)(v,2),b=j[0],f=j[1],O=r.useState((null===l||void 0===l||null===(t=l.myInfo)||void 0===t||null===(n=t.savedAds)||void 0===n?void 0:n.map((function(e){return e._id})).includes(o))||!1),p=Object(h.a)(O,2),y=p[0],w=p[1];return r.useEffect((function(){var e,t,n;(null===l||void 0===l||null===(e=l.myInfo)||void 0===e?void 0:e.savedAds)&&!b&&(w((null===l||void 0===l||null===(t=l.myInfo)||void 0===t||null===(n=t.savedAds)||void 0===n?void 0:n.map((function(e){return e._id})).includes(o))||!1),f(!0))}),[l]),console.log(l),Object(i.jsx)(m.a,{"aria-label":"save",onClick:function(){return s()},children:y?Object(i.jsx)(g.a,{fontSize:c}):Object(i.jsx)(x.a,{fontSize:c})})},S=function(e){var t=e.ad,n=Object(v.a)(),r=Object(j.a)(n.breakpoints.up("sm"))?400:250,c=(null===t||void 0===t?void 0:t.typeAd)===u.l.Buy,f=(null===t||void 0===t?void 0:t.isActive)?"auto":"none";return t?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(o.a,{"data-testid":"card-wine",width:r,typeAd:t.typeAd,notActive:!t.isActive,children:Object(i.jsxs)(d.a,{"aria-label":"link-ad",style:{pointerEvents:f,display:"block"},component:s.a,to:"/annunci/".concat(t._id),underline:"none",children:[Object(i.jsxs)(a.a,{component:"h5",variant:"h6",color:c?"textSecondary":"primary",children:[c?"Compro":"Vendo"," ",t.wineName," "]}),Object(i.jsxs)(a.a,{align:"left",variant:"body1",color:c?"textSecondary":"primary",children:["Annata: ",t.harvest,Object(i.jsx)("br",{}),"Gradazione: ",t.abv," % Vol",Object(i.jsx)("br",{}),"Quantit\xe0: ",t.litersTo," l",Object(i.jsx)("br",{}),"Prezzo: ",t.priceFrom," \u20ac/l"]}),Object(i.jsx)("br",{}),Object(i.jsxs)(a.a,{align:"right",variant:"caption",color:c?"textSecondary":"primary",children:["pubblicato il ",t.datePosted]})]})}),Object(i.jsxs)(b.a,{container:!0,justify:"space-between",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(l.a,{fontSize:"small"}),null===t||void 0===t?void 0:t.numberViews,Object(i.jsx)(O.a,{fontSize:"small"}),null===t||void 0===t?void 0:t.activeNegotiations,Object(i.jsx)(w,{id:t._id,fontSize:"small"}),(null===t||void 0===t?void 0:t.savedTimes)||0]}),Object(i.jsx)(a.a,{align:"right",variant:"caption"})]})]}):null}},465:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return p}));var i=n(4),r=n(28),o=n(24),a=n(0),c=n(439),l=n(492),d=n(473),s=n.n(d),u=n(430),v=n(490),j=n(541),b=n(8),f=n(530),O=n(21);var h=Object(b.a)({root:{color:f.a[400],"&$checked":{color:f.a[600]}},checked:{}})((function(e){return Object(i.jsx)(j.a,Object(o.a)({color:"default"},e))})),p=function(e){var t=Object(O.e)(),n=a.useState(!1),o=Object(r.a)(n,2),d=o[0],j=o[1],b=a.useState(!1),f=Object(r.a)(b,2),p=f[0],x=f[1],m=a.useState({priceTo:function(e){return e<=(null===t||void 0===t?void 0:t.priceTo)},abv:function(e){return e>=(null===t||void 0===t?void 0:t.abv)-.5||e<=(null===t||void 0===t?void 0:t.abv)+.5},harvest:function(e){return e===(null===t||void 0===t?void 0:t.harvest)||e-1===(null===t||void 0===t?void 0:t.harvest)},litersTo:function(e){return e>=(null===t||void 0===t?void 0:t.litersTo)}}),y=Object(r.a)(m,2),g=y[0],A=y[1];a.useEffect((function(){if(e.list.length>0){var t=function(e,t){var n=Object.keys(t);return e.filter((function(e){return n.every((function(n){return"function"!==typeof t[n]||t[n](e[n])}))}))}(e.list,g);e.setFilteredList(t)}}),[g,e.list]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(c.a,{onClick:function(){return x(!p)},"aria-label":"filter",color:"primary",size:"large",startIcon:Object(i.jsx)(s.a,{}),children:"Filtri"}),Object(i.jsxs)(l.a,{in:p,children:[e.children,Object(i.jsx)(u.a,{}),Object(i.jsx)(v.a,{control:Object(i.jsx)(h,{checked:d,onChange:function(){A(d?{priceTo:function(e){return e<=(null===t||void 0===t?void 0:t.priceTo)},abv:function(e){return e>=(null===t||void 0===t?void 0:t.abv)-.5||e<=(null===t||void 0===t?void 0:t.abv)+.5},harvest:function(e){return e===(null===t||void 0===t?void 0:t.harvest)||e-1===(null===t||void 0===t?void 0:t.harvest)},litersTo:function(e){return e>=(null===t||void 0===t?void 0:t.litersTo)}}:{priceTo:function(){return!0},harvest:function(){return!0},abv:function(){return!0},litersTo:function(){return!0}}),j(!d)},name:"showAll"}),label:"Mostra tutti gli annunci per questo vino"})]})]})}},529:function(e,t,n){"use strict";n.r(t);var i=n(4),r=n(56),o=n.n(r),a=n(24),c=n(82),l=n(28),d=n(0),s=n(91),u=n(438),v=n(437),j=n(41),b=n(14),f=n(21),O=n(464),h=n(454),p=n(465),x=n(35),m=n(456),y=n(482),g=n(459),A=n(458),w=n(155);t.default=function(){var e,t,n,r,S=Object(x.a)(),k=Object(y.a)(S.breakpoints.up("sm"))?400:250,C=Object(f.e)(),z=d.useState([]),T=Object(l.a)(z,2),I=T[0],N=T[1],L=d.useState(b.j.CreatedAtDesc),E=Object(l.a)(L,2),F=E[0],B=E[1],P=d.useState(!1),D=Object(l.a)(P,2),M=D[0],V=D[1],_=d.useState(!1),R=Object(l.a)(_,2),q=R[0],G=R[1],Q=Object(b.q)({variables:{offset:0,limit:4,orderBy:F,wineName:null===C||void 0===C?void 0:C.wineName,typeProduct:null===C||void 0===C?void 0:C.typeProduct,typeAd:(null===C||void 0===C?void 0:C.typeAd)===b.l.Buy?b.l.Sell:b.l.Buy},onError:function(e){return Object(f.d)({type:"error",message:e.message})}}),J=Q.data,W=Q.loading,$=Q.fetchMore;console.log(null===J||void 0===J||null===(e=J.ads)||void 0===e?void 0:e.ads),d.useEffect((function(){var e,t;((null===C||void 0===C?void 0:C.wineName)||Object(j.c)("/"),$)&&(G(!0),$({variables:{orderBy:F,limit:null===J||void 0===J||null===(e=J.ads)||void 0===e||null===(t=e.ads)||void 0===t?void 0:t.length}}).then((function(){G(!1)})).catch((function(e){G(!1),console.log(e)})))}),[F]);var H=function(){var e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==C){e.next=4;break}return e.abrupt("return");case 4:return Object(f.e)(Object(a.a)({},C)),t=C.typeAd===b.l.Buy?"/buy":"/sell",e.next=8,Object(j.c)(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){return Object(i.jsx)("div",{"data-testid":"no-result",onClick:H,children:"Non abbiamo trovato nulla, vuoi creare un annuncio?"})};if((null===J||void 0===J?void 0:J.ads)&&0===(null===J||void 0===J||null===(t=J.ads)||void 0===t?void 0:t.pageCount))return Object(i.jsx)(K,{});var U,X,Y,Z=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(!0),!$){e.next=12;break}return e.prev=2,e.next=5,$({variables:{offset:null===J||void 0===J||null===(t=J.ads)||void 0===t||null===(n=t.ads)||void 0===n?void 0:n.length,orderBy:F}});case 5:V(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),V(!1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return W?Object(i.jsx)(w.a,{}):(null===J||void 0===J||null===(n=J.ads)||void 0===n||null===(r=n.ads)||void 0===r?void 0:r.length)?Object(i.jsxs)(v.a,{component:"main",maxWidth:"xs",children:[Object(i.jsx)(u.a,{}),Object(i.jsx)(h.a,{}),Object(i.jsx)(s.a,{color:"primary",component:"h3",variant:"h5",children:"La tua ricerca"}),Object(i.jsxs)(m.a,{typeAd:null===C||void 0===C?void 0:C.typeAd,width:k,children:[Object(i.jsxs)(s.a,{component:"h5",variant:"h6",children:[(null===C||void 0===C?void 0:C.typeAd)===b.l.Buy?"Compro ":"Vendo"," ",null===C||void 0===C?void 0:C.wineName]}),Object(i.jsxs)(s.a,{align:"left",variant:"body1",children:["Annata: ".concat(null===C||void 0===C?void 0:C.harvest),Object(i.jsx)("br",{}),"Gradazione: ".concat(null===C||void 0===C?void 0:C.abv," % Vol"),Object(i.jsx)("br",{}),"Quantit\xe0: ".concat(null===C||void 0===C?void 0:C.litersTo," l"),Object(i.jsx)("br",{}),"Prezzo: ".concat(null===C||void 0===C?void 0:C.priceTo," euro al litro")]})]}),Object(i.jsx)("br",{}),Object(i.jsx)(s.a,{color:"primary",component:"h3",variant:"h5",children:"I nostri risultati"}),Object(i.jsx)(s.a,{variant:"body2",children:I&&I.length>0?"Questi sono gli annunci che abbiamo trovato per te: sono stati pubblicati da utenti interessati all'acquisto.":"Non abbiamo trovato nulla che corrisponde ai criteri di ricerca, ma esistono annunci per questo vino, clicca su filtri e mostra tutto per vederli"}),Object(i.jsxs)(p.a,{list:null===J||void 0===J||null===(U=J.ads)||void 0===U?void 0:U.ads,setFilteredList:N,children:[" ",Object(i.jsx)(g.a,{isAds:!0,setOrder:B,order:F})]}),Object(i.jsx)("br",{}),q?Object(i.jsx)(w.a,{}):Object(i.jsxs)(A.a,{fetchMore:Z,isVisible:(null===(X=J.ads.ads)||void 0===X?void 0:X.length)!==(null===J||void 0===J||null===(Y=J.ads)||void 0===Y?void 0:Y.pageCount),isLoading:M,children:[" ",null===I||void 0===I?void 0:I.map((function(e){return Object(i.jsx)(O.a,{ad:e},null===e||void 0===e?void 0:e._id)}))]})]}):Object(i.jsx)("div",{children:"Grave errore"})}}}]);
//# sourceMappingURL=9.607a94ea.chunk.js.map