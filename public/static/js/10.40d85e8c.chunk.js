(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[10],{480:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(458),r=(n(0),n(42)),o=n(481),a=n.n(o),c=n(3),l=function(){return Object(c.jsx)(i.a,{"aria-label":"previous-page",color:"primary",size:"large",startIcon:Object(c.jsx)(a.a,{}),onClick:function(){return Object(r.c)(-1)},children:"Torna indietro"})}},482:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(0);var i=n(473),r=n(13),o=n(3),a=function(e){var t=e.notActive?"#b2b2b2":"white",n=e.notActive?"#8a425a":"primary.main";return Object(o.jsx)(i.a,{boxShadow:3,p:2,m:2,mt:2,px:2,pt:2,width:e.width,color:e.typeAd===r.i.Sell?"primary.main":"white",borderColor:e.typeAd===r.i.Sell?"white":"primary.main",bgcolor:e.typeAd===r.i.Sell?t:n,borderRadius:16,children:e.children})}},484:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n(31),r=n(42),o=n(0),a=n(483),c=n.n(a),l=n(138),s=n(243),d=n(399),u=n(3),v=Object(l.a)((function(){return Object(s.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"}})})),j=function(e){var t=v(),n="messaggi"===Object(r.d)().pathname.split("/")[1],a=function(e){var t=e.root,n=void 0===t?null:t,r=e.rootMargin,a=void 0===r?"0px":r,c=e.threshold,l=void 0===c?0:c,s=o.useState(null),d=Object(i.a)(s,2),u=d[0],v=d[1],j=o.useState(null),b=Object(i.a)(j,2),f=b[0],h=b[1],O=o.useRef(null);return o.useEffect((function(){O.current&&O.current.disconnect(),O.current=new window.IntersectionObserver((function(e){var t=Object(i.a)(e,1)[0];return v(t)}),{root:n,rootMargin:a,threshold:l});var e=O.current;return f&&e.observe(f),function(){return e.disconnect()}}),[f,n,a,l]),[h,u]}({threshold:0}),l=Object(i.a)(a,2),s=l[0],j=l[1],b=o.useState(!0),f=Object(i.a)(b,2),h=f[0],O=f[1];return o.useEffect((function(){j&&(null===j||void 0===j?void 0:j.intersectionRatio)>0&&h?(e.fetchMore(),e.setIsLoading&&e.setIsLoading(!0),O(!1)):0!==(null===j||void 0===j?void 0:j.intersectionRatio)||h||(O(!0),e.setIsLoading&&e.setIsLoading(!1))}),[null===j||void 0===j?void 0:j.intersectionRatio]),n?Object(u.jsxs)(u.Fragment,{children:[e.isVisible?e.isLoading?Object(u.jsx)("div",{className:t.root,children:Object(u.jsx)(d.a,{})}):Object(u.jsxs)("div",{className:t.root,id:"page-bottom-boundary",ref:s,children:[" ",Object(u.jsx)(c.a,{})]}):null,e.children]}):Object(u.jsxs)("div",{className:t.root,children:[e.children,e.isVisible?e.isLoading?Object(u.jsx)(d.a,{}):Object(u.jsxs)("div",{id:"page-bottom-boundary",ref:s,style:{height:30},children:[" ",Object(u.jsx)(c.a,{})]}):null]})}},485:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(0);var i=n(405),r=n(241),o=n(245),a=n(13),c=n(3),l=function(e){return Object(c.jsxs)(r.a,{fullWidth:!0,children:[Object(c.jsx)(o.a,{style:{color:"black"},htmlFor:"order",children:"Ordine risultati"}),Object(c.jsxs)(i.a,{native:!0,value:e.order,onChange:function(t){e.setOrder(t.target.value)},inputProps:{name:"order",id:"order"},children:[Object(c.jsx)("option",{value:a.h.CreatedAtDesc,children:"Dal piu recente"}),Object(c.jsx)("option",{value:a.h.CreatedAtAsc,children:"Dal meno recente"}),e.isAds?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("option",{value:a.h.PriceDesc,children:"Dal piu caro"}),Object(c.jsx)("option",{value:a.h.PriceAsc,children:"Dal meno caro"})]}):null]})]})}},490:function(e,t,n){"use strict";var i=n(52),r=n(53);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),a=(0,i(n(54)).default)(o.createElement("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");t.default=a},491:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return p}));var i=n(31),r=n(23),o=n(0),a=n(458),c=n(516),l=n(500),s=n.n(l),d=n(462),u=n(515),v=n(563),j=n(6),b=n(550),f=n(18);var h=n(3),O=Object(j.a)({root:{color:b.a[400],"&$checked":{color:b.a[600]}},checked:{}})((function(e){return Object(h.jsx)(v.a,Object(r.a)({color:"default"},e))})),p=function(e){var t=Object(f.e)(),n=o.useState(!1),r=Object(i.a)(n,2),l=r[0],v=r[1],j=o.useState(!1),b=Object(i.a)(j,2),p=b[0],x=b[1],m=o.useState({priceTo:function(e){return e<=(null===t||void 0===t?void 0:t.priceTo)},abv:function(e){return e>=(null===t||void 0===t?void 0:t.abv)-.5||e<=(null===t||void 0===t?void 0:t.abv)+.5},harvest:function(e){return e===(null===t||void 0===t?void 0:t.harvest)||e-1===(null===t||void 0===t?void 0:t.harvest)},litersTo:function(e){return e>=(null===t||void 0===t?void 0:t.litersTo)}}),g=Object(i.a)(m,2),y=g[0],A=g[1];o.useEffect((function(){if(e.list.length>0){var t=function(e,t){var n=Object.keys(t);return e.filter((function(e){return n.every((function(n){return"function"!==typeof t[n]||t[n](e[n])}))}))}(e.list,y);e.setFilteredList(t)}}),[y,e.list]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(a.a,{onClick:function(){return x(!p)},"aria-label":"filter",color:"primary",size:"large",startIcon:Object(h.jsx)(s.a,{}),children:"Filtri"}),Object(h.jsxs)(c.a,{in:p,children:[e.children,Object(h.jsx)(d.a,{}),Object(h.jsx)(u.a,{control:Object(h.jsx)(O,{checked:l,onChange:function(){A(l?{priceTo:function(e){return e<=(null===t||void 0===t?void 0:t.priceTo)},abv:function(e){return e>=(null===t||void 0===t?void 0:t.abv)-.5||e<=(null===t||void 0===t?void 0:t.abv)+.5},harvest:function(e){return e===(null===t||void 0===t?void 0:t.harvest)||e-1===(null===t||void 0===t?void 0:t.harvest)},litersTo:function(e){return e>=(null===t||void 0===t?void 0:t.litersTo)}}:{priceTo:function(){return!0},harvest:function(){return!0},abv:function(){return!0},litersTo:function(){return!0}}),v(!l)},name:"showAll"}),label:"Mostra tutti gli annunci per questo vino"})]})]})}},492:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n(23),r=n(0),o=n(482),a=n(94),c=n(171),l=n.n(c),s=n(461),d=n(42),u=n(13),v=n(37),j=n(498),b=n(471),f=n(169),h=n.n(f),O=n(31),p=n(490),x=n.n(p),m=n(400),g=n(170),y=n.n(g),A=n(97),w=n(3),C=function(e){var t,n,i=e.id,o=e.fontSize,a=void 0===o?"default":o,c=e.timesFavorite,l=Object(u.C)().data,s=Object(u.L)({variables:{id:i},onCompleted:function(){C(!g)},onError:function(e){return console.error(e)},update:function(e,t){var n,i=t.data;Object(A.f)(e,null===i||void 0===i||null===(n=i.saveAd)||void 0===n?void 0:n.response)}}),d=Object(O.a)(s,1)[0],v=r.useState(!1),j=Object(O.a)(v,2),b=j[0],f=j[1],h=r.useState((null===l||void 0===l||null===(t=l.myInfo)||void 0===t||null===(n=t.savedAds)||void 0===n?void 0:n.map((function(e){return e._id})).includes(i))||!1),p=Object(O.a)(h,2),g=p[0],C=p[1];return r.useEffect((function(){var e,t,n;(null===l||void 0===l||null===(e=l.myInfo)||void 0===e?void 0:e.savedAds)&&!b&&(C((null===l||void 0===l||null===(t=l.myInfo)||void 0===t||null===(n=t.savedAds)||void 0===n?void 0:n.map((function(e){return e._id})).includes(i))||!1),f(!0))}),[l]),Object(w.jsxs)(m.a,{"aria-label":"save",onClick:function(){return d()},size:"small",children:[g?Object(w.jsx)(y.a,{fontSize:a}):Object(w.jsx)(x.a,{fontSize:a}),c]})},S=n(458),F=n(18),k=function(e){var t,n=e.ad,r=Object(v.a)(),c=Object(j.a)(r.breakpoints.up("sm"))?400:250,f=(null===n||void 0===n?void 0:n.typeAd)===u.i.Buy,O=(null===n||void 0===n?void 0:n.isActive)?"auto":"none",p=Object(F.c)(),x=null===p||void 0===p||null===(t=p.ads)||void 0===t?void 0:t.map((function(e){return e._id})).includes(n._id);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(o.a,{"data-testid":"card-wine",width:c,typeAd:n.typeAd,notActive:!n.isActive,children:[Object(w.jsxs)(s.a,{"aria-label":"link-ad",style:{pointerEvents:O,display:"block"},component:d.a,to:"/annunci/".concat(n._id),underline:"none",children:[Object(w.jsxs)(a.a,{component:"h5",variant:"h6",color:f?"textSecondary":"primary",children:[f?"Compro":"Vendo"," ",n.wineName," "]}),Object(w.jsxs)(a.a,{align:"left",variant:"body1",color:f?"textSecondary":"primary",children:["Annata: ",n.harvest,Object(w.jsx)("br",{}),"Gradazione: ",n.abv," % Vol",Object(w.jsx)("br",{}),"Quantit\xe0: ",n.litersTo," l",Object(w.jsx)("br",{}),"Prezzo: ",n.priceFrom," \u20ac/l"]})]}),Object(w.jsx)("br",{}),Object(w.jsxs)(b.a,{container:!0,justify:"space-between",children:[" ",Object(w.jsxs)(a.a,{"data-testid":"published",align:"right",variant:"caption",color:f?"textSecondary":"primary",children:["pubblicato il ",n.datePosted]}),Object(w.jsxs)("div",{style:{color:"secondary"},children:[Object(w.jsx)(l.a,{fontSize:"small"}),null===n||void 0===n?void 0:n.numberViews,Object(w.jsx)(h.a,{fontSize:"small"}),null===n||void 0===n?void 0:n.activeNegotiations]})]})]}),Object(w.jsxs)(b.a,{container:!0,justify:"space-between",children:[Object(w.jsx)("div",{children:x?Object(w.jsx)(S.a,{onClick:function(){Object(F.e)(Object(i.a)(Object(i.a)({},n),{},{typeProduct:u.j.AdWine,wine:void 0})),Object(d.c)("/annunci")},children:"Cerca di nuovo"}):null}),Object(w.jsx)("div",{children:Object(w.jsx)(C,{id:n._id,fontSize:"small",timesFavorite:(null===n||void 0===n?void 0:n.savedTimes)||0})})]})]})}},551:function(e,t,n){"use strict";n.r(t);var i=n(55),r=n.n(i),o=n(81),a=n(31),c=n(0),l=n(94),s=n(455),d=n(470),u=n(13),v=n(480),j=n(485),b=n(484),f=n(18),h=n(492),O=n(515),p=n(462),x=n(491),m=n(164),g=n(3);t.default=function(){var e,t,n,i,y=Object(f.c)(),A=c.useState(u.h.CreatedAtDesc),w=Object(a.a)(A,2),C=w[0],S=w[1],F=c.useState(0),k=Object(a.a)(F,2),z=k[0],T=k[1],U=Object(u.m)({variables:{offset:0,limit:4,orderBy:u.h.CreatedAtDesc,user:null===y||void 0===y?void 0:y._id,isActive:void 0},onError:function(e){return console.error(e)},onCompleted:function(e){var t=e.adsForUser;T(null===t||void 0===t?void 0:t.pageCount)}}),I=U.data,_=U.loading,L=U.error,D=U.fetchMore,E=c.useState(!1),M=Object(a.a)(E,2),N=M[0],P=M[1],V=c.useState(!1),B=Object(a.a)(V,2),R=B[0],W=B[1],G=c.useState(!1),J=Object(a.a)(G,2),q=J[0],Q=J[1];if(c.useEffect((function(){var e,t,n=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,i,o,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.prev=1,e.next=4,D({variables:{orderBy:C,limit:null===I||void 0===I||null===(t=I.adsForUser)||void 0===t||null===(n=t.ads)||void 0===n?void 0:n.length,isActive:N}});case 4:a=e.sent,Q(!1),(null===(i=a.data.adsForUser)||void 0===i?void 0:i.pageCount)!==z&&T(null===(o=a.data.adsForUser)||void 0===o?void 0:o.pageCount),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();(null===I||void 0===I||null===(e=I.adsForUser)||void 0===e||null===(t=e.ads)||void 0===t?void 0:t.length)&&D&&n()}),[C]),_)return Object(g.jsx)(m.a,{});if(!(null===y||void 0===y?void 0:y._id)||L)return Object(g.jsx)("div",{children:"error"});if(0===(null===I||void 0===I||null===(e=I.adsForUser)||void 0===e||null===(t=e.ads)||void 0===t?void 0:t.length))return Object(g.jsx)("div",{children:"Non hai ancora creato annunci"});if(null===I||void 0===I||null===(n=I.adsForUser)||void 0===n||null===(i=n.ads)||void 0===i?void 0:i.length){var $,H,K,X,Y=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,i,o,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W(!0),!D||!(null===I||void 0===I||null===(t=I.adsForUser)||void 0===t||null===(n=t.ads)||void 0===n?void 0:n.length)){e.next=13;break}return e.prev=2,e.next=5,D({variables:{offset:null===I||void 0===I||null===(i=I.adsForUser)||void 0===i||null===(o=i.ads)||void 0===o?void 0:o.length,orderBy:C,isActive:N}});case 5:W(!1),(null===(a=I.adsForUser)||void 0===a?void 0:a.pageCount)!==z&&T(null===(c=I.adsForUser)||void 0===c?void 0:c.pageCount),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),W(!1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(d.a,{component:"main",maxWidth:"xs",children:[Object(g.jsx)(s.a,{}),Object(g.jsx)(v.a,{}),Object(g.jsx)("br",{}),Object(g.jsx)(l.a,{color:"primary",component:"h3",variant:"h5",children:"Gli annunci che hai creato"}),Object(g.jsx)("br",{}),Object(g.jsx)(j.a,{setOrder:S,order:C}),Object(g.jsx)(p.a,{}),Object(g.jsx)(O.a,{control:Object(g.jsx)(x.b,{checked:N,onChange:function(){P(!N)},name:"showAll"}),label:"Nascondi gli annunci inattivi"}),q?Object(g.jsx)(m.a,{}):Object(g.jsxs)(b.a,{fetchMore:Y,isVisible:(null===I||void 0===I||null===($=I.adsForUser)||void 0===$||null===(H=$.ads)||void 0===H?void 0:H.length)<z,isLoading:R,children:[" ",null===I||void 0===I||null===(K=I.adsForUser)||void 0===K||null===(X=K.ads)||void 0===X?void 0:X.filter((function(e){return N?(null===e||void 0===e?void 0:e.isActive)===N:e})).map((function(e){return Object(g.jsx)(h.a,{ad:e},e&&e._id)}))]})]})}return Object(g.jsx)("div",{children:"gravissimo errore"})}}}]);