{"version":3,"sources":["components/BackButton.tsx","../node_modules/@material-ui/icons/ArrowBackIos.js","containers/CloseNegotiationButton.tsx","containers/CreateReview.tsx","components/ReviewModal/index.tsx","../node_modules/@material-ui/core/esm/DialogTitle/DialogTitle.js","pages/Negotiation.tsx"],"names":["BackButton","aria-label","color","size","startIcon","onClick","navigate","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","CloseNegotiationButton","id","isBuy","classes","useStyles","useUpdateNegotiationMutation","onCompleted","closedNegotiation","updateNegotiation","errors","length","errorMessages","map","error","text","notification","type","message","toString","onError","closeNegotiation","loading","handleCloseNegotiation","a","variables","negotiation","_id","isConcluded","className","buyButton","sellButton","disabled","CreateReview","review","closeModal","useCreateReviewMutation","createdReview","createReview","Button","labels","0.5","1","1.5","2","2.5","3","3.5","4","4.5","5","CreateReviewModal","idUser","idNegotiation","open","setOpen","setValue","hover","setHover","setReview","useStylesHook","classesTextField","useStylesForms","classesStars","useStyleRating","handleClose","TypeAd","Buy","style","display","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","root","name","precision","onChange","event","newValue","onChangeActive","newHover","Box","ml","TextField","multiline","rows","helperText","target","InputLabelProps","InputProps","inputSell","underline","underlineSell","label","placeholder","DialogActions","forUser","rating","content","props","ref","children","_props$disableTypogra","disableTypography","other","_objectWithoutProperties","_extends","clsx","Typography","component","variant","withStyles","margin","padding","flex","Negotiation","useParams","result","useNegotiationQuery","data","adWine","ad","__typename","UserContact","postedBy","hideContact","data-testid","phoneNumber","email","maxWidth","paper","wineName","wine","denominazioneZona","forUserAd","Link","to"],"mappings":"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","file":"static/js/14.232e721f.chunk.js","sourcesContent":["import Button from '@material-ui/core/Button';\nimport * as React from 'react';\n// import { searchedWine } from '../cache';\nimport { navigate } from '@reach/router';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\n// import { TypeAd } from '../generated/graphql';\n\nexport const BackButton: React.FC = () => {\n  // // const searchedWineCache = searchedWine();\n  // // const { pathname } = useLocation();\n  // // if (searchedWineCache?.typeAd === TypeAd.Buy && pathname !== '/buy') {\n  // //   return (\n  // //     <Button\n  // //       component={Link}\n  // //       to='/buy'\n  // //       //variant='contained'\n  // //       color='primary'\n  // //       size='large'\n  // //       startIcon={<ArrowBackIosIcon />}\n  // //     >\n  // //       Compra\n  // //     </Button>\n  // //   );\n  // // } else if (\n  // //   searchedWineCache?.typeAd === TypeAd.Sell &&\n  // //   pathname !== '/sell'\n  // // ) {\n  //   return (\n  //     <Button\n  //       component={Link}\n  //       to='/sell'\n  //       //variant='contained'\n  //       color='primary'\n  //       size='large'\n  //       startIcon={<ArrowBackIosIcon />}\n  //     >\n  //       Vendi\n  //     </Button>\n  //   );\n  // } else\n  return (\n    <Button\n      aria-label='previous-page'\n      color='primary'\n      size='large'\n      startIcon={<ArrowBackIosIcon />}\n      onClick={() => navigate(-1)}\n    >\n      Torna indietro\n    </Button>\n  );\n};\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z\"\n}), 'ArrowBackIos');\n\nexports.default = _default;","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { notification } from '../cache';\nimport { useUpdateNegotiationMutation } from '../generated/graphql';\nimport { useStyles } from '../utils/styleHook';\n\nexport const CloseNegotiationButton: React.FC<{\n  id: string;\n  isBuy?: boolean;\n}> = ({ id, isBuy }) => {\n  const classes = useStyles();\n  const [closeNegotiation, { loading }] = useUpdateNegotiationMutation({\n    onCompleted: (closedNegotiation) => {\n      if (closedNegotiation.updateNegotiation?.errors?.length) {\n        const errorMessages = closedNegotiation.updateNegotiation?.errors.map(\n          (error) => error?.text\n        );\n        notification({\n          type: 'error',\n          message: `${errorMessages.toString()}`,\n        });\n      } else {\n        notification({\n          message: 'trattativa chiusa con successo',\n          type: 'success',\n        });\n      }\n    },\n\n    onError: (error) => notification({ type: 'error', message: error.message }),\n  });\n\n  const handleCloseNegotiation = async () => {\n    await closeNegotiation({\n      variables: { negotiation: { _id: id, isConcluded: true } },\n    });\n  };\n\n  return (\n    <Button\n      aria-label='close-negotiation'\n      className={isBuy ? classes.buyButton : classes.sellButton}\n      disabled={loading}\n      onClick={handleCloseNegotiation}\n    >\n      Dichiara chiusa la trattativa\n    </Button>\n  );\n};\n","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { notification } from '../cache';\nimport { useCreateReviewMutation, ReviewInput } from '../generated/graphql';\n\nexport const CreateReview: React.FC<{\n  review: ReviewInput;\n  disabled: boolean;\n  closeModal?: () => void;\n}> = ({ review, disabled, closeModal }) => {\n  const [createReview, { loading }] = useCreateReviewMutation({\n    onCompleted: (createdReview) => {\n      if (createdReview.createReview?.errors?.length) {\n        const errorMessages = createdReview.createReview?.errors.map(\n          (error) => error?.text\n        );\n        notification({\n          type: 'error',\n          message: `${errorMessages.toString()}`,\n        });\n      } else {\n        notification({\n          type: 'success',\n          message: 'Recensione creata con successo',\n        });\n      }\n    },\n\n    onError: (error) => notification({ type: 'error', message: error.message }),\n  });\n\n  const handleCreateReview = () => {\n    closeModal && closeModal();\n    void createReview({\n      variables: {\n        review,\n      },\n    });\n  };\n\n  return (\n    <Button\n      disabled={disabled || loading}\n      aria-label='review'\n      onClick={handleCreateReview}\n      color='primary'\n    >\n      Recensisci\n    </Button>\n  );\n};\n","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { TypeAd } from '../../generated/graphql';\nimport {\n  StyledRating,\n  useStyles as useStylesHook,\n  useStylesForms,\n  useStyleRating,\n} from '../../utils/styleHook';\nimport Box from '@material-ui/core/Box';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { CreateReview } from '../../containers/CreateReview';\nconst labels: { [index: string]: string } = {\n  0.5: 'Useless',\n  1: 'Useless+',\n  1.5: 'Poor',\n  2: 'Poor+',\n  2.5: 'Ok',\n  3: 'Ok+',\n  3.5: 'Good',\n  4: 'Good+',\n  4.5: 'Excellent',\n  5: 'Excellent+',\n};\n\nexport const CreateReviewModal: React.FC<{\n  idNegotiation: string;\n  idUser: string;\n  type: TypeAd;\n}> = ({ idUser, idNegotiation, type }) => {\n  const [open, setOpen] = React.useState<boolean>(false);\n  const [value, setValue] = React.useState<number | null>(2);\n  const [hover, setHover] = React.useState<number>(-1);\n  const [review, setReview] = React.useState<string>('');\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setReview(event.target.value);\n  };\n  const classes = useStylesHook();\n  const classesTextField = useStylesForms();\n  const classesStars = useStyleRating();\n  const handleModal = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <Button\n        aria-label='review'\n        className={type === TypeAd.Buy ? classes.buyButton : classes.sellButton}\n        onClick={handleModal}\n      >\n        Lascia una recensione\n      </Button>\n      <div style={{ display: 'none' }}>\n        <Dialog\n          open={open}\n          onClose={handleClose}\n          aria-labelledby='form-dialog-title'\n        >\n          <DialogTitle id='form-dialog-title'>\n            Recensisci la trattativa\n          </DialogTitle>\n\n          <DialogContent>\n            <div className={classesStars.root}>\n              <StyledRating\n                name='hover-feedback'\n                value={value}\n                precision={0.5}\n                onChange={(event, newValue) => {\n                  setValue(newValue);\n                }}\n                onChangeActive={(event, newHover) => {\n                  setHover(newHover);\n                }}\n              />\n              {value !== null && (\n                <Box ml={2}>{labels[hover !== -1 ? hover : value]}</Box>\n              )}\n            </div>\n            <TextField\n              color='primary'\n              multiline\n              rows={4}\n              value={review}\n              error={review.length > 0 && review.length <= 5}\n              helperText='Lunghezza minima 5 caratteri'\n              onChange={handleChange}\n              InputLabelProps={{\n                style: { color: '#6d1331' },\n              }}\n              InputProps={{\n                className: classesTextField.inputSell,\n                classes: {\n                  underline: classesTextField.underlineSell,\n                },\n              }}\n              id='outlined-multiline-flexible'\n              label='Recensione'\n              placeholder='Ottima persona con cui....'\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button\n              aria-label='close-modal'\n              onClick={handleClose}\n              color='primary'\n            >\n              Cancel\n            </Button>\n            <CreateReview\n              disabled={review.length <= 5}\n              review={{\n                forUser: idUser,\n                rating: value as number,\n                negotiation: idNegotiation,\n                content: review,\n                type: type,\n              }}\n              closeModal={handleClose}\n            />\n          </DialogActions>\n        </Dialog>\n      </div>\n    </>\n  );\n};\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    margin: 0,\n    padding: '16px 24px',\n    flex: '0 0 auto'\n  }\n};\nvar DialogTitle = /*#__PURE__*/React.forwardRef(function DialogTitle(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"disableTypography\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), disableTypography ? children : /*#__PURE__*/React.createElement(Typography, {\n    component: \"h2\",\n    variant: \"h6\"\n  }, children));\n});\nprocess.env.NODE_ENV !== \"production\" ? DialogTitle.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the children won't be wrapped by a typography component.\n   * For instance, this can be useful to render an h4 instead of the default h2.\n   */\n  disableTypography: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogTitle'\n})(DialogTitle);","/* eslint-disable @typescript-eslint/restrict-template-expressions */\nimport * as React from 'react';\nimport { Link, RouteComponentProps, useParams } from '@reach/router';\nimport { useNegotiationQuery } from '../generated/graphql';\nimport { Container, CssBaseline } from '@material-ui/core';\nimport { BackButton } from '../components/BackButton';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { CloseNegotiationButton } from '../containers/CloseNegotiationButton';\nimport { useStyles } from '../utils/styleHook';\nimport { Loading } from '../components/Loading';\nimport { CreateReviewModal } from '../components/ReviewModal';\n\nconst Negotiation: React.FC<RouteComponentProps> = () => {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n  const { id }: { id: string } = useParams();\n  const classes = useStyles();\n  const result = useNegotiationQuery({ variables: { id } });\n  const { data, loading, error } = result;\n  const adWine =\n    data?.negotiation?.ad.__typename === 'AdWine'\n      ? data?.negotiation?.ad\n      : null;\n  const UserContact = () => {\n    if (adWine?.postedBy.hideContact) {\n      return null;\n    }\n    return (\n      <div data-testid='info-contact'>\n        puoi contattare l utente al numero: {adWine?.postedBy.phoneNumber} o\n        alla mail {adWine?.postedBy.email}\n      </div>\n    );\n  };\n\n  if (error) return <div>{error.message}</div>;\n\n  if (loading) return <Loading />;\n  return (\n    <Container component='main' maxWidth='xs'>\n      <CssBaseline />\n      <BackButton />\n      <div className={classes.paper}>\n        <Typography color='primary' component='h3' variant='h5'>\n          Gestisci la trattativa\n        </Typography>\n        <Typography color='secondary' variant='body1'>\n          Puoi decidere se contattare l utente tramite il nostro portale o\n          usando i suoi contatti\n        </Typography>\n      </div>\n      <UserContact />\n      <Typography color='secondary' variant='body1'>\n        Questa trattativa riguarda l annuncio per {adWine?.wineName}{' '}\n        {adWine?.wine?.denominazioneZona}\n      </Typography>\n      {data?.negotiation?.isConcluded ? (\n        <CreateReviewModal\n          idNegotiation={data.negotiation._id}\n          idUser={data.negotiation.forUserAd._id}\n          type={data.negotiation.type}\n        />\n      ) : (\n        <CloseNegotiationButton id={id} />\n      )}\n      <Button\n        aria-label='open-chat'\n        className={classes.sellButton}\n        component={Link}\n        to={`/messaggi/${data?.negotiation?._id}`}\n      >\n        Vai alla chat\n      </Button>\n    </Container>\n  );\n};\n\nexport default Negotiation;\n"],"sourceRoot":""}