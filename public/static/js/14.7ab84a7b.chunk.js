(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[14],{454:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(4),i=n(439),o=(n(0),n(41)),r=n(455),c=n.n(r),l=function(){return Object(a.jsx)(i.a,{"aria-label":"previous-page",color:"primary",size:"large",startIcon:Object(a.jsx)(c.a,{}),onClick:function(){return Object(o.c)(-1)},children:"Torna indietro"})}},455:function(e,t,n){"use strict";var a=n(53),i=n(54);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(0)),r=(0,a(n(55)).default)(o.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");t.default=r},460:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(4),i=n(28),o=n(0),r=n(439),c=n(441),l=n(443),s=n(442),d=n(56),u=n.n(d),j=n(82),b=n(19),v=n(14),p=function(e){var t=e.id,n=e.handleClose,o=Object(v.M)({onCompleted:function(e){var t,n;if(null===(t=e.updateNegotiation)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var a,i=null===(a=e.updateNegotiation)||void 0===a?void 0:a.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(b.d)({type:"error",message:"".concat(i.toString())})}else Object(b.d)({message:"trattativa chiusa con successo",type:"success"})},onError:function(e){return Object(b.d)({type:"error",message:e.message})}}),c=Object(i.a)(o,2),l=c[0],s=c[1].loading,d=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,l({variables:{negotiation:{_id:t,isConcluded:!0}}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(r.a,{"aria-label":"close-negotiation",disabled:s,onClick:d,children:"Dichiara chiusa la trattativa"})},O=n(93),h=function(e){var t=e.id,n=e.handleClose,o=Object(v.t)({onCompleted:function(e){var t,n;if(null===(t=e.deleteNegotiation)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var a,i=null===(a=e.deleteNegotiation)||void 0===a?void 0:a.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(b.d)({type:"error",message:"".concat(i.toString())})}else Object(b.d)({message:"trattativa cancellata con successo",type:"info"})},onError:function(e){return Object(b.d)({type:"error",message:e.message})},update:function(e,t){var n,a=t.data;Object(O.g)(e,null===a||void 0===a||null===(n=a.deleteNegotiation)||void 0===n?void 0:n.response)}}),c=Object(i.a)(o,2),l=c[0],s=c[1].loading,d=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,l({variables:{id:t}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(r.a,{"aria-label":"cancel-negotiation",disabled:s,onClick:d,children:"Cancella la trattativa"})},f=n(133),g=function(e){var t=e.id,n=e.isBuy,d=e.isMessage,u=Object(f.c)(),j=o.useState(!1),b=Object(i.a)(j,2),v=b[0],O=b[1],g=function(){O(!1)};return n=!!d,Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(r.a,{fullWidth:!0,"aria-label":"close-negotiation-popup",className:n?u.buyButton:u.sellButton,onClick:function(){O(!0)},children:"Chiudi trattativa"}),Object(a.jsx)("div",{style:{display:"none"},children:Object(a.jsxs)(c.a,{open:v,onClose:g,"aria-labelledby":"close-negotiation",children:[Object(a.jsxs)(s.a,{children:[Object(a.jsx)(h,{id:t,handleClose:g}),Object(a.jsx)(p,{id:t,handleClose:g})]}),Object(a.jsx)(l.a,{children:Object(a.jsx)(r.a,{onClick:g,color:"primary",children:"Cancel"})})]})})]})}},461:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(4),i=n(28),o=n(439),r=n(0),c=n(14),l=n(133),s=n(449),d=n(441),u=n(442),j=n(443),b=n(381),v=n(468),p=n(19),O=function(e){var t=e.review,n=e.disabled,r=e.closeModal,l=Object(c.r)({onCompleted:function(e){var t,n;if(null===(t=e.createReview)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.length){var a,i=null===(a=e.createReview)||void 0===a?void 0:a.errors.map((function(e){return null===e||void 0===e?void 0:e.text}));Object(p.d)({type:"error",message:"".concat(i.toString())})}else Object(p.d)({type:"success",message:"Recensione creata con successo"})},onError:function(e){return Object(p.d)({type:"error",message:e.message})}}),s=Object(i.a)(l,2),d=s[0],u=s[1].loading;return Object(a.jsx)(o.a,{disabled:n||u,"aria-label":"review",onClick:function(){r&&r(),d({variables:{review:t}})},color:"primary",children:"Recensisci"})},h={.5:"Useless",1:"Useless+",1.5:"Poor",2:"Poor+",2.5:"Ok",3:"Ok+",3.5:"Good",4:"Good+",4.5:"Excellent",5:"Excellent+"},f=function(e){var t=e.idUser,n=e.idNegotiation,p=e.type,f=e.isMessage,g=r.useState(!1),m=Object(i.a)(g,2),x=m[0],y=m[1],C=r.useState(2),w=Object(i.a)(C,2),N=w[0],k=w[1],B=r.useState(-1),S=Object(i.a)(B,2),E=S[0],M=S[1],_=r.useState(""),R=Object(i.a)(_,2),P=R[0],U=R[1],z=Object(l.c)(),L=Object(l.d)(),T=Object(l.b)(),A=function(){y(!1)};return p=f?c.i.Sell:p,Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(o.a,{fullWidth:!0,"aria-label":"review",className:p===c.i.Buy?z.buyButton:z.sellButton,onClick:function(){y(!0)},children:"Lascia una recensione"}),Object(a.jsx)("div",{style:{display:"none"},children:Object(a.jsxs)(d.a,{open:x,onClose:A,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(v.a,{id:"form-dialog-title",children:"Recensisci la trattativa"}),Object(a.jsxs)(u.a,{children:[Object(a.jsxs)("div",{className:T.root,children:[Object(a.jsx)(l.a,{name:"hover-feedback",value:N,precision:.5,onChange:function(e,t){k(t)},onChangeActive:function(e,t){M(t)}}),null!==N&&Object(a.jsx)(s.a,{ml:2,children:h[-1!==E?E:N]})]}),Object(a.jsx)(b.a,{color:"primary",multiline:!0,rows:4,value:P,error:P.length>0&&P.length<=5,helperText:"Lunghezza minima 5 caratteri",onChange:function(e){U(e.target.value)},InputLabelProps:{style:{color:"#6d1331"}},InputProps:{className:L.inputSell,classes:{underline:L.underlineSell}},id:"outlined-multiline-flexible",label:"Recensione",placeholder:"Ottima persona con cui...."})]}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(o.a,{"aria-label":"close-modal",onClick:A,color:"primary",children:"Cancel"}),Object(a.jsx)(O,{disabled:P.length<=5,review:{forUser:t,rating:N,negotiation:n,content:P,type:p},closeModal:A})]})]})})]})}},468:function(e,t,n){"use strict";var a=n(1),i=n(5),o=n(0),r=(n(10),n(7)),c=n(8),l=n(91),s=o.forwardRef((function(e,t){var n=e.children,c=e.classes,s=e.className,d=e.disableTypography,u=void 0!==d&&d,j=Object(i.a)(e,["children","classes","className","disableTypography"]);return o.createElement("div",Object(a.a)({className:Object(r.a)(c.root,s),ref:t},j),u?n:o.createElement(l.a,{component:"h2",variant:"h6"},n))}));t.a=Object(c.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(s)},526:function(e,t,n){"use strict";n.r(t);var a=n(4),i=(n(0),n(41)),o=n(14),r=n(437),c=n(438),l=n(454),s=n(439),d=n(91),u=n(133),j=n(155),b=n(461),v=n(460);t.default=function(){var e,t,n,p,O,h=Object(i.e)().id,f=Object(u.c)(),g=Object(o.F)({variables:{id:h}}),m=g.data,x=g.loading,y=g.error,C="AdWine"===(null===m||void 0===m||null===(e=m.negotiation)||void 0===e?void 0:e.ad.__typename)?null===m||void 0===m||null===(t=m.negotiation)||void 0===t?void 0:t.ad:null,w=function(){return(null===C||void 0===C?void 0:C.postedBy.hideContact)?null:Object(a.jsxs)("div",{"data-testid":"info-contact",children:["puoi contattare l utente al numero: ",null===C||void 0===C?void 0:C.postedBy.phoneNumber," o alla mail ",null===C||void 0===C?void 0:C.postedBy.email]})};return y?Object(a.jsx)("div",{children:y.message}):x?Object(a.jsx)(j.a,{}):Object(a.jsxs)(r.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(c.a,{}),Object(a.jsx)(l.a,{}),Object(a.jsxs)("div",{className:f.paper,children:[Object(a.jsx)(d.a,{color:"primary",component:"h3",variant:"h5",children:"Gestisci la trattativa"}),Object(a.jsx)(d.a,{color:"secondary",variant:"body1",children:"Puoi decidere se contattare l utente tramite il nostro portale o usando i suoi contatti"})]}),Object(a.jsx)(w,{}),Object(a.jsxs)(d.a,{color:"secondary",variant:"body1",children:["Questa trattativa riguarda l annuncio per ",null===C||void 0===C?void 0:C.wineName," ",null===C||void 0===C||null===(n=C.wine)||void 0===n?void 0:n.denominazioneZona]}),(null===m||void 0===m||null===(p=m.negotiation)||void 0===p?void 0:p.isConcluded)?Object(a.jsx)(b.a,{idNegotiation:m.negotiation._id,idUser:m.negotiation.forUserAd._id,type:m.negotiation.type}):Object(a.jsx)(v.a,{id:h}),Object(a.jsx)(s.a,{"aria-label":"open-chat",className:f.sellButton,component:i.a,to:"/messaggi/".concat(null===m||void 0===m||null===(O=m.negotiation)||void 0===O?void 0:O._id),children:"Vai alla chat"})]})}}}]);