{"version":3,"sources":["components/BackButton.tsx","../node_modules/@material-ui/icons/ArrowBackIos.js","components/StyledBox.tsx","../node_modules/@material-ui/icons/ExpandMore.js","containers/CloseNegotiationButton.tsx","../node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js","../node_modules/@material-ui/core/esm/Collapse/Collapse.js","../node_modules/@material-ui/icons/FavoriteBorder.js","../node_modules/@material-ui/icons/ExpandLess.js","containers/FavoriteButton.tsx","components/NegotiationModal/index.tsx","components/CardWineDetail.tsx","components/OpenNegotiations.tsx","pages/Ad.tsx"],"names":["BackButton","searchedWineCache","searchedWine","pathname","useLocation","split","component","Link","to","color","size","startIcon","typeAd","TypeAd","Buy","Sell","onClick","navigate","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","StyledBox","props","sellColor","notActive","buyColor","boxShadow","p","m","mt","px","pt","width","borderColor","bgcolor","borderRadius","children","CloseNegotiationButton","id","isBuy","classes","useStyles","useUpdateNegotiationMutation","onCompleted","closedNegotiation","updateNegotiation","errors","length","errorMessages","map","error","text","notification","type","message","toString","onError","closeNegotiation","loading","handleCloseNegotiation","a","variables","negotiation","_id","isConcluded","className","buyButton","sellButton","disabled","SIZE","CircularProgress","ref","_props$color","_props$disableShrink","disableShrink","_props$size","style","_props$thickness","thickness","_props$value","_props$variant","variant","other","_objectWithoutProperties","circleStyle","rootStyle","rootProps","circumference","Math","PI","strokeDasharray","toFixed","round","strokeDashoffset","concat","transform","_extends","clsx","root","capitalize","determinate","indeterminate","static","height","role","svg","viewBox","circle","circleDisableShrink","circleDeterminate","circleIndeterminate","circleStatic","cx","cy","r","fill","strokeWidth","withStyles","theme","display","transition","transitions","create","animation","colorPrimary","palette","primary","main","colorSecondary","secondary","stroke","transformOrigin","name","flip","Collapse","_props$collapsedHeigh","collapsedHeight","collapsedHeightProp","_props$component","Component","_props$disableStrictM","disableStrictModeCompat","inProp","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","_props$timeout","timeout","duration","standard","_props$TransitionComp","TransitionComponent","Transition","useTheme","timer","wrapperRef","autoTransitionDuration","clearTimeout","current","enableStrictModeCompat","unstable_strictMode","nodeRef","handleRef","useForkRef","undefined","normalizedTransitionCallback","callback","nodeOrAppearing","maybeAppearing","_ref","_ref2","_slicedToArray","node","isAppearing","handleEnter","handleEntering","wrapperHeight","clientHeight","transitionDuration","getTransitionProps","mode","duration2","getAutoHeightDuration","handleEntered","handleExit","handleExited","handleExiting","addEndListener","nodeOrNext","maybeNext","next","setTimeout","state","childProps","container","entered","hidden","minHeight","wrapper","wrapperInner","muiSupportAuto","overflow","visibility","FavoriteButton","ad","useSaveAdMutation","console","log","update","cache","response","cachedDataMeLocal","_","cloneDeep","readQuery","query","MeDocument","me","savedAds","isFav","indexAd","findIndex","adSaved","splice","push","data","saveAd","writeQuery","setIsFav","IconButton","aria-label","NegotiationModal","handleClose","open","createNegotiation","Dialog","onClose","aria-labelledby","DialogContent","Button","DialogActions","CardWineDetail","openModal","setOpenModal","handleClickOpen","ContactOrEdit","postedBy","negotiations","find","isActive","Typography","adWine","__typename","firstName","align","wineName","wine","denominazioneZona","harvest","abv","litersTo","priceFrom","address","regione","provincia","comune","Grid","justify","numberViews","activeNegotiations","OpenNegotiations","showNegotiations","setOpen","List","negotiationsForAd","ListItem","createdBy","dateCreated","dateConcluded","Divider","Ad","setAd","useParams","useAdQuery","useCreateNegotiationMutation","createdNegotiation","updateCacheNegotiations","useNegotiationsForAdLazyQuery","lazyNegotiations","lazyNegResult","buyerOrSeller","Container","maxWidth","CssBaseline","paper","newNegotiation","forUserAd","Backdrop","backdrop"],"mappings":"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","file":"static/js/7.3bb136d3.chunk.js","sourcesContent":["import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { searchedWine } from '../cache';\nimport { Link, useLocation, navigate } from '@reach/router';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport { TypeAd } from '../generated/graphql';\n\nexport const BackButton: React.FC = () => {\n  const searchedWineCache = searchedWine();\n  const { pathname } = useLocation();\n  if (pathname.split('/')[1] === 'annunci' && pathname.split('/')[2]) {\n    return (\n      <Button\n        component={Link}\n        to='/annunci'\n        //variant='contained'\n        color='primary'\n        size='large'\n        startIcon={<ArrowBackIosIcon />}\n      >\n        Annunci\n      </Button>\n    );\n  } else if (searchedWineCache?.typeAd === TypeAd.Buy && pathname !== '/buy') {\n    return (\n      <Button\n        component={Link}\n        to='/buy'\n        //variant='contained'\n        color='primary'\n        size='large'\n        startIcon={<ArrowBackIosIcon />}\n      >\n        Compra\n      </Button>\n    );\n  } else if (\n    searchedWineCache?.typeAd === TypeAd.Sell &&\n    pathname !== '/sell'\n  ) {\n    return (\n      <Button\n        component={Link}\n        to='/sell'\n        //variant='contained'\n        color='primary'\n        size='large'\n        startIcon={<ArrowBackIosIcon />}\n      >\n        Vendi\n      </Button>\n    );\n  } else\n    return (\n      <Button\n        color='primary'\n        size='large'\n        startIcon={<ArrowBackIosIcon />}\n        onClick={() => navigate(-1)}\n      >\n        Torna indietro\n      </Button>\n    );\n};\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z\"\n}), 'ArrowBackIos');\n\nexports.default = _default;","import * as React from 'react';\nimport Box from '@material-ui/core/Box';\nimport { TypeAd } from '../generated/graphql';\n\ninterface BoxProps {\n  width: number;\n  typeAd: TypeAd;\n  children: React.ReactNode;\n  notActive?: boolean;\n}\n\nexport const StyledBox: React.FC<BoxProps> = (props) => {\n  const sellColor = props.notActive ? '#b2b2b2' : 'white';\n  const buyColor = props.notActive ? '#8a425a' : 'primary.main';\n\n  return (\n    <Box\n      boxShadow={3}\n      p={2}\n      m={2}\n      mt={2}\n      px={2}\n      pt={2}\n      width={props.width}\n      color={props.typeAd === TypeAd.Sell ? 'primary.main' : 'white'}\n      borderColor={props.typeAd === TypeAd.Sell ? 'white' : 'primary.main'}\n      bgcolor={props.typeAd === TypeAd.Sell ? sellColor : buyColor}\n      borderRadius={16}\n    >\n      {props.children}\n    </Box>\n  );\n};\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"\n}), 'ExpandMore');\n\nexports.default = _default;","import Button from '@material-ui/core/Button';\nimport * as React from 'react';\nimport { notification } from '../cache';\nimport { useUpdateNegotiationMutation } from '../generated/graphql';\nimport { useStyles } from '../utils/styleHook';\n\nexport const CloseNegotiationButton: React.FC<{\n  id: string;\n  isBuy?: boolean;\n}> = ({ id, isBuy }) => {\n  const classes = useStyles();\n  const [closeNegotiation, { loading }] = useUpdateNegotiationMutation({\n    onCompleted: (closedNegotiation) => {\n      if (closedNegotiation.updateNegotiation?.errors?.length) {\n        const errorMessages = closedNegotiation.updateNegotiation?.errors.map(\n          (error) => error?.text\n        );\n        notification({\n          type: 'error',\n          message: `${errorMessages.toString()}`,\n        });\n      } else {\n        notification({\n          message: 'trattativa chiusa con successo',\n          type: 'success',\n        });\n      }\n    },\n\n    onError: (error) => notification({ type: 'error', message: error.message }),\n  });\n\n  const handleCloseNegotiation = async () => {\n    await closeNegotiation({\n      variables: { negotiation: { _id: id, isConcluded: true } },\n    });\n  };\n\n  return (\n    <Button\n      className={isBuy ? classes.buyButton : classes.sellButton}\n      disabled={loading}\n      onClick={handleCloseNegotiation}\n    >\n      Dichiara chiusa la trattativa\n    </Button>\n  );\n};\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nvar SIZE = 44;\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-block'\n    },\n\n    /* Styles applied to the root element if `variant=\"static\"`. */\n    static: {\n      transition: theme.transitions.create('transform')\n    },\n\n    /* Styles applied to the root element if `variant=\"indeterminate\"`. */\n    indeterminate: {\n      animation: '$circular-rotate 1.4s linear infinite'\n    },\n\n    /* Styles applied to the root element if `variant=\"determinate\"`. */\n    determinate: {\n      transition: theme.transitions.create('transform')\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {\n      color: theme.palette.primary.main\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      color: theme.palette.secondary.main\n    },\n\n    /* Styles applied to the `svg` element. */\n    svg: {\n      display: 'block' // Keeps the progress centered\n\n    },\n\n    /* Styles applied to the `circle` svg path. */\n    circle: {\n      stroke: 'currentColor' // Use butt to follow the specification, by chance, it's already the default CSS value.\n      // strokeLinecap: 'butt',\n\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"static\"`. */\n    circleStatic: {\n      transition: theme.transitions.create('stroke-dashoffset')\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"indeterminate\"`. */\n    circleIndeterminate: {\n      animation: '$circular-dash 1.4s ease-in-out infinite',\n      // Some default value that looks fine waiting for the animation to kicks in.\n      strokeDasharray: '80px, 200px',\n      strokeDashoffset: '0px' // Add the unit to fix a Edge 16 and below bug.\n\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"determinate\"`. */\n    circleDeterminate: {\n      transition: theme.transitions.create('stroke-dashoffset')\n    },\n    '@keyframes circular-rotate': {\n      '0%': {\n        // Fix IE 11 wobbly\n        transformOrigin: '50% 50%'\n      },\n      '100%': {\n        transform: 'rotate(360deg)'\n      }\n    },\n    '@keyframes circular-dash': {\n      '0%': {\n        strokeDasharray: '1px, 200px',\n        strokeDashoffset: '0px'\n      },\n      '50%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-15px'\n      },\n      '100%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-125px'\n      }\n    },\n\n    /* Styles applied to the `circle` svg path if `disableShrink={true}`. */\n    circleDisableShrink: {\n      animation: 'none'\n    }\n  };\n};\n/**\n * ## ARIA\n *\n * If the progress bar is describing the loading progress of a particular region of a page,\n * you should use `aria-describedby` to point to the progress bar, and set the `aria-busy`\n * attribute to `true` on that region until it has finished loading.\n */\n\nvar CircularProgress = /*#__PURE__*/React.forwardRef(function CircularProgress(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$disableShrink = props.disableShrink,\n      disableShrink = _props$disableShrink === void 0 ? false : _props$disableShrink,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 40 : _props$size,\n      style = props.style,\n      _props$thickness = props.thickness,\n      thickness = _props$thickness === void 0 ? 3.6 : _props$thickness,\n      _props$value = props.value,\n      value = _props$value === void 0 ? 0 : _props$value,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'indeterminate' : _props$variant,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"disableShrink\", \"size\", \"style\", \"thickness\", \"value\", \"variant\"]);\n\n  var circleStyle = {};\n  var rootStyle = {};\n  var rootProps = {};\n\n  if (variant === 'determinate' || variant === 'static') {\n    var circumference = 2 * Math.PI * ((SIZE - thickness) / 2);\n    circleStyle.strokeDasharray = circumference.toFixed(3);\n    rootProps['aria-valuenow'] = Math.round(value);\n    circleStyle.strokeDashoffset = \"\".concat(((100 - value) / 100 * circumference).toFixed(3), \"px\");\n    rootStyle.transform = 'rotate(-90deg)';\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, color !== 'inherit' && classes[\"color\".concat(capitalize(color))], {\n      'determinate': classes.determinate,\n      'indeterminate': classes.indeterminate,\n      'static': classes.static\n    }[variant]),\n    style: _extends({\n      width: size,\n      height: size\n    }, rootStyle, style),\n    ref: ref,\n    role: \"progressbar\"\n  }, rootProps, other), /*#__PURE__*/React.createElement(\"svg\", {\n    className: classes.svg,\n    viewBox: \"\".concat(SIZE / 2, \" \").concat(SIZE / 2, \" \").concat(SIZE, \" \").concat(SIZE)\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    className: clsx(classes.circle, disableShrink && classes.circleDisableShrink, {\n      'determinate': classes.circleDeterminate,\n      'indeterminate': classes.circleIndeterminate,\n      'static': classes.circleStatic\n    }[variant]),\n    style: circleStyle,\n    cx: SIZE,\n    cy: SIZE,\n    r: (SIZE - thickness) / 2,\n    fill: \"none\",\n    strokeWidth: thickness\n  })));\n});\nprocess.env.NODE_ENV !== \"production\" ? CircularProgress.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: PropTypes.oneOf(['inherit', 'primary', 'secondary']),\n\n  /**\n   * If `true`, the shrink animation is disabled.\n   * This only works if variant is `indeterminate`.\n   */\n  disableShrink: chainPropTypes(PropTypes.bool, function (props) {\n    if (props.disableShrink && props.variant && props.variant !== 'indeterminate') {\n      return new Error('Material-UI: You have provided the `disableShrink` prop ' + 'with a variant other than `indeterminate`. This will have no effect.');\n    }\n\n    return null;\n  }),\n\n  /**\n   * The size of the circle.\n   * If using a number, the pixel unit is assumed.\n   * If using a string, you need to provide the CSS unit, e.g '3rem'.\n   */\n  size: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /**\n   * @ignore\n   */\n  style: PropTypes.object,\n\n  /**\n   * The thickness of the circle.\n   */\n  thickness: PropTypes.number,\n\n  /**\n   * The value of the progress indicator for the determinate variant.\n   * Value between 0 and 100.\n   */\n  value: PropTypes.number,\n\n  /**\n   * The variant to use.\n   * Use indeterminate when there is no progress value.\n   */\n  variant: chainPropTypes(PropTypes.oneOf(['determinate', 'indeterminate', 'static']), function (props) {\n    var variant = props.variant;\n\n    if (variant === 'static') {\n      throw new Error('Material-UI: `variant=\"static\"` was deprecated. Use `variant=\"determinate\"` instead.');\n    }\n\n    return null;\n  })\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCircularProgress',\n  flip: false\n})(CircularProgress);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { Transition } from 'react-transition-group';\nimport withStyles from '../styles/withStyles';\nimport { duration } from '../styles/transitions';\nimport { getTransitionProps } from '../transitions/utils';\nimport useTheme from '../styles/useTheme';\nimport { useForkRef } from '../utils';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the container element. */\n    container: {\n      height: 0,\n      overflow: 'hidden',\n      transition: theme.transitions.create('height')\n    },\n\n    /* Styles applied to the container element when the transition has entered. */\n    entered: {\n      height: 'auto',\n      overflow: 'visible'\n    },\n\n    /* Styles applied to the container element when the transition has exited and `collapsedHeight` != 0px. */\n    hidden: {\n      visibility: 'hidden'\n    },\n\n    /* Styles applied to the outer wrapper element. */\n    wrapper: {\n      // Hack to get children with a negative margin to not falsify the height computation.\n      display: 'flex'\n    },\n\n    /* Styles applied to the inner wrapper element. */\n    wrapperInner: {\n      width: '100%'\n    }\n  };\n};\n/**\n * The Collapse transition is used by the\n * [Vertical Stepper](/components/steppers/#vertical-stepper) StepContent component.\n * It uses [react-transition-group](https://github.com/reactjs/react-transition-group) internally.\n */\n\nvar Collapse = /*#__PURE__*/React.forwardRef(function Collapse(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$collapsedHeigh = props.collapsedHeight,\n      collapsedHeightProp = _props$collapsedHeigh === void 0 ? '0px' : _props$collapsedHeigh,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disableStrictM = props.disableStrictModeCompat,\n      disableStrictModeCompat = _props$disableStrictM === void 0 ? false : _props$disableStrictM,\n      inProp = props.in,\n      onEnter = props.onEnter,\n      onEntered = props.onEntered,\n      onEntering = props.onEntering,\n      onExit = props.onExit,\n      onExited = props.onExited,\n      onExiting = props.onExiting,\n      style = props.style,\n      _props$timeout = props.timeout,\n      timeout = _props$timeout === void 0 ? duration.standard : _props$timeout,\n      _props$TransitionComp = props.TransitionComponent,\n      TransitionComponent = _props$TransitionComp === void 0 ? Transition : _props$TransitionComp,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"collapsedHeight\", \"component\", \"disableStrictModeCompat\", \"in\", \"onEnter\", \"onEntered\", \"onEntering\", \"onExit\", \"onExited\", \"onExiting\", \"style\", \"timeout\", \"TransitionComponent\"]);\n\n  var theme = useTheme();\n  var timer = React.useRef();\n  var wrapperRef = React.useRef(null);\n  var autoTransitionDuration = React.useRef();\n  var collapsedHeight = typeof collapsedHeightProp === 'number' ? \"\".concat(collapsedHeightProp, \"px\") : collapsedHeightProp;\n  React.useEffect(function () {\n    return function () {\n      clearTimeout(timer.current);\n    };\n  }, []);\n  var enableStrictModeCompat = theme.unstable_strictMode && !disableStrictModeCompat;\n  var nodeRef = React.useRef(null);\n  var handleRef = useForkRef(ref, enableStrictModeCompat ? nodeRef : undefined);\n\n  var normalizedTransitionCallback = function normalizedTransitionCallback(callback) {\n    return function (nodeOrAppearing, maybeAppearing) {\n      if (callback) {\n        var _ref = enableStrictModeCompat ? [nodeRef.current, nodeOrAppearing] : [nodeOrAppearing, maybeAppearing],\n            _ref2 = _slicedToArray(_ref, 2),\n            node = _ref2[0],\n            isAppearing = _ref2[1]; // onEnterXxx and onExitXxx callbacks have a different arguments.length value.\n\n\n        if (isAppearing === undefined) {\n          callback(node);\n        } else {\n          callback(node, isAppearing);\n        }\n      }\n    };\n  };\n\n  var handleEnter = normalizedTransitionCallback(function (node, isAppearing) {\n    node.style.height = collapsedHeight;\n\n    if (onEnter) {\n      onEnter(node, isAppearing);\n    }\n  });\n  var handleEntering = normalizedTransitionCallback(function (node, isAppearing) {\n    var wrapperHeight = wrapperRef.current ? wrapperRef.current.clientHeight : 0;\n\n    var _getTransitionProps = getTransitionProps({\n      style: style,\n      timeout: timeout\n    }, {\n      mode: 'enter'\n    }),\n        transitionDuration = _getTransitionProps.duration;\n\n    if (timeout === 'auto') {\n      var duration2 = theme.transitions.getAutoHeightDuration(wrapperHeight);\n      node.style.transitionDuration = \"\".concat(duration2, \"ms\");\n      autoTransitionDuration.current = duration2;\n    } else {\n      node.style.transitionDuration = typeof transitionDuration === 'string' ? transitionDuration : \"\".concat(transitionDuration, \"ms\");\n    }\n\n    node.style.height = \"\".concat(wrapperHeight, \"px\");\n\n    if (onEntering) {\n      onEntering(node, isAppearing);\n    }\n  });\n  var handleEntered = normalizedTransitionCallback(function (node, isAppearing) {\n    node.style.height = 'auto';\n\n    if (onEntered) {\n      onEntered(node, isAppearing);\n    }\n  });\n  var handleExit = normalizedTransitionCallback(function (node) {\n    var wrapperHeight = wrapperRef.current ? wrapperRef.current.clientHeight : 0;\n    node.style.height = \"\".concat(wrapperHeight, \"px\");\n\n    if (onExit) {\n      onExit(node);\n    }\n  });\n  var handleExited = normalizedTransitionCallback(onExited);\n  var handleExiting = normalizedTransitionCallback(function (node) {\n    var wrapperHeight = wrapperRef.current ? wrapperRef.current.clientHeight : 0;\n\n    var _getTransitionProps2 = getTransitionProps({\n      style: style,\n      timeout: timeout\n    }, {\n      mode: 'exit'\n    }),\n        transitionDuration = _getTransitionProps2.duration;\n\n    if (timeout === 'auto') {\n      var duration2 = theme.transitions.getAutoHeightDuration(wrapperHeight);\n      node.style.transitionDuration = \"\".concat(duration2, \"ms\");\n      autoTransitionDuration.current = duration2;\n    } else {\n      node.style.transitionDuration = typeof transitionDuration === 'string' ? transitionDuration : \"\".concat(transitionDuration, \"ms\");\n    }\n\n    node.style.height = collapsedHeight;\n\n    if (onExiting) {\n      onExiting(node);\n    }\n  });\n\n  var addEndListener = function addEndListener(nodeOrNext, maybeNext) {\n    var next = enableStrictModeCompat ? nodeOrNext : maybeNext;\n\n    if (timeout === 'auto') {\n      timer.current = setTimeout(next, autoTransitionDuration.current || 0);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(TransitionComponent, _extends({\n    in: inProp,\n    onEnter: handleEnter,\n    onEntered: handleEntered,\n    onEntering: handleEntering,\n    onExit: handleExit,\n    onExited: handleExited,\n    onExiting: handleExiting,\n    addEndListener: addEndListener,\n    nodeRef: enableStrictModeCompat ? nodeRef : undefined,\n    timeout: timeout === 'auto' ? null : timeout\n  }, other), function (state, childProps) {\n    return /*#__PURE__*/React.createElement(Component, _extends({\n      className: clsx(classes.container, className, {\n        'entered': classes.entered,\n        'exited': !inProp && collapsedHeight === '0px' && classes.hidden\n      }[state]),\n      style: _extends({\n        minHeight: collapsedHeight\n      }, style),\n      ref: handleRef\n    }, childProps), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.wrapper,\n      ref: wrapperRef\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.wrapperInner\n    }, children)));\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? Collapse.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content node to be collapsed.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The height of the container when collapsed.\n   */\n  collapsedHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * Enable this prop if you encounter 'Function components cannot be given refs',\n   * use `unstable_createStrictModeTheme`,\n   * and can't forward the ref in the passed `Component`.\n   */\n  disableStrictModeCompat: PropTypes.bool,\n\n  /**\n   * If `true`, the component will transition in.\n   */\n  in: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  onEnter: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onEntered: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onEntering: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onExit: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onExited: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onExiting: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  style: PropTypes.object,\n\n  /**\n   * The duration for the transition, in milliseconds.\n   * You may specify a single timeout for all transitions, or individually with an object.\n   *\n   * Set to 'auto' to automatically calculate transition time based on height.\n   */\n  timeout: PropTypes.oneOfType([PropTypes.oneOf(['auto']), PropTypes.number, PropTypes.shape({\n    appear: PropTypes.number,\n    enter: PropTypes.number,\n    exit: PropTypes.number\n  })])\n} : void 0;\nCollapse.muiSupportAuto = true;\nexport default withStyles(styles, {\n  name: 'MuiCollapse'\n})(Collapse);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z\"\n}), 'FavoriteBorder');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z\"\n}), 'ExpandLess');\n\nexports.default = _default;","import * as React from 'react';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport IconButton from '@material-ui/core/IconButton';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport _ from 'lodash';\nimport {\n  useSaveAdMutation,\n  MeDocument,\n  AdWine,\n  AdQuery,\n} from '../generated/graphql';\nimport { ICachedMe } from '../utils/updateCache';\n\nexport const FavoriteButton: React.FC<{\n  ad: AdQuery['ad'];\n}> = ({ ad }) => {\n  const [saveAd] = useSaveAdMutation({\n    onError: (error) => console.log(error),\n    update: (cache, response) => {\n      const cachedDataMeLocal: ICachedMe | null = _.cloneDeep(\n        cache.readQuery({\n          query: MeDocument,\n        })\n      );\n      if (cachedDataMeLocal?.me.savedAds && isFav) {\n        const indexAd = cachedDataMeLocal?.me.savedAds.findIndex(\n          (adSaved) => adSaved._id === ad?._id\n        );\n        cachedDataMeLocal?.me.savedAds.splice(indexAd, 1);\n      } else if (cachedDataMeLocal?.me.savedAds) {\n        cachedDataMeLocal?.me.savedAds.push(\n          response.data?.saveAd?.response as AdWine\n        );\n      }\n      cache.writeQuery({ query: MeDocument, data: cachedDataMeLocal });\n    },\n  });\n  const [isFav, setIsFav] = React.useState<boolean>(false);\n  const handleClick = (id: string) => {\n    void saveAd({ variables: { id } });\n    setIsFav(!isFav);\n  };\n  return (\n    <IconButton\n      aria-label='save'\n      onClick={() => handleClick(ad?._id as string)}\n    >\n      {isFav ? <FavoriteIcon /> : <FavoriteBorderIcon />}\n    </IconButton>\n  );\n};\n","import * as React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\n\nexport const NegotiationModal: React.FC<{\n  handleClose: () => void;\n  open: boolean;\n  createNegotiation: () => void;\n}> = ({ handleClose, open, createNegotiation }) => {\n  const handleClick = () => {\n    createNegotiation();\n    handleClose();\n  };\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby='open-negotiation'\n      >\n        <DialogContent>\n          <Button onClick={handleClick}> Apri la trattativa</Button>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color='primary'>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n","/* eslint-disable @typescript-eslint/restrict-template-expressions */\nimport * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { AdQuery, TypeAd } from '../generated/graphql';\nimport { Button, Grid } from '@material-ui/core';\nimport { FavoriteButton } from '../containers/FavoriteButton';\nimport { NegotiationModal } from './NegotiationModal';\nimport { StyledBox } from './StyledBox';\nimport { useStyles } from '../utils/styleHook';\n\nexport const CardWineDetail: React.FC<{\n  ad: AdQuery['ad'];\n  me: AdQuery['me'];\n  createNegotiation: () => void;\n}> = ({ ad, createNegotiation, me }) => {\n  const classes = useStyles();\n  const isBuy = ad?.typeAd === TypeAd.Buy ? true : false;\n  const [openModal, setOpenModal] = React.useState<boolean>(false);\n  const handleClickOpen = () => {\n    setOpenModal(true);\n  };\n  const handleClose = () => {\n    setOpenModal(false);\n  };\n\n  const ContactOrEdit = () => {\n    if (me?._id === ad?.postedBy._id) {\n      return (\n        <Button className={isBuy ? classes.buyButton : classes.sellButton}>\n          Modifica l annuncio\n        </Button>\n      );\n    } else if (\n      me?.negotiations?.find((negotiation) => negotiation?.ad._id === ad?._id)\n    ) {\n      return <div>negoziazione gia aperta</div>;\n    }\n    if (!ad?.isActive) {\n      return <Typography>Annuncio non piu attivo </Typography>;\n    }\n    return (\n      <>\n        <Button\n          className={isBuy ? classes.buyButton : classes.sellButton}\n          onClick={handleClickOpen}\n        >\n          Contatta il {ad?.typeAd === TypeAd.Buy ? 'compratore' : 'venditore'}\n        </Button>\n        <NegotiationModal\n          handleClose={handleClose}\n          open={openModal}\n          createNegotiation={createNegotiation}\n        />\n      </>\n    );\n  };\n  const adWine = ad?.__typename === 'AdWine' ? ad : null;\n  return (\n    <StyledBox width={1} typeAd={ad?.typeAd as TypeAd}>\n      {ad?.postedBy._id !== me?._id ? <FavoriteButton ad={ad} /> : null}\n\n      <Typography component='h5' variant='h5'>\n        L&apos;utente {ad?.postedBy.firstName} {isBuy ? 'compra' : 'vende'}:\n      </Typography>\n      <Typography align='left' variant='h6'>\n        {adWine?.wineName} {adWine?.wine?.denominazioneZona}\n        <br />\n        Annata: {ad?.harvest}\n        <br />\n        Gradazione: {ad?.abv} % Vol\n        <br />\n        Quantità: {adWine?.litersTo}\n        <br />\n        Prezzo: {ad?.priceFrom} euro al litro\n      </Typography>\n      <br />\n      <Typography align='left' component='h5' variant='h5'>\n        Indirizzo\n      </Typography>\n      <br />\n      <Typography align='left' variant='h6'>\n        Regione: {ad?.address?.regione}\n        <br />\n        Provincia: {ad?.address?.provincia}\n        <br />\n        Comune: {ad?.address?.comune}\n      </Typography>\n      <br />\n      <ContactOrEdit />\n      <Grid container justify='space-between'>\n        <Typography align='left' variant='caption'>\n          Annuncio visualizzato {ad?.numberViews} volte\n        </Typography>\n\n        <Typography align='right' variant='caption'>\n          Negoziazioni attive: {ad?.activeNegotiations}\n        </Typography>\n      </Grid>\n    </StyledBox>\n  );\n};\n","import { LazyQueryResult } from '@apollo/client';\nimport * as React from 'react';\nimport { Exact, NegotiationsForAdQuery } from '../generated/graphql';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Divider from '@material-ui/core/Divider';\nimport { Typography } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport { Link } from '@reach/router';\nimport { CloseNegotiationButton } from '../containers/CloseNegotiationButton';\nimport Collapse from '@material-ui/core/Collapse';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport IconButton from '@material-ui/core/IconButton';\nimport { useStyles } from '../utils/styleHook';\n\nexport const OpenNegotiations: React.FC<{\n  data: LazyQueryResult<\n    NegotiationsForAdQuery,\n    Exact<{\n      ad: string;\n    }>\n  >;\n  showNegotiations: () => void;\n}> = ({ data, showNegotiations }) => {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState<boolean>(false);\n  const handleShowNegotiations = () => {\n    if (!open) {\n      showNegotiations();\n    }\n    setOpen(!open);\n  };\n  if (data.loading) {\n    return <div>loading</div>;\n  }\n  if (data.error) {\n    return <div>error</div>;\n  }\n  return (\n    <>\n      <IconButton onClick={handleShowNegotiations}>\n        {!open ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n      </IconButton>\n      <Collapse in={open}>\n        <List aria-label='negotiations'>\n          {data?.data?.negotiationsForAd?.map((negotiation) => (\n            <div key={negotiation._id}>\n              <ListItem>\n                <div>\n                  <Typography color='primary' component='h3' variant='h5'>\n                    {negotiation.createdBy.firstName}\n                  </Typography>\n                  <br />\n                  <Typography color='secondary' variant='body1'>\n                    aperta il {negotiation.dateCreated}{' '}\n                    {negotiation.dateConcluded\n                      ? `chiusa il ${negotiation.dateConcluded}`\n                      : null}\n                  </Typography>\n\n                  <br />\n                  <Button\n                    className={classes.buyButton}\n                    component={Link}\n                    to={`/messaggi/${negotiation._id}`}\n                  >\n                    Vai alla chat\n                  </Button>\n                  <br />\n                  {!negotiation.isConcluded ? (\n                    <CloseNegotiationButton isBuy={true} id={negotiation._id} />\n                  ) : (\n                    <Button>Lascia una recensione</Button>\n                  )}\n                </div>\n              </ListItem>\n              <Divider />\n            </div>\n          ))}\n        </List>\n      </Collapse>\n    </>\n  );\n};\n","import * as React from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport { useParams } from '@reach/router';\nimport {\n  TypeAd,\n  useAdQuery,\n  useCreateNegotiationMutation,\n  NegotiationInput,\n  useNegotiationsForAdLazyQuery,\n  AdQuery,\n} from '../generated/graphql';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { notification } from '../cache';\nimport { CardWineDetail } from '../components/CardWineDetail';\nimport { Container, CssBaseline, Typography } from '@material-ui/core';\nimport { BackButton } from '../components/BackButton';\nimport { updateCacheNegotiations } from '../utils/updateCache';\nimport { OpenNegotiations } from '../components/OpenNegotiations';\nimport { useStyles } from '../utils/styleHook';\n\nconst Ad: React.FC<RouteComponentProps> = () => {\n  const [ad, setAd] = React.useState<AdQuery['ad'] | undefined>(undefined);\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n  const { id }: { id: string } = useParams();\n  const { data, loading, error } = useAdQuery({\n    variables: {\n      id: id,\n    },\n    onCompleted: (data) => (data?.ad ? setAd(data?.ad) : null),\n  });\n\n  React.useEffect(() => {\n    if (data?.ad) {\n      setAd(data?.ad);\n    }\n  }, [data?.ad?.activeNegotiations]);\n  const [createNegotiation] = useCreateNegotiationMutation({\n    onCompleted: (createdNegotiation) => {\n      if (createdNegotiation.createNegotiation?.errors?.length) {\n        const errorMessages = createdNegotiation.createNegotiation?.errors.map(\n          (error) => error?.text\n        );\n        notification({\n          type: 'error',\n          message: `${errorMessages.toString()}`,\n        });\n      } else {\n        notification({\n          message: 'trattativa creata con successo',\n          type: 'success',\n        });\n      }\n    },\n    onError: (error) =>\n      notification({\n        type: 'error',\n        message: `errore durante creazione trattativa: ${error.message}`,\n      }),\n    update: (cache, response) => {\n      updateCacheNegotiations(\n        cache,\n        response.data?.createNegotiation?.response\n      );\n    },\n  });\n  const [lazyNegotiations, lazyNegResult] = useNegotiationsForAdLazyQuery();\n  const handleShowNegotiations = () => {\n    lazyNegotiations({ variables: { ad: id } });\n  };\n  const openNegotiation = () => {\n    const newNegotiation: NegotiationInput = {\n      forUserAd: ad?.postedBy._id,\n      ad: ad?._id,\n      type: ad?.typeAd,\n    } as NegotiationInput;\n    void createNegotiation({ variables: { negotiation: newNegotiation } });\n  };\n  const classes = useStyles();\n  if (error && !loading) {\n    notification({\n      type: 'error',\n      message: `${error.message}`,\n    });\n    return <div>Errore</div>;\n  }\n\n  const buyerOrSeller =\n    ad?.typeAd === TypeAd.Buy ? \"L'acquirente\" : 'Il venditore';\n  if (ad?._id) {\n    return (\n      <Container component='main' maxWidth='xs'>\n        <CssBaseline />\n        <BackButton />\n        <div className={classes.paper}>\n          <Typography color='primary' component='h3' variant='h5'>\n            Contatta {buyerOrSeller}\n          </Typography>\n          <Typography color='secondary' variant='body1'>\n            Questo è uno degli annunci che abbiamo selezionato per te: verifica\n            anche tu i parametri e decidi se procedere.\n          </Typography>\n        </div>\n        <CardWineDetail\n          ad={ad}\n          createNegotiation={openNegotiation}\n          me={data?.me}\n        />\n        {data?.me?._id === ad.postedBy._id ? (\n          <OpenNegotiations\n            data={lazyNegResult}\n            showNegotiations={handleShowNegotiations}\n          />\n        ) : null}\n      </Container>\n    );\n  }\n  return (\n    <>\n      <Backdrop className={classes.backdrop} open={loading}>\n        <CircularProgress color='inherit' />\n      </Backdrop>\n    </>\n  );\n};\n\nexport default Ad;\n"],"sourceRoot":""}