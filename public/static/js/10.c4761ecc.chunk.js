(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[10],{450:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),i=n(436),o=(n(0),n(23)),c=n(41),a=n(451),l=n.n(a),s=n(15),u=function(){var e=Object(o.e)(),t=Object(c.d)().pathname;return"annunci"===t.split("/")[1]&&t.split("/")[2]?Object(r.jsx)(i.a,{component:c.a,to:"/annunci",color:"primary",size:"large",startIcon:Object(r.jsx)(l.a,{}),children:"Annunci"}):(null===e||void 0===e?void 0:e.typeAd)===s.k.Buy&&"/buy"!==t?Object(r.jsx)(i.a,{component:c.a,to:"/buy",color:"primary",size:"large",startIcon:Object(r.jsx)(l.a,{}),children:"Compra"}):(null===e||void 0===e?void 0:e.typeAd)===s.k.Sell&&"/sell"!==t?Object(r.jsx)(i.a,{component:c.a,to:"/sell",color:"primary",size:"large",startIcon:Object(r.jsx)(l.a,{}),children:"Vendi"}):Object(r.jsx)(i.a,{color:"primary",size:"large",startIcon:Object(r.jsx)(l.a,{}),onClick:function(){return Object(c.c)(-1)},children:"Torna indietro"})}},452:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),i=(n(0),n(445)),o=n(15),c=function(e){var t=e.notActive?"#b2b2b2":"white",n=e.notActive?"#8a425a":"primary.main";return Object(r.jsx)(i.a,{boxShadow:3,p:2,m:2,mt:2,px:2,pt:2,width:e.width,color:e.typeAd===o.k.Sell?"primary.main":"white",borderColor:e.typeAd===o.k.Sell?"white":"primary.main",bgcolor:e.typeAd===o.k.Sell?t:n,borderRadius:16,children:e.children})}},454:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(4),i=n(26),o=n(41),c=n(0),a=n(453),l=n.n(a),s=n(151),u=n(385),d=n(468),v=Object(s.a)((function(){return Object(u.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"}})})),j=function(e){var t=v(),n="messaggi"===Object(o.d)().pathname.split("/")[1],a=function(e){var t=e.root,n=void 0===t?null:t,r=e.rootMargin,o=void 0===r?"0px":r,a=e.threshold,l=void 0===a?0:a,s=c.useState(null),u=Object(i.a)(s,2),d=u[0],v=u[1],j=c.useState(null),b=Object(i.a)(j,2),f=b[0],h=b[1],O=c.useRef(null);return c.useEffect((function(){O.current&&O.current.disconnect(),O.current=new window.IntersectionObserver((function(e){var t=Object(i.a)(e,1)[0];return v(t)}),{root:n,rootMargin:o,threshold:l});var e=O.current;return f&&e.observe(f),function(){return e.disconnect()}}),[f,n,o,l]),[h,d]}({threshold:0}),s=Object(i.a)(a,2),u=s[0],j=s[1],b=c.useState(!0),f=Object(i.a)(b,2),h=f[0],O=f[1];return c.useEffect((function(){j&&(null===j||void 0===j?void 0:j.intersectionRatio)>=.5&&h?(e.fetchMore(),e.setIsLoading&&e.setIsLoading(!0),O(!1)):0!==(null===j||void 0===j?void 0:j.intersectionRatio)||h||(O(!0),e.setIsLoading&&e.setIsLoading(!1))}),[null===j||void 0===j?void 0:j.intersectionRatio]),n?Object(r.jsxs)(r.Fragment,{children:[e.isVisible?Object(r.jsxs)("div",{className:t.root,id:"page-bottom-boundary",ref:u,children:[" ",Object(r.jsx)(l.a,{})]}):null,e.children]}):Object(r.jsxs)("div",{className:t.root,children:[e.children,e.isVisible?e.isLoading?Object(r.jsx)(d.a,{}):Object(r.jsxs)("div",{id:"page-bottom-boundary",ref:u,style:{height:30},children:[" ",Object(r.jsx)(l.a,{})]}):null]})}},455:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),i=(n(0),n(383)),o=n(227),c=n(230),a=n(15),l=function(e){return Object(r.jsxs)(o.a,{fullWidth:!0,children:[Object(r.jsx)(c.a,{style:{color:"black"},htmlFor:"order",children:"Ordine risultati"}),Object(r.jsxs)(i.a,{native:!0,value:e.order,onChange:function(t){e.setOrder(t.target.value)},inputProps:{name:"order",id:"order"},children:[Object(r.jsx)("option",{"aria-label":"None",value:""}),Object(r.jsx)("option",{value:a.i.CreatedAtDesc,children:"Dal piu recente"}),Object(r.jsx)("option",{value:a.i.CreatedAtAsc,children:"Dal meno recente"}),Object(r.jsx)("option",{value:a.i.PriceDesc,children:"Dal piu caro"}),Object(r.jsx)("option",{value:a.i.PriceAsc,children:"Dal meno caro"})]})]})}},460:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(4),i=(n(0),n(452)),o=n(90),c=n(429),a=n(41),l=n(15),s=n(35),u=n(478),d=function(e){var t=e.ad,n=Object(s.a)(),d=Object(u.a)(n.breakpoints.up("sm"))?400:250,v=(null===t||void 0===t?void 0:t.typeAd)===l.k.Buy,j=(null===t||void 0===t?void 0:t.isActive)?"auto":"none";return t?Object(r.jsx)(i.a,{width:d,typeAd:t.typeAd,notActive:!t.isActive,children:Object(r.jsxs)(c.a,{style:{pointerEvents:j,display:"block"},component:a.a,to:"/annunci/".concat(t._id),underline:"none",children:[Object(r.jsxs)(o.a,{component:"h5",variant:"h6",color:v?"textSecondary":"primary",children:[v?"Compro":"Vendo"," ",t.wineName," "]}),Object(r.jsxs)(o.a,{align:"left",variant:"body1",color:v?"textSecondary":"primary",children:["Annata: ",t.harvest,Object(r.jsx)("br",{}),"Gradazione: ",t.abv," % Vol",Object(r.jsx)("br",{}),"Quantit\xe0: ",t.litersTo," l",Object(r.jsx)("br",{}),"Prezzo: ",t.priceFrom," euro al litro"]}),Object(r.jsx)("br",{}),Object(r.jsxs)(o.a,{align:"right",variant:"caption",color:v?"textSecondary":"primary",children:["Annuncio pubblicato il ",t.datePosted]})]})}):null}},461:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return p}));var r=n(4),i=n(26),o=n(28),c=n(0),a=n(436),l=n(486),s=n(467),u=n.n(s),d=n(423),v=n(484),j=n(514),b=n(8),f=n(504),h=n(23);var O=Object(b.a)({root:{color:f.a[400],"&$checked":{color:f.a[600]}},checked:{}})((function(e){return Object(r.jsx)(j.a,Object(o.a)({color:"default"},e))})),p=function(e){var t=Object(h.e)(),n=c.useState(!1),o=Object(i.a)(n,2),s=o[0],j=o[1],b=c.useState(!1),f=Object(i.a)(b,2),p=f[0],x=f[1],m=c.useState({priceTo:function(e){return e<=(null===t||void 0===t?void 0:t.price)},abv:function(e){return e>=(null===t||void 0===t?void 0:t.abv)-.5||e<=(null===t||void 0===t?void 0:t.abv)+.5},harvest:function(e){return e===(null===t||void 0===t?void 0:t.harvest)||e-1===(null===t||void 0===t?void 0:t.harvest)},litersTo:function(e){return e>=(null===t||void 0===t?void 0:t.liters)}}),g=Object(i.a)(m,2),y=g[0],A=g[1];c.useEffect((function(){if(e.list.length>0){var t=function(e,t){var n=Object.keys(t);return e.filter((function(e){return n.every((function(n){return"function"!==typeof t[n]||t[n](e[n])}))}))}(e.list,y);e.setFilteredList(t)}}),[y,e.list]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(a.a,{onClick:function(){return x(!p)},"aria-label":"filter",color:"primary",size:"large",startIcon:Object(r.jsx)(u.a,{}),children:"Filtri"}),Object(r.jsxs)(l.a,{in:p,children:[Object(r.jsx)(d.a,{}),Object(r.jsx)(v.a,{control:Object(r.jsx)(O,{checked:s,onChange:function(){A(s?{priceTo:function(e){return e<=(null===t||void 0===t?void 0:t.price)},abv:function(e){return e>=(null===t||void 0===t?void 0:t.abv)-.5||e<=(null===t||void 0===t?void 0:t.abv)+.5},harvest:function(e){return e===(null===t||void 0===t?void 0:t.harvest)||e-1===(null===t||void 0===t?void 0:t.harvest)},litersTo:function(e){return e>=(null===t||void 0===t?void 0:t.liters)}}:{priceTo:function(){return!0},harvest:function(){return!0},abv:function(){return!0},litersTo:function(){return!0}}),j(!s)},name:"showAll"}),label:"Mostra tutti gli annunci per questo vino"})]})]})}},505:function(e,t,n){"use strict";n.r(t);var r=n(4),i=n(81),o=n.n(i),c=n(103),a=n(26),l=n(0),s=n(90),u=n(466),d=n(435),v=n(434),j=n(15),b=n(450),f=n(455),h=n(454),O=n(23),p=n(460),x=n(484),m=n(423),g=n(461);t.default=function(){var e=Object(O.c)(),t=l.useState(void 0),n=Object(a.a)(t,2),i=n[0],y=n[1],A=l.useState([]),k=Object(a.a)(A,2),w=k[0],S=k[1],C=l.useState([]),I=Object(a.a)(C,2),D=I[0],E=I[1],F=l.useState(j.i.CreatedAtDesc),M=Object(a.a)(F,2),z=M[0],T=M[1],L=l.useState(!1),N=Object(a.a)(L,2),V=N[0],B=N[1],P=Object(j.o)({variables:{offset:0,limit:4,orderBy:j.i.CreatedAtDesc,user:null===e||void 0===e?void 0:e._id,isActive:i},onError:function(e){return console.log(e)}}),R=Object(a.a)(P,2),_=R[0],U=R[1];l.useEffect((function(){(null===e||void 0===e?void 0:e._id)&&_()}),[e]),l.useEffect((function(){var e;(null===(e=U.data)||void 0===e?void 0:e.adsForUser)&&S(U.data.adsForUser.ads)}),[U.data]),l.useEffect((function(){w&&w.length&&U.fetchMore&&U.fetchMore({variables:{orderBy:z,limit:w.length}}).catch((function(e){return console.log(e)}))}),[z]),l.useEffect((function(){E(w),V&&(null===w||void 0===w?void 0:w.length)&&E(null===w||void 0===w?void 0:w.filter((function(e){return null===e||void 0===e?void 0:e.isActive})))}),[V,w]);if(0===(null===w||void 0===w?void 0:w.length))return Object(r.jsx)("div",{children:"Non hai ancora creato annunci"});if(null===w||void 0===w?void 0:w.length){var G,J,W=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U.fetchMore){e.next=9;break}return e.prev=1,e.next=4,U.fetchMore({variables:{offset:null===D||void 0===D?void 0:D.length,orderBy:z,isActive:i}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(v.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(d.a,{}),Object(r.jsx)(b.a,{}),Object(r.jsx)("br",{}),Object(r.jsx)(s.a,{color:"primary",component:"h3",variant:"h5",children:"Gli annunci che hai creato"}),Object(r.jsx)("br",{}),Object(r.jsx)(f.a,{setOrder:T,order:z}),Object(r.jsx)(m.a,{}),Object(r.jsx)(x.a,{control:Object(r.jsx)(g.b,{checked:V,onChange:function(){B(!V),V?(y(void 0),E(w)):y(!0)},name:"showAll"}),label:"Nascondi gli annunci inattivi"}),Object(r.jsxs)(h.a,{fetchMore:W,isVisible:(null===D||void 0===D?void 0:D.length)!==(null===(G=U.data)||void 0===G||null===(J=G.adsForUser)||void 0===J?void 0:J.pageCount),isLoading:U.loading,children:[" ",D&&D.map((function(e){return Object(r.jsx)(p.a,{ad:e},e&&e._id)}))]})]})}return Object(r.jsx)(u.a,{})}}}]);
//# sourceMappingURL=10.c4761ecc.chunk.js.map