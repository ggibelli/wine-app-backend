(this["webpackJsonpwine-app-frontend"]=this["webpackJsonpwine-app-frontend"]||[]).push([[11],{454:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),i=n(439),a=(n(0),n(41)),o=n(455),c=n.n(o),s=function(){return Object(r.jsx)(i.a,{"aria-label":"previous-page",color:"primary",size:"large",startIcon:Object(r.jsx)(c.a,{}),onClick:function(){return Object(a.c)(-1)},children:"Torna indietro"})}},455:function(e,t,n){"use strict";var r=n(53),i=n(54);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(0)),o=(0,r(n(55)).default)(a.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");t.default=o},456:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4),i=(n(0),n(449)),a=n(14),o=function(e){var t=e.notActive?"#b2b2b2":"white",n=e.notActive?"#8a425a":"primary.main";return Object(r.jsx)(i.a,{boxShadow:3,p:2,m:2,mt:2,px:2,pt:2,width:e.width,color:e.typeAd===a.l.Sell?"primary.main":"white",borderColor:e.typeAd===a.l.Sell?"white":"primary.main",bgcolor:e.typeAd===a.l.Sell?t:n,borderRadius:16,children:e.children})}},457:function(e,t,n){"use strict";var r=n(53),i=n(54);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(0)),o=(0,r(n(55)).default)(a.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.default=o},458:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(4),i=n(28),a=n(41),o=n(0),c=n(457),s=n.n(c),d=n(131),l=n(233),u=n(384),v=Object(d.a)((function(){return Object(l.a)({root:{display:"flex",flexDirection:"column",alignItems:"center"}})})),j=function(e){var t=v(),n="messaggi"===Object(a.d)().pathname.split("/")[1],c=function(e){var t=e.root,n=void 0===t?null:t,r=e.rootMargin,a=void 0===r?"0px":r,c=e.threshold,s=void 0===c?0:c,d=o.useState(null),l=Object(i.a)(d,2),u=l[0],v=l[1],j=o.useState(null),b=Object(i.a)(j,2),f=b[0],h=b[1],O=o.useRef(null);return o.useEffect((function(){O.current&&O.current.disconnect(),O.current=new window.IntersectionObserver((function(e){var t=Object(i.a)(e,1)[0];return v(t)}),{root:n,rootMargin:a,threshold:s});var e=O.current;return f&&e.observe(f),function(){return e.disconnect()}}),[f,n,a,s]),[h,u]}({threshold:0}),d=Object(i.a)(c,2),l=d[0],j=d[1],b=o.useState(!0),f=Object(i.a)(b,2),h=f[0],O=f[1];return o.useEffect((function(){j&&(null===j||void 0===j?void 0:j.intersectionRatio)>0&&h?(e.fetchMore(),e.setIsLoading&&e.setIsLoading(!0),O(!1)):0!==(null===j||void 0===j?void 0:j.intersectionRatio)||h||(O(!0),e.setIsLoading&&e.setIsLoading(!1))}),[null===j||void 0===j?void 0:j.intersectionRatio]),n?Object(r.jsxs)(r.Fragment,{children:[e.isVisible?e.isLoading?Object(r.jsx)("div",{className:t.root,children:Object(r.jsx)(u.a,{})}):Object(r.jsxs)("div",{className:t.root,id:"page-bottom-boundary",ref:l,children:[" ",Object(r.jsx)(s.a,{})]}):null,e.children]}):Object(r.jsxs)("div",{className:t.root,children:[e.children,e.isVisible?e.isLoading?Object(r.jsx)(u.a,{}):Object(r.jsxs)("div",{id:"page-bottom-boundary",ref:l,style:{height:30},children:[" ",Object(r.jsx)(s.a,{})]}):null]})}},459:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),i=(n(0),n(386)),a=n(231),o=n(235),c=n(14),s=function(e){return Object(r.jsxs)(a.a,{fullWidth:!0,children:[Object(r.jsx)(o.a,{style:{color:"black"},htmlFor:"order",children:"Ordine risultati"}),Object(r.jsxs)(i.a,{native:!0,value:e.order,onChange:function(t){e.setOrder(t.target.value)},inputProps:{name:"order",id:"order"},children:[Object(r.jsx)("option",{value:c.j.CreatedAtDesc,children:"Dal piu recente"}),Object(r.jsx)("option",{value:c.j.CreatedAtAsc,children:"Dal meno recente"}),e.isAds?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("option",{value:c.j.PriceDesc,children:"Dal piu caro"}),Object(r.jsx)("option",{value:c.j.PriceAsc,children:"Dal meno caro"})]}):null]})]})}},482:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),i=n(0),a=n(225),o=n(428);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.a)(),c=Object(o.a)({theme:n,name:"MuiUseMediaQuery",props:{}});var s="function"===typeof e?e(n):e;s=s.replace(/^@media( ?)/m,"");var d="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,l=Object(r.a)({},c,t),u=l.defaultMatches,v=void 0!==u&&u,j=l.matchMedia,b=void 0===j?d?window.matchMedia:null:j,f=l.noSsr,h=void 0!==f&&f,O=l.ssrMatchMedia,p=void 0===O?null:O,x=i.useState((function(){return h&&d?b(s).matches:p?p(s).matches:v})),m=x[0],g=x[1];return i.useEffect((function(){var e=!0;if(d){var t=b(s),n=function(){e&&g(t.matches)};return n(),t.addListener(n),function(){e=!1,t.removeListener(n)}}}),[s,b,d]),m}},546:function(e,t,n){"use strict";n.r(t);var r=n(4),i=n(56),a=n.n(i),o=n(45),c=n(82),s=n(28),d=n(0),l=n(91),u=n(438),v=n(437),j=n(14),b=n(454),f=n(459),h=n(458),O=n(456),p=n(35),x=n(482),m=n(21),g=n(389),y=function(e){var t=e.review,n=Object(m.c)(),i=Object(p.a)(),a=Object(x.a)(i.breakpoints.up("sm"))?400:250,o=(null===t||void 0===t?void 0:t.type)===j.l.Buy,c=(null===t||void 0===t?void 0:t.createdBy._id)===(null===n||void 0===n?void 0:n._id);return t?Object(r.jsxs)(O.a,{width:a,typeAd:t.type,children:[Object(r.jsx)(g.a,{name:"read-only",value:t.rating,readOnly:!0,precision:.1}),Object(r.jsxs)(l.a,{align:"left",variant:"h6",color:o?"textSecondary":"primary",children:[c?"Cosa hai detto della cantina ".concat(t.forUser.firstName):"La cantina ".concat(t.createdBy.firstName," dice di te"),":"]}),Object(r.jsx)("br",{}),Object(r.jsx)(l.a,{align:"left",variant:"body1",color:o?"textSecondary":"primary",children:t.content}),Object(r.jsxs)(l.a,{"data-testid":"date",align:"right",variant:"caption",color:o?"textSecondary":"primary",children:["Recensito il ",t.dateCreated]})]}):null},w=n(155);t.default=function(){var e=d.useState([]),t=Object(s.a)(e,2),n=t[0],i=t[1],O=d.useState(j.j.CreatedAtDesc),p=Object(s.a)(O,2),x=p[0],m=p[1],g=d.useState(!1),M=Object(s.a)(g,2),S=M[0],A=M[1],L=d.useState(!1),C=Object(s.a)(L,2),k=C[0],D=C[1],E=Object(j.M)({variables:{offset:0,limit:4,orderBy:j.j.CreatedAtDesc},onError:function(e){return console.log(e)},onCompleted:function(e){var t=e.reviews;return i(null===t||void 0===t?void 0:t.reviews)}}),I=E.data,B=E.error,_=E.loading,N=E.fetchMore;if(d.useEffect((function(){(null===n||void 0===n?void 0:n.length)&&N&&(D(!0),N({variables:{orderBy:x,limit:n.length}}).then((function(e){var t,n=e.data;i(null===(t=n.reviews)||void 0===t?void 0:t.reviews),D(!1)})).catch((function(e){console.log(e),D(!1)})))}),[x]),B)return Object(r.jsx)("div",{children:"error"});if(_)return Object(r.jsx)(w.a,{});if(0===(null===n||void 0===n?void 0:n.length))return Object(r.jsx)("div",{children:"Non hai ancora recensioni"});if(null===n||void 0===n?void 0:n.length){var R,P=function(){var e=Object(c.a)(a.a.mark((function e(){var t,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=15;break}return e.prev=1,A(!0),e.next=5,N({variables:{offset:null===n||void 0===n?void 0:n.length,orderBy:x}});case 5:r=e.sent,c=r.data,i([].concat(Object(o.a)(n),Object(o.a)(null===(t=c.reviews)||void 0===t?void 0:t.reviews))),A(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),A(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(v.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(u.a,{}),Object(r.jsx)(b.a,{}),Object(r.jsx)("br",{}),Object(r.jsx)(l.a,{color:"primary",component:"h3",variant:"h5",children:"Le tue recensioni"}),Object(r.jsx)("br",{}),Object(r.jsx)(f.a,{setOrder:m,order:x}),k?Object(r.jsx)(w.a,{}):Object(r.jsxs)(h.a,{fetchMore:P,isVisible:(null===n||void 0===n?void 0:n.length)!==(null===I||void 0===I||null===(R=I.reviews)||void 0===R?void 0:R.pageCount),isLoading:S,children:[" ",null===n||void 0===n?void 0:n.map((function(e){return Object(r.jsx)(y,{review:e},e&&e._id)}))]})]})}return Object(r.jsx)("div",{children:"Grave errore"})}}}]);
//# sourceMappingURL=11.2a8e0dfe.chunk.js.map